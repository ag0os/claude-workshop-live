{"finalPrompt":"\n<SYSTEM>\nYou are a specialized TypeScript script generator specifically for the Script Kit environment (https://scriptkit.com).\nYour primary goal is to create a functional, minimal draft script based on the user's prompt (<USER_PROMPT>).\n\nCRITICAL OUTPUT RULES:\n\n1.  Your output MUST be ONLY the raw TypeScript code for the Script Kit script.\n2.  DO NOT include any explanations, introductions, summaries, or conversational text before or after the code.\n3.  DO NOT wrap the code in markdown fences like `typescript ... ` or `...`.\n4.  The script MUST start directly with the required metadata comments (see <METADATA> section).\n\nSCRIPTING REQUIREMENTS:\n\n1.  Use ESM syntax (`import`, `export`). NEVER use `require`.\n2.  Utilize Script Kit's global functions (`arg`, `env`, `$` etc.) directly where appropriate. Do not import them unless absolutely necessary from a sub-path (rare). Refer to <API_DOCS> and <GUIDE>.\n3.  Write asynchronous code using top-level `await`. Do not wrap the main logic in an `async function main() {...}` unless strictly necessary for complex control flow.\n4.  Focus on the core functionality requested by the user. Keep the draft minimal.\n\nCONTEXT:\nRely heavily on the provided <API_DOCS>, <GUIDE>, and <EXAMPLES> for correct API usage and common patterns. Pay attention to the <METADATA> requirements.\n\nFinal Check: Review your generated code one last time before outputting. Ensure it contains ONLY the raw TypeScript code, starting precisely with the `// Name:` metadata comment, and includes `import \"@johnlindquist/kit\";` appropriately. Remove ALL surrounding text, explanations, apologies, or markdown formatting.\n\n</SYSTEM>\n\n<GUIDE>\n# Script Kit Guide\n\n## Running a Script\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nPress `cmd+;` (or `ctrl+;` on Windows) to open the Script Kit prompt. Search for the script you want to run and press `enter` to run it.\n\nYou can also open the prompt from the menu bar and select \"Open Prompt.\"\n\n## Debugging a Script\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nWith the prompt open, run a script with `cmd+enter` (`ctrl+enter` on Windows) to launch the script in debug mode. An inspector will appear alongside the script, allowing you to inspect current values and step through it line by line. Use the `debugger` statement anywhere in your script to create a breakpoint where your script will pause. (When running the script normally, the `debugger` statement is simply ignored.)\n\n```js\nlet response = await get(\"https://api.github.com/repos/johnlindquist/kit\")\n\n// The inspector will pause your script so you can examine the value of \"response\"\"\ndebugger\n```\n\n## Create a Script\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nKeep your scripts in `~/.kenv/scripts` (\"kenv\" stands for \"Kit Environment\").\n\nWith the Kit.app prompt open, start typing the name of the script you want to create, then hit `enter`` when prompted to create a script. Your editor will launch with the newly created script focused.\n\nKit.app continuously watches the `~/.kenv/scripts` directory for changes. Creating, deleting, or modifying scripts will be automatically reflected in the Kit.app prompt.\n\n## Naming a Script\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe file name of the script is lowercased and dashed like `hello-world.js` by convention. You can add an additional `//Name: Hello World` to the top of your script for a more friendly name to appear when searching in the prompt. \n\n```js\n//Name: Hello World\n```\n\nWhen creating a script with the prompt, you can type the `Friendly Name` of the script and Kit.app will automatically create the dashed file name for you.\n\n\n## // Shortcut Metadata\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nUse the `// Shortcut` metadata to add a global keyboard shortcut to any script\n\n```js\n// Shortcut: cmd shift j\n\nimport \"@johnlindquist/kit\"\n\nsay(`You pressed command shift j`)\n```\n\n```js\n// Shortcut: opt i\n\nimport \"@johnlindquist/kit\"\n\nsay(`You pressed option i`)\n```\n\n\n## Input Text with `await arg()`\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe simplest form of input you can accept from a user is an `arg()`\n\n```js\n// Name: Input Text\n\nimport \"@johnlindquist/kit\"\n\nlet name = await arg(\"Enter your name\")\n\nawait div(md(`Hello, ${name}`))\n```\n\n## Select From a List of Strings\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Select From a List\n\nimport \"@johnlindquist/kit\"\n\nlet fruit = await arg(\"Pick a fruit\", [\n  \"Apple\",\n  \"Banana\",\n  \"Cherry\",\n])\n\nawait div(md(`You selected ${fruit}`))\n```\n\n## Select From a List of Objects\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Select From a List of Objects\n\nimport \"@johnlindquist/kit\"\n\nlet { size, weight } = await arg(\"Select a Fruit\", [\n  {\n    name: \"Apple\",\n    description: \"A shiny red fruit\",\n    // add any properties to \"value\"\n    value: {\n      size: \"small\",\n      weight: 1,\n    },\n  },\n  {\n    name: \"Banana\",\n    description: \"A long yellow fruit\",\n    value: {\n      size: \"medium\",\n      weight: 2,\n    },\n  },\n])\n\nawait div(\n  md(\n    `You selected a fruit with size: ${size} and weight: ${weight}`\n  )\n)\n```\n\n## Select from a Dynamic List\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Select From a Dynamic List\n\nimport \"@johnlindquist/kit\"\n\nawait arg(\"Select a Star Wars Character\", async () => {\n  // Get a list of people from the swapi api\n  let response = await get(\"https://swapi.dev/api/people/\")\n\n  return response?.data?.results.map(p => p.name)\n})\n```\n\n\n\n## Display a Preview When Focusing a Choice\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Display a Preview When Focusing a Choice\n\nimport \"@johnlindquist/kit\"\n\nlet heights = [320, 480, 640]\nlet choices = heights.map(h => {\n  return {\n    name: `Kitten height: ${h}`,\n    preview: () =>\n      `<img class=\"w-full\" src=\"http://placekitten.com/640/${h}\">`,\n    value: h,\n  }\n})\n\nlet height = await arg(\"Select a Kitten\", choices)\n\nawait div(md(`You selected ${height}`))\n```\n\n## Display HTML Beneath the Input\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nIf the second argument to `arg()` is a string, it will be displayed beneath the input as HTML.\n\n```js\n// Just a string\nawait arg(\n  \"Select a fruit\",\n  md(`I recommend typing \"Apple\"`) // \"md\" converts strings to HTML\n)\n```\n\nA function that returns a string will also be displayed beneath the input as HTML. You can use the `input` text in the function to create dynamic HTML.\n\n```js\n// A function, takes typed \"input\", returns string\nawait arg(\"Select a fruit\", input =>\n  md(`You typed \"${input}\"`)\n)\n```\n\n```js\n// An async function, takes typed \"input\", returns string\n// `hightlight` requires \"async\" takes markdown, applies code highlighting\n\nawait arg(\n  \"Select a fruit\",\n  async input =>\n    await highlight(` \n~~~js\nawait arg(\"${input}\")\n~~~\n  `)\n)\n```\n\n```js\n// Dynamic choices, static preview\nawait arg(\n  {\n    preview: async () =>\n      await highlight(`\n## This is just information\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nUsually to help you make a choice\n  \nJust type some text to see the choices update\n`),\n  },\n  async input => {\n    return Array.from({ length: 10 }).map(\n      (_, i) => `${input} ${i}`\n    )\n  }\n)\n```\n\n## Display Only HTML\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nUse `await div('')` to display HTML.\n\n```js\n// Name: Display HTML\n\nimport \"@johnlindquist/kit\"\n\nawait div(`<h1>Hello World</h1>`)\n```\n\n### Style the Container\n\nThe second argument of `div` allows you to add [tailwind](https://tailwindcss.com/) classes to the container of your html. For example, `p-5` will add a `padding: 1.25rem;` to the container.\n\n```js\nawait div(`<h1>Hi</h1>`, `p-5`)\n```\n\n\n## Display HTML with CSS\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nScript Kit bundles [Tailwind CSS](https://tailwindcss.com/).\n\n```js\n// Name: Display HTML with CSS\n\nimport \"@johnlindquist/kit\"\n\nawait div(\n  `<h1 class=\"p-10 text-4xl text-center\">Hello World</h1>`\n)\n```\n\n## Display Markdown\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe `md()` function will convert Markdown into HTML that you can pass into div. It will also add the default Tailwind styles so you won't have to think about formatting.\n\n```js\n// Name: Display Markdown\n\nimport \"@johnlindquist/kit\"\n\nlet html = md(`# Hello World`)\n\nawait div(html)\n```\n\n## Create a Widget\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nUse the `widget` method to spawn a new, persisting window that is disconnected from the script.\n\n```js\nawait widget(`\n<div class=\"bg-black text-white h-screen p-5\">\n    Hello there!\n<div>\n\n`)\n```\n\n## Set Options using Flags\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nTo add an options menu to your choices, you must provide a `flags` object. If one of the keyboard shortcuts are hit, or the user selects the option, then the `flag` global will have the matching key from your flags set to `true`:\n\n```js\nlet urls = [\n  \"https://scriptkit.com\",\n  \"https://egghead.io\",\n  \"https://johnlindquist.com\",\n]\n\nlet flags = {\n  open: {\n    name: \"Open\",\n    shortcut: \"cmd+o\",\n  },\n  copy: {\n    name: \"Copy\",\n    shortcut: \"cmd+c\",\n  },\n}\n\nlet url = await arg(\n  { placeholder: `Press 'right' to see menu`, flags },\n  urls\n)\n\nif (flag?.open) {\n  $`open ${url}`\n} else if (flag?.copy) {\n  copy(url)\n} else {\n  console.log(url)\n}\n```\n\nUsing the same script above, In the terminal, you would pass an open flag like so:\n\n```bash\nmy-sites --open\n```\n\n## Store Simple JSON data with db\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe `db` helpers reads/writes to json files in the `~/.kenv/db` directory. It's meant as a simple wrapper around common json operations.\n\n```js\n// Name: Database Read/Write Example\n// Description: Add/remove items from a list of fruit\n\nlet fruitDb = await db([\"apple\", \"banana\", \"orange\"])\n\n// This will keep prompting until you hit Escape\nwhile (true) {\n  let fruitToAdd = await arg(\n    {\n      placeholder: \"Add a fruit\",\n      //allows to submit input not in the list\n      strict: false,\n    },\n    fruitDb.items\n  )\n\n  fruitDb.items.push(fruitToAdd)\n  await fruitDb.write()\n\n  let fruitToDelete = await arg(\n    \"Delete a fruit\",\n    fruitDb.items\n  )\n\n  fruitDb.items = fruitDb.items.filter(\n    fruit => fruit !== fruitToDelete\n  )\n\n  await fruitDb.write()\n}\n```\n\nThis db helper can also be used as a simple Key/value Store like this: \n\n```js\n// Name: Database Read/Write Example 2\n// Description: Use 'db' helper as Key/Value Store\n\n// Open the json file with the same name as the script file, the data in the param is the default, \n// which will be used when the db file is opened the first time\nconst scriptDB = await db({hello: 'World'});\n\n// Note: This db read here should only make sure the db object has the latest content from disk. \n// It may be unnecessary directly after opening the db object. \nawait scriptDB.read();\n\nif (scriptDB.data.hello === 'World') {\n    // change value in your db\n    scriptDB.data.hello = 'Bob';\n} else {\n    // change value back in your db\n    scriptDB.data.hello = 'World';\n}\n\nawait scriptDB.write();\n\n```\n\n\n## Watch Files to Trigger Scripts\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe `// Watch` metadata enables you to watch for changes to a file on your system.\n\n### Watch a Single File\n\n```js\n// Name: Speak File\n// Watch: ~/speak.txt\n\nimport \"@johnlindquist/kit\"\n\nlet speakPath = home(\"speak.txt\")\n\ntry {\n  let content = await readFile(speakPath, \"utf-8\")\n  if (content.length < 60) {\n    // We don't want `say` to run too long üòÖ\n    say(content)\n  }\n} catch (error) {\n  log(error)\n}\n```\n\n\n\n### Watch a Directory\n\nThe `// Watch` metadata uses [Chokidar](https://www.npmjs.com/package/chokidar) under the hood, so it supports the same glob patterns. Please use cautiously, as this can cause a lot of scripts to run at once.\n\n```js\n// Name: Download Log\n// Watch: ~/Downloads/*\n\nimport \"@johnlindquist/kit\"\n\n// These are optional and automatically set by the watcher\nlet filePath = await arg()\nlet event = await arg()\n\nif (event === \"add\") {\n  await appendFile(home(\"download.log\"), filePath + \"\\n\")\n}\n```\n\n\n\n## Run Shell Commands\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n### Use zx to Run Shell Commands\n\nScript Kit bundles [zx](https://github.com/google/zx) as the global `$`\n\nHere's an example from their docs (make sure to `cd` to the proper dir)\n\n```js\nawait $`cat package.json | grep name`\n\nlet branch = await $`git branch --show-current`\nawait $`dep deploy --branch=${branch}`\n\nawait Promise.all([\n  $`sleep 1; echo 1`,\n  $`sleep 2; echo 2`,\n  $`sleep 3; echo 3`,\n])\n\nlet name = \"foo bar\"\nawait $`mkdir /tmp/${name}`\n```\n\n## Make HTTP Requests with get, put, post, and del\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe `get`, `post`, `put`, and `del` methods use the [axios](https://www.npmjs.com/package/axios) API\n\n### Make a Get Request\n\n```js\n// Name: Get Example\n\nimport \"@johnlindquist/kit\"\n\nlet response = await get(\n  \"https://scriptkit.com/api/get-example\"\n)\n\nawait div(md(response.data.message))\n```\n\n\n\n### Make a Post Request\n\n```js\n// Name: Post Example\n\nimport \"@johnlindquist/kit\"\n\nlet response = await post(\n  \"https://scriptkit.com/api/post-example\",\n  {\n    name: await arg(\"Enter your name\"),\n  }\n)\n\nawait div(md(response.data.message))\n```\n\n\n\n## Download Files\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nUse `download` to download a file from a url:\n\n```js\n// Name: Download a File\n\nimport \"@johnlindquist/kit\"\n\nlet url = \"https://www.scriptkit.com/assets/logo.png\"\nlet buffer = await download(url)\n\nlet fileName = path.basename(url)\nlet filePath = home(fileName)\n\nawait writeFile(filePath, buffer)\n```\n\n## Read a Text File\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nYou can use `readFile` to read a text file from your system:\n\n```js\n// Name: Read a Text File\n\nimport \"@johnlindquist/kit\"\n\n// Download a readme for the sake of the example\nlet fileUrl = `https://raw.githubusercontent.com/johnlindquist/kit/main/README.md`\nlet filePath = home(\"README.md\")\nlet buffer = await download(fileUrl)\nawait writeFile(filePath, buffer)\n\n// Read the file\nlet contents = await readFile(filePath, \"utf-8\")\nawait editor(contents)\n```\n\n## Create a Text File\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Create a Text File\n\nimport \"@johnlindquist/kit\"\n\nlet filePath = await path() // Select a path that doesn't exist\n\nlet exists = await pathExists(filePath)\n\nif (!exists) {\n  await writeFile(filePath, \"Hello world\")\n} else {\n  await div(md(`${filePath} already exists...`))\n}\n```\n\n\n\n## Live Edit a Text File\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Update a Text File\n\nimport \"@johnlindquist/kit\"\n\nlet filePath = home(`my-notes.md`)\n\n// `ensureReadFile` will create the file with the content\n// if it doesn't exist\nlet content = await ensureReadFile(filePath, \"Hello world\")\n\nawait editor({\n  value: content,\n  onInput: debounce(async input => {\n    await writeFile(filePath, input)\n  }, 200),\n})\n```\n\n\n## Run a Script on a Schedule\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nUse cron syntax to run scripts on a schedule. The following example will show a notification to stand up and stretch every 15 minutes.\n\n```js\n// Name: Stand Up and Stretch\n// Schedule: */15 * * * *\n\nimport \"@johnlindquist/kit\"\n\nnotify(`Stand up and stretch`)\n```\n\n\n\n[Crontab.guru](https://crontab.guru/) is a great utility to help generate and understand cron syntax.\n\n## Environment Variables\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe `env` helper will read environment variables from ~/.kenv/.env. If the variable doesn't exist, it will prompt you to create it.\n\n```js\n// Name: Env Example\n\nimport \"@johnlindquist/kit\"\n\nlet KEY = await env(\"MY_KEY\")\n\nawait div(md(`You loaded ${KEY} from ~/.kenv/.env`))\n```\n\n\n\n## Environment Variable Async Prompt\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nIf you pass a function as the second argument to `env`, it will only be called if the variable doesn't exist.\nThis allows you to set Enviroment Variables from a list, an API, or any other data source.\n\n```js\n// Name: Choose an Environment Variable\n\nimport \"@johnlindquist/kit\"\n\nlet MY_API_USER = await env(\"MY_API_USER\", async () => {\n  return await arg(\"Select a user for your API\", [\n    \"John\",\n    \"Mindy\",\n    \"Joy\",\n  ])\n})\n\nawait div(\n  md(\n    `You selected ${MY_API_USER}. Running this script again will remember your choice`\n  )\n)\n```\n\n\n\n## Share as a Gist, Link, URL, or Markdown\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nThe Script Kit main window also includes many other share options:\n\n- Share as Gist <kbd>cmd+g</kbd>: Creates as Gist of the selected script, then copies the URL to the clipboard\n- Share as Link <kbd>opt+s</kbd>: Creates a private installable kit://link to the selected script, then copies the URL to the clipboard. These links are very long as they encode the entire script into the URL.\n- Share as URL <kbd>opt+u</kbd>: Creates a Gist of the selected script, then copies an installable public URL to the clipboard\n- Share as Markdown <kbd>cmd+m</kbd>: Copies the selected script as a Markdown snippet to the clipboard\n\n## Get Featured\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nFeatured scripts are displayed in:\n\n- The `Community` tab of the Script Kit main window\n- On the [Community Scripts](https://www.scriptkit.com/scripts) page\n\nTo get featured, post your script to the [Script Kit Github discussions Share page](https://github.com/johnlindquist/kit/discussions/categories/share). With a script focused in the Script Kit main window, you can press right or <kbd>cmd+k</kbd> to bring up a share menu which will automatically walk you through creating a shareable post for the script.\n\nAs a shortcut, hit <kbd>cmd+s</kbd> with a script selected to automatically run the \"Share as Discussion\" process.\n\n## Experiment with Data in Chrome DevTools\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Play with Data in Chrome DevTools\n\nimport \"@johnlindquist/kit\"\n\n// Will open a standalone Chrome DevTools window\n// The object passed in will be displayed\n// You can access the object using `x`, e.g., `x.message` will be `Hello world`\ndev({\n  message: \"Hello world\",\n})\n```\n\n## // Shortcode Metadata\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nA shortcode allows you quickly run a script without needing to search for it.\n\nTo trigger a `// Shortcode`, type the string of characters from the main menu, then hit `spacebar`. In this example, you would type `oi` then `spacebar` to run this script:\n\n```js\n// Shortcode: oi\n\nimport \"@johnlindquist/kit\"\n\nsay(`You pressed option i`)\n```\n\n## Quick Submit from Hint\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nA common pattern from Terminal is to quickly submit a script from a hint. Using a bracket around a single character will submit that character when pressed.\n\n```js\nimport \"@johnlindquist/kit\"\n\nlet value = await arg({\n  placeholder: \"Continue?\",\n  hint: `Another [y]/[n]`,\n})\n\nif (value === \"y\") {\n  say(`You pressed y`)\n} else {\n  say(`You pressed n`)\n}\n```\n\n## Quick Submit from Choice\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nIf you need to provide a little more information to the user, use a choice instead of a hint. This allows you to provide a full value that will be submitted instead of just the single letter.\n\n```js\nimport \"@johnlindquist/kit\"\n\nlet value = await arg(\"Select a food\", [\n  {\n    name: \"[a]pple\",\n    value: \"apple\",\n  },\n  {\n    name: \"[b]anana\",\n    value: \"banana\",\n  },\n  {\n    name: \"[c]heese\",\n    value: \"cheese\",\n  },\n])\n\nawait div(md(value))\n```\n\n\n\n## Run Scripts from Other Apps\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nAre you a fan of one of these amazing tools?\n- [Keyboard Maestro](https://www.keyboardmaestro.com/main/)\n- [Better Touch Tool](https://folivora.ai/)\n- [Karabiner](https://karabiner-elements.pqrs.org/)\n- [Raycast](https://www.raycast.com/)\n- [Alfred](https://www.alfredapp.com/)\n\nWe love all these tools! So we made sure the scripts you create in Script Kit can be invoked by them too:\n\nIf you have a script named `center-app`, then you can paste the following snippet into the \"scripts\" section of any of these tools.\n\n```bash\n~/.kit/kar center-app\n```\n\n`kar` is an executable that takes the script name and sends it to Kit.app to run.\n\n> It's named `kar` because we're HUGE fans of  [karabiner](https://karabiner-elements.pqrs.org/) and using \"kit kar\" as a transport\n> for scripts into the app makes us giggle üòá\n\nAny arguments you pass to the script will also be sent along. So if you want to run `center-app` with a padding of `50`:\n\n```bash\n~/.kit/kar center-app 50\n```\n\n\n## Select a Path\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Select a Path\n\nimport \"@johnlindquist/kit\"\n\nlet filePath = await path()\n\nawait div(md(`You selected ${filePath}`))\n```\n\n## Select a Path with Options\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Select a Path with Options\n\nimport \"@johnlindquist/kit\"\n\nawait path({\n  hint: `Select a path containing JS files`,\n  onlyDirs: true,\n  onChoiceFocus: async (input, { focused }) => {\n    let focusedPath = focused.value\n    try {\n      let files = await readdir(focusedPath)\n      let hasJS = files.find(f => f.endsWith(\".js\"))\n\n      setPreview(\n        md(\n          `${\n            hasJS ? \"‚úÖ Found\" : \"üî¥ Didn't find\"\n          } JS files`\n        )\n      )\n    } catch (error) {\n      log(error)\n    }\n  },\n})\n```\n\n\n## Select from Finder Prompts\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Select from Finder Prompt\n\nimport \"@johnlindquist/kit\"\n\nlet filePath = await selectFile()\n\nlet folderPath = await selectFolder()\n\nawait div(md(`You selected ${filePath} and ${folderPath}`))\n```\n\n## Built-in Terminal\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Run Commands in the Terminal\n\nimport \"@johnlindquist/kit\"\n\nawait term({\n  //defaults to home dir\n  cwd: `~/.kenv/scripts`,\n  command: `ls`,\n})\n```\n\n> The shell defaults to `zsh`. You can change your shell by setting the `KIT_SHELL` environment variable in the ~/kenv/.env, but most of the testing has been done with `zsh`.\n\n\n\n\n\n## Built-in Editor\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nScript Kit ships with a built-in version of the Monaco editor. Use `await editor()` to switch to the editor prompt.\n\n```js\n// Name: Editor Example\n\nimport \"@johnlindquist/kit\"\n\nlet result = await editor()\n\nawait div(md(result))\n```\n\n## Load Text in the Editor\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n```js\n// Name: Load Text Into the Editor\n\nimport \"@johnlindquist/kit\"\n\nlet { data } = await get(\n  `https://raw.githubusercontent.com/johnlindquist/kit/main/README.md`\n)\n\nlet result = await editor({\n  value: data,\n  // Supports \"css\", \"js\", \"ts\", \"md\", \"properties\". \"md\" is default. More language support coming in future releases.\n  language: \"md\",\n  footer: `Hit cmd+s to continue...`,\n})\n\nawait div(md(result))\n```\n\n\n## Add ~/.kit/bin to $PATH\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n> This is similar to VS Code's \"Add `code` to path\"\n\nYou can run the `kit` CLI from your terminal with\n\n```bash\n~/.kit/bin/kit\n```\n\nbut this option will allow you run the CLI with:\n\n```bash\nkit\n```\n\n> If you're familiar with adding to your `.zshrc`, just add `~/.kit/bin` to your PATH.\n\nThe `kit` CLI will allow you to run, edit, etc scripts from your terminal.\n\n## Required Permissions for Features\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nKit.app requires accessibility permission for the following reasons:\n* Watch user input to trigger Snippets and Clipboard History\n* Send keystrokes to trigger for `setSelectedText`, `getSelectedText`, `keyboard.type` and others\n* In the future, recording Macros, mouse actions, and more\n\n‚ùóÔ∏è **You must quit Kit.app and re-open it for changes to take effect.** \n\n![osx preferences panel](https://user-images.githubusercontent.com/36073/174673600-59020e49-be04-4786-81f7-5bbe20a9ce6c.png)\n\n## Submit From Live Data\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nSome scenarios require `setInterval` or other \"live data\" utils. This means you can't use `await` on the arg/div/textarea/etc because `await` prevents the script from continuing on to start the `setInterval`.\n\n![CleanShot 2021-11-28 at 08 58 04](https://user-images.githubusercontent.com/36073/143775792-34c1fb15-21b9-4690-b8e2-23e1447f65e5.gif)\n\nUse the Promise `then` on arg/div/textarea/etc to allow the script to continue to run to the `setInterval`. Inside of the `then` callback, you will have to clear the interval for your script to continue/complete:\n\n```js\nlet intervalId = 0\ndiv(md(`Click a value`)).then(async value => {\n  clearInterval(intervalId)\n\n  await div(md(value))\n})\n\nintervalId = setInterval(() => {\n  let value = Math.random()\n\n  setPanel(\n    md(`\n  [${value}](submit:${value})\n  `)\n  )\n}, 1000)\n```\n\n\n## Strict Mode\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n`strict` is enabled by default and it forces the user to pick an item from the list, preventing them from entering their own text.\n\nWhen you disabled `strict`, if you type something that eliminates the entire list, then hit <kbd>Enter</kbd>, the string from the input will be passed back.\n\n> Note: If the list values are Objects and the user inputs a String, you will need to handle either type being returned\n\n```js\n// If the list is completely filtered, hitting enter does nothing.\nlet fruit = await arg(`You can only pick one`, [\n  `Apple`,\n  `Banana`,\n  `Orange`,\n])\n\n// If the list is completely filtered, hitting enter sends whatever\n// is currently in the input.\nlet fruitOrInput = await arg(\n  {\n    placeholder: `Pick a fruit or type anything`,\n    strict: false,\n  },\n  [`Apple`, `Banana`, `Orange`]\n)\n\nawait textarea(`${fruit} and ${fruitOrInput}`)\n```\n\n\n## Quick Keys\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nA quick key allows you to bind a single key to submit a prompt.\n\nYou can add quick keys inside the \"hint\" if you don't want to bother with choices:\n\n```js\n//Type \"y\" or \"n\"\nlet confirm = await arg({\n  placeholder: \"Eat a taco?\",\n  hint: `[y]es/[n]o`,\n})\n\nconsole.log(confirm) //\"y\" or \"n\"\n```\n\nOtherwise, add the quick keys in the `name` of the choices and it will return the quick key:\n\n```js\n // Type \"a\", \"b\", or \"g\"\nlet fruit = await arg(`Pick one`, [\n  `An [a]pple`,\n  `A [b]anana`,\n  `a [g]rape`,\n])\n\nconsole.log(fruit) //\"a\", \"b\", or \"g\"\n```\n\nYou can add a value, then typing the quick key will return the value:\n\n```js\n// Type \"c\" or \"a\"\nlet vegetable = await arg(\"Pick a veggie\", [\n  { name: \"[C]elery\", value: \"Celery\" },\n  { name: \"C[a]rrot\", value: \"Carrot\" },\n])\n\nconsole.log(vegetable) //\"Celery\" or \"Carrot\"\n```\n\n\n\n## Position a Widget on Screen\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nYou can control the size/position of each `show` window you create, but you'll need some info from the current screen (especially with a multi-monitor setup!) to be able to position the window where you want it:\n\n```js\nlet width = 480\nlet height = 320\n\nlet { workArea } = await getActiveScreen()\nlet { x, y, width: workAreaWidth } = workArea\n\nawait widget(\n  md(`\n# I'm in the top right of the current screen!\n\n<div class=\"flex justify-center text-9xl\">\nüòò\n</div>\n`),\n  {\n    width,\n    height,\n    x: x + workAreaWidth - width,\n    y: y,\n  }\n)\n```\n\n## Update on Input\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nWhen you pass a function as the second argument of `arg`, you can take the current `input` and return a string. Kit.app will then render the results as HTML. The simplest example looks like this:\n\n```js\nawait arg(\"Start typing\", input => input)\n```\n\nIf you want to make it look a bit nicer, you can wrap the output with some HTML:\n\n```js\nawait arg(\n  \"Type something\",\n  input =>\n    `<div class=\"text-3xl flex justify-center items-center p-5\">\n${input || `Waiting for input`}\n</div>`\n)\n```\n\nGrowing on the example above, here's a Celsius to Fahrenheit converter:\n\n```js\nlet cToF = celsius => {\n  return (celsius * 9) / 5 + 32\n}\n\nawait arg(\n  \"Enter degress in celsius\",\n  input =>\n    `<div class=\"text-3xl flex justify-center items-center p-5\">\n${input ? cToF(input) + \"f\" : `Waiting for input`}\n</div>`\n)\n```\n\n## Clone Git Repos with degit\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nWe're developers. We clone project templates from github. [degit](https://www.npmjs.com/package/degit) is available on the global scope for exactly this scenario.\n\n```js\nlet projectName = await arg(\"Name your project\")\nlet targetDir = home(\"projects\", projectName)\n\nawait degit(`https://github.com/sveltejs/template`).clone(\n  targetDir\n)\n\nawait edit(targetDir)\n```\n\n## View Logs\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nWhen you use `console.log()` in a script, it writes the log out to a relative directory.\n\nFor example:\n\n`~/.kenv/scripts/my-script.js`\n\nwill write logs to:\n\n`~/.kenv/logs/my-script.log`\n\nYou can view the live output of a log in your terminal with:\n\n```sh\ntail -f ~/.kenv/logs/my-script.log\n```\n\nIf you want to watch the main log, you can use:\n\n```sh\ntail -f ~/.kit/logs/main.log\n```\n\n## Save webpage as a PDF\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nYou can save any webpage as a PDF.\n\n```js\n// Name: Save news as PDF\n\nimport \"@johnlindquist/kit\"\n\nconst pdfResults = await getWebpageAsPdf('https://legiblenews.com');\n\nawait writeFile(home('news.pdf'), pdfResults);\n```\n\n## Take screenshot of webpage\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nYou can take a screenshot of any webpage.\n\n```js\n// Name: Take screenshot of news webpage\n\nimport \"@johnlindquist/kit\"\n\nconst screenshotResults = await getScreenshotFromWebpage('https://legiblenews.com', {\n  screenshotOptions: { fullPage: true },\n});\n\nawait writeFile(home('news.png'), screenshotResults);\n```\n\n## Scrape content from a webpage\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\nYou can scrape content from a webpage. The first time you run this, you will be prompted to install Playwright.\n\n```js\n// Name: Scrape John's pinned Github repositories\n\nimport \"@johnlindquist/kit\"\n\nconst items = await scrapeSelector(\n  'https://github.com/johnlindquist',\n  // CSS Selector to target elements\n  '.pinned-item-list-item-content > div > a',\n  // [Optional] function to transform the elements, if omitted then `element.innerText` is returned\n  (element) => ({\n    title: element.innerText,\n    link: element.href,\n  }),\n  // [Optional] options\n  {\n    headless: false,\n    timeout: 60000,\n  }\n);\n\nlet filePath = home(`pinned-repos.md`)\n\n// `ensureReadFile` will create the file with the content\n// if it doesn't exist\nlet content = await ensureReadFile(filePath, items.map(({title, link}) => `- [${title}](${link})`).join('\\n'))\n```\n\n## Missing Something?\n\n<!-- value: https://github.com/johnlindquist/kit/blob/main/GUIDE.md -->\n\n<!-- enter: Update Docs -->\n<!-- value: download-md.js -->\n\nThis Guide constantly evolving. If you're missing something, [suggest an edit](https://github.com/johnlindquist/kit/blob/main/GUIDE.md) to the docs or open an issue on GitHub.\n\nHit <kbd>Enter</kbd> to download the latest docs.\n\n\n</GUIDE>\n\n<API_DOCS>\n# API\n\n## Intro\n\n### Welcome to Script Kit! üëã\n\nScript Kit provides an opinionated set of global APIs meant to streamline the process of writing scripts. Many of them (such as prompts) are meant to interact with the app, but there are also many common APIs for working with files, etc, that are simply built-in node or third-party libraries exposed as globals.\n\n_You do not need to use any of these APIs._ You are free to write your scripts and add whatever npm packages you like.\n\nIf you have questions, please reach out on our [Script Kit GitHub Discussions](https://github.com/johnlindquist/kit/discussions)\n\nHappy Scripting! ‚ù§Ô∏è - John Lindquist\n\n### Play with Examples in the App\n\nWith Script Kit open, type `docs` and hit enter.\n\nWith any example open, press `cmd+p` to generate a script where you can experiment with examples contained in that section.\n\n## Basics\n\n### Script Imports\n\nScript Kit Scripts start with importing the SDK:\n\n```ts\nimport '@johnlindquist/kit'\n```\n\nYou can also import any other library from npm and Script Kit will prompt you to install it (if you haven't already installed it in the current kenv).\n\n```ts\nimport { generateText } from 'ai'\nimport { openai } from '@ai-sdk/openai'\n```\n\n### Top-Level await\n\nAll scripts are top-level await and essentially run top to bottom. Expect to see a lot of `await` in the scripts.\n\n```ts\nconst downloadMarkdownPattern = home('Downloads', '*.md')\nconst files = await globby(downloadMarkdownPattern)\n\nlet totalContent = ''\nfor await (const file of files) {\n  const content = await readFile(file, 'utf8')\n  totalContent += content\n}\n\nawait editor(totalContent)\n```\n\n### Global Helpers\n\nAll scripts are standard node.js scripts with added helpers from the SDK. Many of the most common helpers are provided in the global scope to save you from having to import them. For example, the follow script requires no imports:\n\n```ts\nconst url = 'https://raw.githubusercontent.com/johnlindquist/kit-docs/refs/heads/main/API.md'\nconst response = await get(url)\nconst content = response.data\nconst apiPath = home('Downloads', 'API.md')\nawait writeFile(apiPath, content)\n```\n\n### Script Metadata\n\nAll metadata is optional. There are two metadata modes based on your preferences:\n\n#### Metadata Comments\n\nThese are the defaults and have been around since Script Kit v1.\n\n```\n// Name: My Amazing Script\n```\n\n### Metadata Typed Global\n\nIntroduced in Script Kit v3, these allow a fully-typed, autocomplete experience:‚à´\n\n```\nmetadata = {\n  name: \"My Amazing Script\n}\n```\n\n### metadata\n\nThe `metadata` object can include:\n\n- `name`: Display name in Script Kit UI (defaults to filename)\n- `author`: Creator's name\n- `description`: Brief script summary\n- `enter`: Text shown on Enter button\n- `alias`: Alternative search term\n- `image`: Path to script icon\n- `shortcut`: Global keyboard shortcut, e.g, cmd+opt+4\n- `shortcode`: Execute when typed + space in menu\n- `trigger`: Execute when typed in menu\n- `expand`: Text expansion trigger (replaces deprecated `snippet`)\n- `keyword`: Search keyword for menu\n- `pass`: Pass menu input as arg (true/string/RegExp)\n- `group`: Menu organization category\n- `exclude`: Hide from menu\n- `watch`: File/dir to watch for changes\n- `log`: Disable logging if false\n- `background`: Run as background process\n- `system`: Trigger on system events (sleep/wake/etc)\n- `schedule`: Cron expression for timing\n- `access`: REST API access level (public/key/private)\n- `response`: Allow REST API response\n- `index`: Order within group### Metadata\n\n#### metadata example\n\n```ts\nname: \"Metadata Example\",\n  description: \"This is an example of how to use metadata in a script\",\n  author: \"John Lindquist\",\n};\n```\n\n## AI\n\nScript Kit provides several AI-related global helpers to make it easy to integrate AI and LLM-powered features into your scripts. These helpers allow you to generate text, interact with assistants, and work with structured outputs using schemas.\n\n### Setup\n\nScript Kit automatically loads AI-related environment variables from your `~/.kenv/.env` file. To configure your default AI provider, model, and other options, add the following variables to your `~/.kenv/.env`:\n\n- `AI_DEFAULT_PROVIDER` ‚Äî Default AI provider (e.g. `openai`, `anthropic`, `google`, `xai`, `openrouter`)\n- `AI_DEFAULT_MODEL` ‚Äî Default model for the provider (e.g. `gpt-4o`, `claude-3-opus-20240229`)\n- `AI_DEFAULT_TEMPERATURE` ‚Äî Default temperature for completions (e.g. `0.7`)\n- `AI_DEFAULT_MAX_TOKENS` ‚Äî Default max tokens for completions (e.g. `1000`)\n\nExample `~/.kenv/.env`:\n\n```env\nAI_DEFAULT_PROVIDER=anthropic\nAI_DEFAULT_MODEL=claude-3-opus-20240229\nAI_DEFAULT_TEMPERATURE=0.7\nAI_DEFAULT_MAX_TOKENS=1000\n```\n\nThese values are used as defaults for all AI helpers (`ai`, `assistant`, `generate`). You can override them per-call by passing options to the helpers.\n\n### ai\n\nThe `ai` helper creates a text generation function using a prompt. Use it to generate text completions based on user input or other data.\n\n#### ai example\n\n```ts\nconst emojiStoryGenerator = ai('Generate a story using only emoji, no text.')\nconst story = await emojiStoryGenerator('Epic Fantasy')\nawait editor(story)\n```\n\n#### ai convert selected text\n\n```ts\nconst text = await getSelectedText()\n\nconst rewriter = ai(`\nYou are an expert at cleaning up text for clarity and readability. \n- Only improve the text. \n- Do not include any other text in your response. \n- Avoid using markdown formatting.\n`)\n\nconst cleanedText = await rewriter(text)\n\nawait setSelectedText(cleanedText)\n```\n\n#### ai prompt improver\n\n```ts\nconst prompt = `\n# Improve the User's Prompt Following the Patterns Below\n\n> Practical prompt patterns to help anyone get clearer, more reliable answers from an AI agent.\n\n| # | Pattern                       | Why It Matters                                                          | Template                                                                 | Example Prompt                                                                                             |\n|---|-------------------------------|-------------------------------------------------------------------------|--------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------|\n| 1 | Lead with the ask             | The model reads top-down; putting the goal first stops it wandering.    | \\`Do X.[context]\\`                                                        | \"Summarize this PDF in 5 bullet points. The text is below: ...\"                                            |\n| 2 | Repeat the key ask at the end | Long contexts sometimes truncate; an end-cap protects you.              | \\`...[detail]...REMEMBER: Do X.\\`                                         | \"List pros & cons, keep it balanced. REMEMBER: 5 pros, 5 cons.\"                                             |\n| 3 | Specify output shape          | Dictating format cuts revision loops.                                   | \\`Return as: 1) short title, 2) table(CSV).\\`                             | \"Give 3 holiday ideas. Format: destination, flight-time-hrs, avg cost.\"                                    |\n| 4 | Use clear delimiters          | Backticks/headings/XML keep sections from blending.                     | \\`TEXT TO ANALYSE\\`                                                        | \"Rate the style of the text between the fences.\"                                                            |\n| 5 | Induce step-by-step thinking  | Planning first boosts multi-step accuracy.                              | \\`Think step - by - step then answer.\\`                                        | \"Solve this puzzle. Think step-by-step before giving the final move.\"                                      |\n| 6 | Ask it to plan its workflow   | For big jobs, AI outlines tasks before doing them.                      | \\`First draft a plan, wait, then execute.\\`                                | \"We're writing an e-book. ‚ù∂ Outline chapters. ‚ù∑ Wait. ‚ù∏ When I say 'go', draft chapter 1.\"              |\n| 7 | Limit or widen knowledge sources | Controls hallucination.                                               | \\`Use only the info below. / Combine basic knowledge + this context.\\`     | \"Using only the product sheet below, write FAQs.\"                                                          |\n| 8 | Guide information retrieval   | Helps AI pick the right docs before answering.                          | \\`List which docs look relevant, then answer.\\`                            | \"30 sales memos attached. 1) Name the 5 most relevant. 2) Summarise their common points.\"                 |\n| 9 | Show a style/example          | Anchors tone, length, vocabulary.                                       | \\`Match the style of: <example>\\`                                          | \"Review this gadget in the style of the sample below: 'Short, witty, 3 key facts...'\"                      |\n| 10| Set correction handles        | One-line fixes let you steer quickly.                                   | \\`If length > 150 words, shorten.\\`                                        | \"Describe blockchain to a child. If your answer is >150 words, cut it in half.\"                            |\n| 11| Tell it when to stop or loop  | Prevents half-finished lists or runaway essays.                         | \\`Keep going until you list 20 ideas, then stop.\\`                         | \"Brainstorm webinar titles. Give exactly 12, then finish.\"                                                  |\n| 12| Request the hidden reasoning  | Good for audits; otherwise omit to keep it short.                       | \\`After the answer, include a brief reasoning section.\\`                   | \"Which of these stocks looks over-valued? Answer first; add a 2-sentence rationale below a divider.\"        |\n`\n\nconst text = await getSelectedText()\n\nconst promptImprover = ai(prompt)\nmenu('Improving Prompt') // Changes the script kit icon in the system tray\nconst improvedPrompt = await promptImprover(text)\nmenu('') // Resets the script kit icon in the system tray\n\nawait setSelectedText(improvedPrompt)\n```\n\n#### ai summarize\n\n```ts\nconst summarize = ai('Summarize the following text in one sentence')\n\nconst summary = await summarize(\n  'The quick brown fox jumps over the lazy dog. The lazy dog was not impressed. The fox, feeling dejected, went home.'\n)\n\nawait div(\n  md(`\n## AI Text Summarization\n**Input:** The quick brown fox jumps over the lazy dog. The lazy dog was not impressed. The fox, feeling dejected, went home.\n\n**Summary:** ${summary}\n`)\n)\n```\n\n#### ai translate\n\n```ts\nconst translateToFrench = ai('Translate to French')\n\nconst frenchText = await translateToFrench('Hello, how are you today?')\n\nawait div(\n  md(`\n## AI Translation\n**English:** Hello, how are you today?\n\n**French:** ${frenchText}\n`)\n)\n```\n\n### assistant\n\nThe `assistant` helper creates an AI assistant that can maintain context and handle multi-turn conversations. You can add user and system messages, and stream responses to the UI.\n\n#### assistant example\n\n```ts\nconst downloadsPath = home('Downloads')\nconst files = await readdir(downloadsPath)\n\nconst jester = assistant('Tell a joke about these file names.')\njester.addUserMessage(files.join('\\n'))\n\nawait editor({\n  onInit: async () => {\n    for await (const chunk of jester.textStream) {\n      editor.append(chunk)\n    }\n  },\n})\n```\n\n#### assistant chat\n\n```ts\nconst chatbot = assistant('You are a helpful assistant')\n\nlet currentMessage = ''\nawait chat({\n  onSubmit: async input => {\n    currentMessage = ''\n    chatbot.stop()\n    chat.addMessage({\n      text: '...',\n      position: 'left',\n    })\n\n    chatbot.addUserMessage(input)\n\n    for await (const chunk of chatbot.textStream) {\n      currentMessage += chunk\n      const markdownMessage = md(currentMessage)\n      const messageIndex = (await chat.getMessages()).length - 1\n      chat.setMessage(messageIndex, {\n        text: markdownMessage,\n      })\n    }\n  },\n})\n```\n\n#### assistant streaming\n\n```ts\nconst ideaGenerator = assistant(\n  \"You're an idea generatior. Generate 3 extremely terse ideas based on my query\"\n)\nconst idea = await arg('Enter your idea')\nideaGenerator.addUserMessage(idea)\n\nconst remainingIterations = 3\n\nconst editorStreamer = async () => {\n  for await (const chunk of ideaGenerator.textStream) {\n    editor.append(chunk)\n  }\n  editor.append('\\n\\n')\n}\n\nawait editor({\n  onInit: async () => {\n    for (let i = 0; i < remainingIterations; i++) {\n      await editorStreamer()\n      ideaGenerator.addSystemMessage('Pick your favorite idea and generate 3 more based on it')\n    }\n  },\n})\n```\n\n#### assistant with tools\n\n```ts\n// Assistant with tools\nconst fakeWeatherAPI = ({ location }: { location: string }) => {\n  if (location === 'moon') return \"It's kinda dusty\"\n  return `The weather in ${location} is 70 and sunny.`\n}\n\nconst weatherTool = {\n  getWeather: {\n    description: 'Call this tool for any weather location in the Universe',\n    parameters: z.object({\n      location: z.string().describe('The location to get the weather for'),\n    }),\n    execute: async ({ location }: { location: string }) => {\n      console.log('Executing weather tool')\n      const weather = fakeWeatherAPI({ location })\n      return { weather }\n    },\n  },\n}\n\nconsole.log('Creating weather assistant')\nconst weatherAssistant = assistant(\n  \"You are a helpful weather assistant. Use the provided tools to answer the user's questions.\",\n  { tools: weatherTool }\n)\n\nweatherAssistant.addUserMessage(\"What's the weather on the moon?\")\nconst result = await weatherAssistant.generate()\n\nconsole.log('Generating weather assistant')\nlet response = ''\nif ('text' in result) {\n  response = result.text\n} else {\n  toast('No text response')\n  await editor(JSON.stringify(result, null, 2))\n  exit()\n}\n\nawait div(\n  md(`\n## Assistant with Tools\n**User:** What's the weather on the moon?\n**Assistant:** ${response}\n`)\n)\n```\n\n### generate\n\nThe `generate` helper allows you to generate structured data from text using a schema (such as a Zod schema). This is useful for extracting information, performing analysis, or ensuring the output matches a specific format.\n\n#### generate example\n\n```ts\nconst result = await generate(\n  'Generate 10 random users as an array in a property called \"users\"',\n  z.object({\n    users: z.array(\n      z.object({\n        firstName: z.string(),\n        lastName: z.string(),\n        age: z.number(),\n        email: z.string().email(),\n      })\n    ),\n  })\n)\nconst users = result.users\n\nawait editor(JSON.stringify(users, null, 2))\n```\n\n#### generate extract data from text\n\n```ts\nconst userSchema = z.object({\n  name: z.string(),\n  age: z.number().optional(),\n  email: z.string().email().optional(),\n})\n\nconst extractUserInfo = async (text: string) => {\n  return generate(`Extract user information from the text: ${text}`, userSchema)\n}\n\nconst userInfo = await extractUserInfo(\n  'My name is John Doe. I am 30 years old. You can reach me at john.doe@example.com'\n)\n\nawait div(\n  md(`\n## User Info Extraction\n**Text:** My name is John Doe. I am 30 years old. You can reach me at john.doe@example.com\n**Result:**\n\\`\\`\\`json\n${JSON.stringify(userInfo, null, 2)}\n\\`\\`\\`\n`)\n)\n```\n\n#### generate extract sentiment\n\n```ts\nconst sentimentSchema = z.object({\n  sentiment: z.enum(['positive', 'negative', 'neutral']),\n  confidence: z.number().min(0).max(1),\n  keywords: z.array(z.string()).describe('Keywords that contributed to the sentiment'),\n})\n\nconst extractSentiment = async (text: string) => {\n  return generate(`Extract sentiment from the following text: ${text}`, sentimentSchema)\n}\n\nconst sentimentResult = await extractSentiment(\"I love Script Kit! It's so easy to use.\")\n\nawait div(\n  md(`\n## Sentiment Analysis\n**Text:** I love Script Kit! It's so easy to use.\n**Result:**\n\\`\\`\\`json\n${JSON.stringify(sentimentResult, null, 2)}\n\\`\\`\\`\n`)\n)\n```\n\n#### generate structured data\n\n```ts\n// Global Generate Function Example\n// This script demonstrates structured object generation using the global generate() function\n\n// Define a schema for extracting contact information\nconst contactSchema = z.object({\n  name: z.string().describe(\"Person's full name\"),\n  email: z.string().email().describe('Email address'),\n  phone: z.string().optional().describe('Phone number if mentioned'),\n  company: z.string().optional().describe('Company or organization'),\n  role: z.string().optional().describe('Job title or role'),\n  interests: z.array(z.string()).describe('Professional interests or expertise areas'),\n  priority: z.enum(['low', 'medium', 'high']).describe('Priority level for follow-up'),\n})\n\nconst contact = await generate('The coolest person in the world', contactSchema)\n\n// Display the structured result\nawait div(\n  md(`\n# Contact Information Extracted\n\n**Name:** ${contact.name}\n\n**Email:** ${contact.email}\n\n**Phone:** ${contact.phone || 'Not provided'}\n\n**Company:** ${contact.company || 'Not provided'}\n\n**Role:** ${contact.role || 'Not provided'}\n\n**Priority:** ${contact.priority}\n\n**Interests:**\n${\n  contact.interests.length > 0\n    ? contact.interests.map(interest => `- ${interest}`).join('\\n')\n    : '- None specified'\n}\n\n      ---\n\n* Generated using the global \\`generate()\\` function with Zod schema validation*\n`)\n)\n```\n\n#### generate tips\n\n````ts\nimport { Script } from '@johnlindquist/kit'\n\nlet scripts = await getScripts()\n\n// Check if kit-docs is a kenv\n\nlet kenv = path.basename(projectPath())\nlet isKitDocsInAKenv = kenv !== '.kenv'\nlet outFilePath = projectPath('TIPS.md')\n\nif (isKitDocsInAKenv) {\n  scripts = scripts.filter(script => script.kenv === kenv)\n}\n\nscripts.sort((a, b) => a.group.localeCompare(b.group))\n\n// Group by group\nlet groups: {\n  [key: string]: Script[]\n} = {}\nfor (let script of scripts) {\n  if (!groups[script.group]) groups[script.group] = []\n  groups[script.group].push(script)\n}\n\n// Convert Groups into Markdown h2's with the Content Below\nlet markdownBody = ``\nfor (let [group, scripts] of Object.entries(groups)) {\n  markdownBody += `## ${group}\\n\\n`\n  for (let script of scripts.sort((a, b) => a.name.localeCompare(b.name))) {\n    let content = await readFile(script.filePath, 'utf8')\n    markdownBody += `### ${script.name}\\n\\n`\n    markdownBody += '```ts\\n'\n    markdownBody += content\n    markdownBody += '\\n```\\n\\n'\n  }\n}\n\nlet markdown = `# Tips\n\nTips are a collection of answers to user questions in GitHub Discussions and our Discord organized by topic.\n\n${markdownBody}\n`.trim()\n\nawait writeFile(outFilePath, markdown)\n````\n\n### Switching AI Providers\n\nScript Kit supports multiple AI providers out of the box: `openai`, `anthropic`, `google`, `xai`, and `openrouter`.\n\nYou can switch between providers by passing a model string in the format `provider:model-id` to the `model` option.\n\n```ts\nconst result = await ai('Say hello', { model: 'anthropic:claude-3-opus-20240229' })\n```\n\nThis will use Anthropic's Claude 3 Opus model. Supported providers are:\n\n- `openai`\n- `anthropic`\n- `google`\n- `xai`\n- `openrouter`\n\n#### ai provider switcher\n\n```ts\nconst providers = [\n  { name: 'OpenAI', value: 'openai', models: ['gpt-4o', 'gpt-4-turbo', 'gpt-3.5-turbo'] },\n  {\n    name: 'Anthropic',\n    value: 'anthropic',\n    models: ['claude-3-opus-20240229', 'claude-3-sonnet-20240229', 'claude-3-haiku-20240307'],\n  },\n  { name: 'Google', value: 'google', models: ['gemini-1.5-pro-latest', 'gemini-1.0-pro'] },\n  { name: 'xAI (Grok)', value: 'xai', models: ['grok-1'] },\n  {\n    name: 'OpenRouter',\n    value: 'openrouter',\n    models: ['openrouter/cognitive-compute', 'openrouter/other-model'],\n  },\n]\n\nconst provider = await arg(\n  'Select AI Provider',\n  providers.map(p => ({ name: p.name, value: p.value }))\n)\nconst selectedProvider = providers.find(p => p.value === provider)!\nconst model = await arg('Select Model', selectedProvider.models)\nconst prompt = await arg('Enter your prompt')\n\nconst modelString = `${provider}:${model}`\n\nconst result = await ai(prompt, { model: modelString })\n\nawait div(\n  md(`\n### Provider: ${selectedProvider.name}\n\n### Model: ${model}\n\n**Prompt:**\n\n> $Create a simple hello world script\n\n**Result:**\n\n> ${result}\n`)\n)\n```\n\n## Prompts\n\n### arg\n\n- Accept text input from the user.\n- Optionally provide a list of choices filtered by the text input.\n- Optionally provide a list of actions to trigger when the user presses a shortcut.\n\n1. The first argument is a string or a prompt configuration object.\n2. The second argument is a list of choices, a string to render, or a function that returns choices or a string to render.\n\n#### arg example\n\n```ts\nlet value = await arg()\n```\n\n#### arg basic string input\n\n```ts\nlet name = await arg('Enter your name')\n```\n\n#### arg onblur\n\n```ts\nawait arg({\n  // Prevent the \"arg\" prompt from closing when blurred\n  // (or implement a custom behavior)\n  onBlur: () => {},\n})\n```\n\n#### arg with async choices object\n\n```ts\nlet person = await arg('Select a person', async () => {\n  let response = await get('https://swapi.dev/api/people/')\n  // return an array of objects with \"name\", \"value\", and \"description\" properties\n  return response?.data?.results.map(person => {\n    return {\n      name: person.name,\n      description: person.url,\n      value: person,\n    }\n  })\n})\n```\n\n#### arg with async choices\n\n```ts\nlet name = await arg('Select a name', async () => {\n  let response = await get('https://swapi.dev/api/people/')\n  return response?.data?.results.map(p => p.name)\n})\n```\n\n#### arg with choices array\n\n```ts\nlet name = await arg('Select a name', ['John', 'Mindy', 'Joy'])\n```\n\n#### arg with generated choices\n\n```ts\nlet char = await arg('Type then pick a char', input => {\n  // return an array of strings\n  return input.split('')\n})\n```\n\n#### arg with shortcuts\n\n```ts\nlet url = 'https://swapi.dev/api/people'\nlet name = await arg(\n  {\n    placeholder: 'Select a name',\n    shortcuts: [\n      {\n        name: 'Explore API',\n        key: 'cmd+e',\n        onPress: async () => {\n          open(url)\n        },\n        bar: 'right',\n      },\n    ],\n  },\n  async () => {\n    let response = await get(url)\n    return response?.data?.results.map(p => p.name)\n  }\n)\n```\n\n### mini\n\nSame API as `arg`, but with a compact format.\n\n#### mini example\n\n```ts\nlet name = await mini('Enter your name')\n```\n\n### micro\n\nSame API as `arg`, but with a tiny, adorable UI.\n\n#### micro example\n\n```ts\nlet name = await micro('Enter your name')\n```\n\n### env\n\nLoad an env var if it exists, prompt to set the env var if not:\n\nYou can also prompt the user to set the env var using a prompt by nesting it in an async function:\n\n#### env example\n\n```ts\n// Write write \"MY_ENV_VAR\" to ~/.kenv/.env\nlet MY_ENV_VAR = await env('MY_ENV_VAR')\n```\n\n#### env example with prompt\n\n```ts\n// Prompt the user to select from a path\nlet OUTPUT_DIR = await env('OUTPUT_DIR', async () => {\n  return await path({\n    hint: `Select the output directory`,\n  })\n})\n```\n\n### editor\n\nThe `editor` function opens a text editor with the given text. The editor is a full-featured \"Monaco\" editor with syntax highlighting, find/replace, and more. The editor is a great way to edit or update text to write a file. The default language is markdown.\n\n#### editor example\n\n```ts\nlet content = await editor()\n```\n\n#### editor load remote text content\n\n```ts\nlet response = await get(`https://raw.githubusercontent.com/johnlindquist/kit/main/API.md`)\n\nlet content = await editor(response.data)\n```\n\n#### editor with initial content\n\n```ts\nlet content = await editor('Hello world!')\n```\n\n### div\n\n`div` displays HTML. Pass a string of HTML to `div` to render it. `div` is commonly used in conjunction with `md` to render markdown.\n\n1. Just like arg, the first argument is a string or a prompt configuration object.\n2. Optional:The second argument is a string of tailwind class to apply to the container, e.g., `bg-white p-4`.\n\n#### div example\n\n```ts\nawait div(`Hello world!`)\n```\n\n#### div with markdown\n\n```ts\nawait div(\n  md(`\n# example!\n\n### Thanks for coming to my demo\n* This is a list\n* This is another item\n* This is the last item\n\n`)\n)\n```\n\n#### div with submit links\n\n```ts\nlet name = await div(\n  md(`# Pick a Name\n* [John](submit:John)\n* [Mindy](submit:Mindy)\n* [Joy](submit:Joy)\n`)\n)\n\nawait div(md(`# You selected ${name}`))\n```\n\n#### div with tailwind classes\n\n```ts\nawait div(`Hello world!`, `bg-white text-black text-4xl p-4`)\n```\n\n### term\n\nThe `term` function opens a terminal window. The terminal is a full-featured terminal, but only intended for running commands and CLI tools that require user input. `term` is not suitable for long-running processes (try `exec` instead).\n\n1. Optional: the first argument is a command to run with the terminal\n\n#### term example\n\n```ts\nawait term(`cd ~/.kenv/scripts && ls`)\n```\n\n#### term with command\n\n```ts\nawait term(`cd ~/.kenv/scripts && ls`)\n```\n\n### template\n\nThe `template` prompt will present the editor populated by your template. You can then tab through each variable in your template and edit it.\n\n1. The first argument is a string template. Add variables using $1, $2, etc. You can also use\n\n[//]: # '${1:default value} to set a default value.)'\n\n#### template example\n\n```ts\nlet text = await template(`Hello $1!`)\n```\n\n#### template standard usage\n\n```ts\nlet text = await template(`\nDear \\${1:name},\n\nPlease meet me at \\${2:address}\n\n    Sincerely, John`)\n```\n\n### hotkey\n\nThe `hotkey` prompt allows you to press modifier keys, then submits once you've pressed a non-monodifier key. For example, press `command` then `e` to submit key info about the `command` and `e` keys:\n\n```json\n{\n  \"key\": \"e\",\n  \"command\": true,\n  \"shift\": false,\n  \"option\": false,\n  \"control\": false,\n  \"fn\": false,\n  \"hyper\": false,\n  \"os\": false,\n  \"super\": false,\n  \"win\": false,\n  \"shortcut\": \"command e\",\n  \"keyCode\": \"KeyE\"\n}\n```\n\nThis can be useful when you want to use a palette of commands and trigger each of them by switching on a hotkey.\n\n1. Optional: The first argument is a string to display in the prompt.\n\n#### hotkey example\n\n```ts\nlet keyInfo = await hotkey()\nawait editor(JSON.stringify(keyInfo, null, 2))\n```\n\n### drop\n\nUse `await drop()` to prompt the user to drop a file or folder.\n\n#### drop example\n\n```ts\n// Dropping text or an image from the browser returns a string\nlet fileInfos = await drop()\n\nlet filePaths = fileInfos.map(f => f.path).join(',')\n\nawait div(md(filePaths))\n```\n\n### fields\n\nThe `fields` prompt allows you to rapidly create a form with fields.\n\n1. An array of labels or objects with label and field properties.\n\n#### fields example\n\n```ts\nlet [first, last] = await fields(['First name', 'Last name'])\n```\n\n#### fields edit the keys and values of an object\n\n```ts\nlet data = {\n  name: 'John',\n  age: 42,\n  location: 'USA',\n}\n\nlet result = await fields(\n  Object.entries(data).map(([key, value]) => ({\n    name: key,\n    label: key,\n    value: String(value),\n  }))\n)\n\nlet newData = Object.entries(data).map(([key], i) => ({\n  [key]: result[i],\n}))\n\ninspect(newData)\n```\n\n#### fields with field properties\n\n```ts\nlet [name, age] = await fields([\n  {\n    name: 'name',\n    label: 'Name',\n    type: 'text',\n    placeholder: 'John',\n  },\n  {\n    name: 'age',\n    label: 'Age',\n    type: 'number',\n    placeholder: '40',\n  },\n])\n```\n\n### form\n\nUse an HTML form which returns an Object based on the names of the form fields.\n\n#### form example\n\n```ts\nlet result = await form(`\n<div class=\"p-4\">\n    <input type=\"text\" name=\"textInput\" placeholder=\"Text Input\" />\n    <input type=\"password\" name=\"passwordInput\" placeholder=\"Password\" />\n    <input type=\"email\" name=\"emailInput\" placeholder=\"Email\" />\n    <input type=\"number\" name=\"numberInput\" placeholder=\"Number\" />\n    <input type=\"date\" name=\"dateInput\" placeholder=\"Date\" />\n    <input type=\"time\" name=\"timeInput\" placeholder=\"Time\" />\n    <input type=\"datetime-local\" name=\"dateTimeInput\" placeholder=\"Date and Time\" />\n    <input type=\"month\" name=\"monthInput\" placeholder=\"Month\" />\n    <input type=\"week\" name=\"weekInput\" placeholder=\"Week\" />\n    <input type=\"url\" name=\"urlInput\" placeholder=\"URL\" />\n    <input type=\"search\" name=\"searchInput\" placeholder=\"Search\" />\n    <input type=\"tel\" name=\"telInput\" placeholder=\"Telephone\" />\n    <input type=\"color\" name=\"colorInput\" placeholder=\"Color\" />\n    <textarea name=\"textareaInput\" placeholder=\"Textarea\"></textarea>\n</div>\n`)\n\ninspect(result)\n```\n\n### chat\n\nA chat prompt. Use `chat.addMessage()` to insert messages into the chat.\n\n> Note: Manually invoke `submit` inside of a shortcut/action/etc to end the chat.\n\nAlso see the included \"chatgpt\" example for a much more advanced scenario.\n\n#### chat example\n\n```ts\nawait chat({\n  onInit: async () => {\n    chat.addMessage({\n      // Note: text and position are implemented, there are other properties that are a WIP\n      text: 'You like Script Kit',\n      position: 'left',\n    })\n\n    await wait(1000)\n\n    chat.addMessage({\n      text: \"Yeah! It's awesome!\",\n      position: 'right',\n    })\n\n    await wait(1000)\n\n    chat.addMessage({\n      text: 'I know, right?!?',\n      position: 'left',\n    })\n\n    await wait(1000)\n\n    chat.addMessage({\n      text: `<img src=\"https://media0.giphy.com/media/yeE6B8nEKcTMWWvBzD/giphy.gif?cid=0b9ef2f49arnbs4aajuycirjsclpbtimvib6a76g7afizgr5&ep=v1_gifs_search&rid=giphy.gif\" width=\"200px\" />`,\n      position: 'right',\n    })\n  },\n})\n```\n\n### selectFile\n\nPrompt the user to select a file using the Finder dialog:\n\n#### selectFile example\n\n```ts\nlet filePromptMessage = 'Select a file to upload'\nlet filePath = await selectFile(filePromptMessage)\nlet text = await readFile(filePath, 'utf8')\nlet gist = await createGist(text)\n```\n\n### selectFolder\n\nPrompt the user to select a folder using the Finder dialog:\n\n#### selectFolder example\n\n```ts\nlet promptMessage = 'Select a folder for your project'\nlet folderPath = await selectFolder(promptMessage)\n\nlet files = await readdir(folderPath)\n\nawait editor(files.join('\\n'))\n```\n\n### path\n\nThe `path` prompt allows you to select a file or folder from the file system. You navigate with tab/shift+tab (or right/left arrows) and enter to select.\n\n1. Optional: The first argument is the initial directory to open with. Defaults to the home directory.\n\n#### path example\n\n```ts\nlet selectedFile = await path()\n```\n\n#### path example startpath\n\n```ts\nconst projectPath = await path({\n  startPath: home('dev'),\n  hint: 'Select a project from your dev folder',\n})\n\nawait editor(projectPath)\n```\n\n### select\n\n`select` lets you choose from a list of options.\n\n1. The first argument is a array or a prompt configuration object.\n2. The second argument is a list of choices, a array to render, or a function that returns choices or a string to render.\n\n#### select example\n\n```ts\n// Return an array of selected items\nconst multipleChoice = await select('Select one or more developer', [\n  'John',\n  'Nghia',\n  'Mindy',\n  'Joy',\n])\n\nawait editor(JSON.stringify(multipleChoice, null, 2))\n```\n\n#### select a choice with a single keystroke\n\n```ts\nlet choice = await arg({\n  placeholder: 'Choose a color',\n  choices: [\n    { name: '[R]ed', value: 'red' },\n    { name: '[G]reen', value: 'green' },\n    { name: '[B]lue', value: 'blue' },\n  ],\n})\n\nawait div(md(`You chose ${choice}`))\n```\n\n#### select array object\n\n```ts\nconst people = [\n  {\n    name: 'John',\n    description: 'Full-stack Dev',\n    value: 'John',\n  },\n  {\n    name: 'Nghia',\n    description: 'Full-stackoverflow dev',\n    value: 'Nghia',\n  },\n  {\n    name: 'Mindy',\n    description: 'Business Analyst',\n    value: 'Mindy',\n  },\n  {\n    name: 'Joy',\n    description: 'Leader',\n    value: 'Joy',\n  },\n]\nlet multipleChoice = await select('Select one or more developer', people)\n```\n\n#### select async choices array object\n\n```ts\nlet name = await select('GET: NAME (please wait)', async () => {\n  let response = await get('https://swapi.dev/api/people/')\n  return response?.data?.results.map(person => {\n    return {\n      name: person.name,\n      description: `height: ${person.height}, mass: ${person.mass}`,\n      value: person,\n      preview: () => JSON.stringify(person),\n    }\n  })\n})\n```\n\n#### select basic array input\n\n```ts\nlet multipleChoice = await select('Select one or more developer', ['John', 'Nghia', 'Mindy', 'Joy'])\n```\n\n#### select generated input choices\n\n```ts\nlet word = await select('Type then pick a words', input => {\n  return input.trim().split(new RegExp('[.,;/-_\\n]', 'g'))\n})\n```\n\n### inspect\n\n`inspect` takes an object and writes out a text file you can use to read/copy/paste the values from:\n\n> Note: It will automatically convert objects to JSON to display them in the file\n\n#### inspect example\n\n```ts\nlet response = await get('https://swapi.dev/api/people/1/')\nawait inspect(response.data)\n```\n\n### dev\n\n`dev` Opens a standalone instance of Chrome Dev Tools so you can play with JavaScript in the console. Passing in an object will set the variable `x` to your object in the console making it easy to inspect.\n\n1. Optional: the first argument is an object to set to the variable `x` to in the console.\n\n#### dev example\n\n```ts\ndev()\n```\n\n#### dev with object\n\n```ts\ndev({\n  name: 'John',\n  age: 40,\n})\n```\n\n### find\n\nA file search prompt\n\n#### find example\n\n```ts\nlet filePath = await find('Search in the Downloads directory', {\n  onlyin: home('Downloads'),\n})\n\nawait revealFile(filePath)\n```\n\n### webcam\n\nPrompt for webcam access. Press enter to capture an image buffer:\n\n#### webcam example\n\n```ts\nlet buffer = await webcam()\nlet imagePath = tmpPath('image.jpg')\nawait writeFile(imagePath, buffer)\nawait revealFile(imagePath)\n```\n\n### mic\n\nRecord from the mic, get a buffer back\n\n#### mic example\n\n```ts\nconst tmpMicPath = tmpPath('mic.webm')\n\nconst buffer = await mic()\n\nawait writeFile(tmpMicPath, buffer)\nawait playAudioFile(tmpMicPath)\n```\n\n### eyeDropper\n\nGrab a color from your desktop\n\n> Note: Behaves best on Mac. Windows _might_ be locked to only the Script Kit app prompt.\n\n```\n{\n    \"sRGBHex\": \"#e092d9\",\n    \"rgb\": \"rgb(224, 146, 217)\",\n    \"rgba\": \"rgba(224, 146, 217, 1)\",\n    \"hsl\": \"hsl(305, 56%, 73%)\",\n    \"hsla\": \"hsla(305, 56%, 73%, 1)\",\n    \"cmyk\": \"cmyk(0%, 35%, 3%, 12%)\"\n  }\n```\n\n#### eyeDropper example\n\n```ts\nconst result = await eyeDropper()\nawait editor(JSON.stringify(result, null, 2))\n```\n\n## Choices\n\n### formatChoices\n\nFormats an array of choices.\n\n- If a choice is not an object, it is converted to a basic choice object.\n- If a choice has a nested `choices` array (i.e. represents a group), then:\n  1.  The group header is formatted (its `group` property is preserved if already set, or defaulted to its name).\n  2.  Its sub-choices are formatted in their original order.\n  3.  After processing the sub‚Äëchoices, any items with an `index` property are re‚Äëinserted at the appropriate positions.\n- For top‚Äëlevel non-group items, if every item is non‚Äëgroup, then we re‚Äëinsert the indexed items in the final array.\n\nParameters:\n\n- `choices`: An array of choices or simple values\n- `className`: An optional default className\n\nReturns the formatted array of choices.\n\n## Advanced\n\n### Actions (cmd+k)\n\nActions are available on all prompts. Actions allow you to insert custom behaviors outside of the normal flow of the script:\n\n#### arg actions example\n\n```ts\nconst result = await arg(\n  'What is your name?',\n  ['John', 'Mindy', 'Ben'],\n  //   Define an Array of Actions\n  [\n    {\n      name: 'Submit Joy',\n      shortcut: `${cmd}+j`,\n      onAction: () => {\n        submit('Joy')\n      },\n    },\n  ]\n)\n\nawait editor(JSON.stringify(result, null, 2))\n```\n\n#### div actions example\n\n```ts\nconst html = md(`# Hello World`)\nawait div(html, [\n  {\n    name: 'Goodbye',\n    onAction: () => {\n      setDiv('Goodbye')\n    },\n  },\n])\n```\n\n#### editor actions example\n\n```ts\nawait editor('Hello World', [\n  {\n    name: 'Exclaim',\n    shortcut: `${cmd}+2`,\n    visible: true, // show the action in the shortcuts bar\n    onAction: () => {\n      editor.append('!')\n    },\n  },\n  {\n    name: 'Clear',\n    shortcut: `${cmd}+`,\n    visible: true, // show the action in the shortcuts bar\n    onAction: () => {\n      editor.setText('')\n    },\n  },\n])\n```\n\n### flag\n\nA flag is almost exclusively used for the CLI, rarely with a prompt. When using a CLI script:\n\n```bash\nmy-script --debug --exclude \"*.md\"\n```\n\nThe flags in your script will be set as:\n\n```ts\nflag.debug = true\nflag.exclude = '*.md'\n```\n\n#### flag example\n\n```ts\n// This concept is replaced by \"Actions\", but you will see it in older/legacy scripts\nconst result = await arg({\n  placeholder: 'What is your name?',\n  flags: {\n    post: {\n      // This will submit the prompt with the \"post\" flag\n      shortcut: `${cmd}+p`,\n    },\n    put: {\n      // This will submit the prompt with the \"put\" flag\n      shortcut: `${cmd}+u`,\n    },\n    delete: {\n      // This will submit the prompt with the \"delete\" flag\n      shortcut: `${cmd}+d`,\n    },\n  },\n})\n\nawait editor(\n  JSON.stringify(\n    {\n      result,\n      flag: global.flag, // Inspect which flag was used when submitting\n    },\n    null,\n    2\n  )\n)\n```\n\n### css\n\nYou can inject css into any prompt to override styles\n\n#### div css example\n\n```ts\nawait div({\n  html: md(`# Hello World\n    \n<p style=\"color: red;\">This is a note</p>\n    `),\n  css: `\n  body{\n    background-color: white !important;\n  }\n\n  h1{\n    color: blue !important;\n  }\n    `,\n})\n```\n\n### onTab\n\nonTab allows you to build a menu where prompts are organized under a tab. Press Tab/Shift+Tab to navigate between prompts.\n\n#### onTab example\n\n```ts\nonTab('People', async event => {\n  await arg('Select a person', ['John', 'Mindy', 'Ben'])\n})\n\nonTab('Animals', async event => {\n  await arg('Select an animal', ['Dog', 'Cat', 'Bird'])\n})\n```\n\n### openActions\n\nManually open the actions menu\n\n## Alerts\n\n### beep\n\nBeep the system speaker:\n\n#### beep example\n\n```ts\nawait beep()\n```\n\n### say\n\nSay something using the built-in text-to-speech:\n\n#### say example\n\n```ts\nawait say('Done!')\n```\n\n### notify\n\nSend a system notification\n\n> Note: osx notifications require permissions for \"Terminal Notifier\" in the system preferences. Due to the complicated nature of configuring notifications, please use a search engine to find the latest instructions for your osx version.\n> In the Script Kit menu bar icon: \"Permissions -> Request Notification Permissions\" might help.\n\n#### notify example\n\n```ts\nawait notify('Attention!')\n```\n\n#### notify example body\n\n```ts\nawait notify({\n  title: 'Title text goes here',\n  body: 'Body text goes here',\n})\n```\n\n## System\n\n### setSelectedText\n\nPaste text into the focused app. Literally triggers a \"cmd/ctrl+v\", so expect a similar behavior.\n\n#### setSelectedText example\n\n```ts\nawait setSelectedText('Hello from Script Kit!')\n```\n\n## getSelectedText\n\nGrab text from the focused app. Literally triggers a \"cmd?ctrl+c\", so expect a similar behavior.\n\n### clipboard\n\nRead and write to the system clipboard\n\n#### clipboard example\n\n```ts\n// Write and read text to the clipboard\nawait clipboard.writeText('Hello from Script Kit!')\nconst result = await clipboard.readText()\nawait editor(result)\n```\n\n#### clipboard example image\n\n```ts\nconst iconPath = kitPath('images', 'icon.png')\nconst imageBuffer = await readFile(iconPath)\n\n// Write and read image buffers to the clipboard\nawait clipboard.writeImage(imageBuffer)\nconst resultBuffer = await clipboard.readImage()\n\nconst outputPath = home('Downloads', 'icon-copy.png')\nawait writeFile(outputPath, resultBuffer)\nawait revealFile(outputPath)\n```\n\n### copy\n\nCopy a string to the clipboard. A simple alias for \"clipboard.writeText()\"\n\n### paste\n\nGrab a string from the clipboard into the script. A simple alias for \"clipboard.readText()\"\n\n> Note: This is often confused with `setSelectedText` which pastes a string where your text cursor is.\n\n### mouse\n\n> Note: Please use with caution\n\nmove and click the system mouse\n\n#### mouse example\n\n```ts\nawait mouse.move([\n  { x: 100, y: 100 },\n  { x: 200, y: 200 },\n])\nawait mouse.leftClick()\nawait wait(100)\nawait mouse.rightClick()\nawait wait(100)\nawait mouse.setPosition({ x: 1000, y: 1000 })\n```\n\n### keyboard\n\n> Note: Please use with caution\n\nType and/or tap keys on your keyboard\n\n#### keyboard example\n\n```ts\nprompt: false, // 99% of the time you'll want to hide the prompt\n};\nawait keyboard.type(\"Hello, world!\");\n```\n\n#### keyboard example keys\n\n```ts\nprompt: false,\n};\n\nawait keyboard.tap(Key.LeftSuper, Key.A);\nawait wait(100);\nawait keyboard.tap(Key.LeftSuper, Key.C);\nawait wait(100);\nawait keyboard.tap(Key.LeftSuper, Key.N);\nawait wait(100);\nawait keyboard.tap(Key.LeftSuper, Key.V);\n```\n\n## Widget\n\n### widget\n\nA `widget` creates a new window using HTML. The HTML can be styled via [Tailwind CSS](https://tailwindcss.com/docs/utility-first) class names.\nTemplating and interactivity can be added via [petite-vue](https://github.com/vuejs/petite-vue).\n\n1. The first argument is a string of HTML to render in the window.\n2. Optional: the second argument is [\"Browser Window Options\"](https://www.electronjs.org/docs/latest/api/browser-window#new-browserwindowoptions)\n\n#### widget example\n\n```ts\nawait widget(`<h1 class=\"p-4 text-4xl\">Hello World!</h1>`)\n```\n\n#### widget clock\n\n```ts\nlet clock = await widget(`<h1 class=\"text-7xl p-5 whitespace-nowrap\">{{date}}</h1>`, {\n  transparent: true,\n  draggable: true,\n  hasShadow: false,\n  alwaysOnTop: true,\n})\n\nsetInterval(() => {\n  clock.setState({\n    date: new Date().toLocaleTimeString(),\n  })\n}, 1000)\n```\n\n#### widget events\n\n```ts\nlet text = ''\nlet count = 0\n\nlet w = await widget(`\n<div class=\"p-5\">\n    <h1>Widget Events</h1>\n    <input autofocus type=\"text\" class=\"border dark:bg-black\"/>\n    <button id=\"myButton\" class=\"border px-2 py-1\">+</button>\n    <span>{{count}}</span>    \n</div>\n`)\n\nw.onClick(event => {\n  if (event.targetId === 'myButton') {\n    w.setState({ count: count++ })\n  }\n})\n\nw.onClose(async () => {\n  await widget(`\n<div class=\"p-5\">\n    <h1>You closed the other widget</h1>\n    <p>${text}</p>\n</div>\n`)\n})\n\nw.onInput(event => {\n  text = event.value\n})\n\nw.onMoved(({ x, y }) => {\n  // e.g., save position\n})\n\nw.onResized(({ width, height }) => {\n  // e.g., save size\n})\n```\n\n## Vite\n\n### vite\n\nA `vite` generates a vite project and opens it in its own window.\n\n1. The first argument is the name of the folder you want generated in ~/.kenv/vite/your-folder\n2. Optional: the second argument is [\"Browser Window Options\"](https://www.electronjs.org/docs/latest/api/browser-window#new-browserwindowoptions)\n\n#### vite example\n\n```ts\nconst { workArea } = await getActiveScreen()\n\n// Generates/opens a vite project in ~/.kenv/vite/project-path\nconst viteWidget = await vite('project-path', {\n  x: workArea.x + 100,\n  y: workArea.y + 100,\n  width: 640,\n  height: 480,\n})\n\n// In your ~/.kenv/vite/project-path/src/App.tsx (if you picked React)\n// use the \"send\" api to send messages. \"send\" is injected on the window object\n// <input type=\"text\" onInput={(e) => send(\"input\", e.target.value)} />\n\nconst filePath = home('vite-example.txt')\nviteWidget.on(\n  'input',\n  debounce(async input => {\n    await writeFile(filePath, input)\n  }, 1000)\n)\n```\n\n## Commands\n\n### exec\n\n`exec` uses allows you to run shell commands within your script:\n\n> Note: Execa is an alias for `execaCommand` from the `execa` npm package with \"shell\" and \"all\" true by default.\n\n#### exec example\n\n```ts\nlet result = await exec(`ls -la`, {\n  cwd: home(), // where to run the command\n  shell: '/bin/zsh', // if you're expecting to use specific shell features/configs\n  all: true, // pipe both stdout and stderr to \"all\"\n})\n\ninspect(result.all)\n```\n\n#### exec with prompt info\n\n```ts\n// It's extremely common to show the user what's happening while your command is running. This is often done by using `div` with `onInit` + `sumbit`:\nlet result = await div({\n  html: md(`# Loading your home directory`),\n  onInit: async () => {\n    let result = await exec(`sleep 2 && ls -la`, {\n      cwd: home(), // where to run the command\n      shell: '/bin/zsh', // use if you're expecting the command to load in your .zshrc\n      all: true, // pipe both stdout and stderr to \"all\"\n    })\n\n    submit(result.all)\n  },\n})\n```\n\n## Pro APIs\n\n### term\n\nOpens a built-in Terminal window.\n\n- Can run interactive commands\n- Supports custom working directory and shell\n\n#### term example\n\n```ts\nawait term(`cd ~/.kenv/scripts && ls`)\n```\n\n#### term with command\n\n```ts\nawait term(`cd ~/.kenv/scripts && ls`)\n```\n\n### showLogWindow\n\nOpens a logs window to display script output.\n\n- Displays output from all scripts run in the current session\n\n#### showLogWindow example\n\n```ts\nawait showLogWindow()\n```\n\n## Platform APIs\n\n### scatterWindows\n\nEvenly spaces out all open windows across the screen in a neat grid.\n\n- Only tested on macOS.\n- May require accessibility permissions if it's moving windows across multiple monitors.\n\n#### scatterWindows example\n\n```ts\nawait scatterWindows()\n```\n\n### focusKitWindow\n\nBrings the Script Kit window into focus.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### focusKitWindow example\n\n```ts\nawait focusKitWindow()\n```\n\n### attemptScriptFocus\n\nAttempts to bring the Script Kit window into focus.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### attemptScriptFocus example\n\n```ts\nawait attemptScriptFocus()\n```\n\n### getKitWindows\n\nRetrieves the Script Kit window objects.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### getKitWindows example\n\n```ts\nlet windows = await getKitWindows()\n```\n\n### focusWindow\n\nBrings a specific window into focus.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### focusWindow example\n\n```ts\nawait focusWindow(12345)\n```\n\n### focusAppWindow\n\nBrings a specific application window into focus.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### focusAppWindow example\n\n```ts\nawait focusAppWindow('Google Chrome', 'Script Kit - Google Chrome')\n```\n\n### setWindowPosition\n\nSets the position of a specific window.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### setWindowPosition example\n\n```ts\nawait setWindowPosition(12345, 100, 200)\n```\n\n### setWindowPositionByIndex\n\nSets the position of a window based on its index.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### setWindowPositionByIndex example\n\n```ts\nawait setWindowPositionByIndex(0, 100, 200)\n```\n\n### scatterWindows\n\nEvenly spaces out all open windows across the screen in a neat grid.\n\n- Only tested on macOS.\n- May require accessibility permissions if it's moving windows across multiple monitors.\n\n#### scatterWindows example\n\n```ts\nawait scatterWindows()\n```\n\n### organizeWindows\n\nOrganizes windows in a specific way.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### organizeWindows example\n\n```ts\nawait organizeWindows({\n  direction?: \"horizontal\" | \"vertical\",\n  padding?: number,\n  ...\n}): Promise<string>\n```\n\n### tileWindow\n\nTiles a specific window.\n\n- Only tested on macOS.\n- May require accessibility permissions.\n\n#### tileWindow example\n\n```ts\nawait tileWindow(12345, {\n  direction: 'horizontal',\n  padding: 10,\n})\n```\n\n### scrapeSelector\n\nScrapes a webpage using a CSS selector.\n\n#### scrapeSelector example\n\n```ts\nlet text = await scrapeSelector('https://example.com', '#main-content')\n```\n\n### scrapeAttribute\n\nScrapes a webpage and extracts an attribute value.\n\n#### scrapeAttribute example\n\n```ts\nlet src = await scrapeAttribute('https://example.com', 'img', 'src')\n```\n\n### getScreenshotFromWebpage\n\nCaptures a screenshot of a webpage.\n\n#### getScreenshotFromWebpage example\n\n```ts\nlet buffer = await getScreenshotFromWebpage(\"https://example.com\", {\n  width?: number,\n  height?: number,\n  ...\n}): Promise<Buffer>\n```\n\n### getWebpageAsPdf\n\nConverts a webpage to a PDF.\n\n#### getWebpageAsPdf example\n\n```ts\nlet buffer = await getWebpageAsPdf('https://example.com', {\n  width: 800,\n  height: 600,\n})\n```\n\n### applescript\n\nExecutes an applescript string\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### applescript example\n\n```ts\nlet result = await applescript(`\ntell application \"Finder\"\n  return name of every disk\nend tell\n`)\n```\n\n### lock\n\nLocks the screen.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### lock example\n\n```ts\nawait lock()\n```\n\n### logout\n\nLogs out the current user.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### logout example\n\n```ts\nawait logout()\n```\n\n### shutdown\n\nShuts down the computer.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### shutdown example\n\n```ts\nawait shutdown()\n```\n\n### shutdown\n\nShuts down the computer.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### shutdown example\n\n```ts\nawait shutdown()\n```\n\n### sleep\n\nPuts the computer to sleep.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### sleep example\n\n```ts\nawait sleep()\n```\n\n### sleep\n\nPuts the computer to sleep.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### sleep example\n\n```ts\nawait sleep()\n```\n\n### sleep\n\nPuts the computer to sleep.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### sleep example\n\n```ts\nawait sleep()\n```\n\n### fileSearch\n\nSearches for files on the filesystem.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### fileSearch example\n\n```ts\nasync function fileSearch(query: string, options?: {\n  onlyin?: string,\n  ...\n}): Promise<string[]>\n```\n\n### copyPathAsImage\n\nCopies a file path as an image to the clipboard.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### copyPathAsImage example\n\n```ts\nawait copyPathAsImage('/path/to/file.txt')\n```\n\n### copyPathAsImage\n\nCopies a file path as an image to the clipboard.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### copyPathAsImage example\n\n```ts\nawait copyPathAsImage('/path/to/file.txt')\n```\n\n### copyPathAsImage\n\nCopies a file path as an image to the clipboard.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### copyPathAsImage example\n\n```ts\nawait copyPathAsImage('/path/to/file.txt')\n```\n\n### getWindows\n\nRetrieves information about open windows.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### getWindows example\n\n```ts\nlet windows = await getWindows()\n```\n\n### getWindowsBounds\n\nRetrieves the bounds of open windows.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### getWindowsBounds example\n\n```ts\nlet bounds = await getWindowsBounds()\n```\n\n## Utils\n\n### edit\n\nOpen a file using the KIT_EDITOR env variable\n\n(For example, set KIT_EDITOR=/usr/local/bin/cursor)\n\n#### edit example\n\n```ts\nconst zshrcPath = home('.zshrc')\nawait edit(zshrcPath)\n```\n\n### run\n\nRun another script from the same kenv\n\n#### run example\n\n```ts\n// Assuming you have a \"hello-world.ts\" script next to this file\nawait run('hello-world')\n```\n\n#### run example arg\n\n```ts\n// Assuming the hello-world script has an: await arg(\"Enter your name\")\nawait run('hello-world', 'John')\n```\n\n### home\n\nCreate a path relative to the user's home directory\n\n#### home example\n\n```ts\nconst downloadsPath = home('Downloads')\nconst downloadedFileNames = await readdir(downloadsPath)\nawait editor(JSON.stringify(downloadedFileNames, null, 2))\n```\n\n### get\n\nAn alias for axios.get\n\n#### get example\n\n```ts\nconst result = await get('https://jsonplaceholder.typicode.com/todos/1')\n\nawait editor(JSON.stringify(result.data))\n```\n\n#### get active app on mac\n\n```ts\n// MAC ONLY!\n\n// Always hide immmediately if you're not going to show a prompt\nawait hide()\n\n// but you can import that package directly (or another similar package) if you prefer\nlet info = await getActiveAppInfo()\nif (info.bundleIdentifier === 'com.google.Chrome') {\n  await keyboard.pressKey(Key.LeftSuper, Key.T)\n  await keyboard.releaseKey(Key.LeftSuper, Key.T)\n}\n```\n\n### post\n\nAn alias for axios.post\n\n#### post example\n\n```ts\nconst result = await post('https://jsonplaceholder.typicode.com/posts', {\n  title: 'foo',\n  body: 'bar',\n  userId: 1,\n})\n\nawait editor(JSON.stringify(result.data))\n```\n\n### put\n\nAn alias for axios.put\n\n#### put example\n\n```ts\nconst result = await put('https://jsonplaceholder.typicode.com/posts/1', {\n  title: 'foo',\n})\n\nawait editor(JSON.stringify(result.data))\n```\n\n### patch\n\nAn alias for axios.patch\n\n#### patch example\n\n```ts\nconst result = await patch('https://jsonplaceholder.typicode.com/posts/1', {\n  title: 'foo',\n})\n\nawait editor(JSON.stringify(result.data))\n```\n\n### del\n\nAn alias for axios.delete\n\n#### del example\n\n```ts\nconst result = await del('https://jsonplaceholder.typicode.com/posts/1')\n\nawait editor(JSON.stringify(result.data))\n```\n\n### download\n\nDownload a file from a URL\n\n#### download example\n\n```ts\nconst url = 'https://github.com/johnlindquist/kit/archive/refs/heads/main.zip'\nconst destination = home('Downloads')\n\nawait download(url, destination)\n```\n\n### replace\n\nReplace a string or regex in one or more files\n\n#### replace example\n\n```ts\nconst mdPath = kenvPath('sticky.md')\n\nawait replace({\n  files: [mdPath],\n  from: /nice/g, // replace all instances of \"nice\"\n  to: 'great',\n})\n```\n\n### md\n\nConvert markdown to HTML for rendering in prompts\n\n#### md example\n\n```ts\nconst html = md(`# You're the Best\n\n* Thanks for using Script Kit!\n`)\n\nawait div(html)\n```\n\n### compile\n\nCreate a handlebars template compiler\n\n#### compile example\n\n```ts\nconst compiler = compile(`\nHello {{name}}\n\nHave a {{mood}} day!\n\n{{#if from}}\nFrom {{author}}\n{{/if}}\n`)\n\nconst result = compiler({\n  name: 'John',\n  mood: 'great',\n  author: 'Script Kit',\n  from: true,\n})\n\nawait div(result)\n```\n\n### uuid\n\nGenerate a UUID\n\n#### uuid example\n\n```ts\nconst id = uuid()\nawait editor(id)\n```\n\n### globby\n\nGlob a list of files\n\n#### globby example\n\n```ts\nconst kenvScripts = kenvPath('scripts', '*.ts')\nconst kenvScriptlets = kenvPath('scriptlets', '*.md')\n\nconst pathsForScriptsAndScriptlets = await globby([kenvScripts, kenvScriptlets])\nawait editor(JSON.stringify(pathsForScriptsAndScriptlets, null, 2))\n```\n\n### isFile\n\nCheck if a path is a file\n\n#### isFile example\n\n```ts\nconst testingIsFileTxtPath = home('testing-isFile.txt')\n\nconst isTestingFile = await isFile(testingIsFileTxtPath)\nif (!isTestingFile) {\n  await writeFile(testingIsFileTxtPath, 'Hello World')\n}\n\nconst content = await readFile(testingIsFileTxtPath, 'utf8')\nawait editor(content)\n```\n\n### isDir\n\nCheck if a path is a directory\n\n### isBin\n\nCheck if a path can be executed\n\n### browse\n\nOpen a URL in the default browser.\n\n#### browse example\n\n```ts\n// When executing a command without UI, \"hide\" allows you to instantly hide the UI rather than waiting for the command to finish\nawait hide()\nawait browse('https://scriptkit.com')\n```\n\n### formatDate\n\nFormats a date\n\n### trash\n\nMoves files or directories to the trash.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### trash example\n\n```ts\nawait trash('/path/to/file.txt')\n```\n\n### git\n\nGit utility functions.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### git example\n\n```ts\nawait git.clone('https://github.com/user/repo.git', '/path/to/repo')\n```\n\n### degit\n\nClones a GitHub repository using degit.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### degit example\n\n```ts\nawait degit('https://github.com/user/repo.git', '/path/to/repo')\n```\n\n### openApp\n\nOpens an application.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### openApp example\n\n```ts\nawait openApp('Google Chrome')\n```\n\n### createGist\n\nCreates a GitHub gist.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### createGist example\n\n```ts\nlet gistUrl = await createGist({\n  description: 'My awesome gist',\n  public: true,\n  files: {\n    'hello.txt': {\n      content: 'Hello, world!',\n    },\n  },\n})\n```\n\n### npm\n\n> Deprecated: Use standard `import` instead.\n\nInstalls an npm package.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### npm example\n\n```ts\nawait npm('lodash')\n```\n\n### attemptImport\n\nAttempts to import a module.\n\n#### attemptImport example\n\n```ts\nlet module = await attemptImport('lodash')\n```\n\n### silentAttemptImport\n\nAttempts to import a module silently.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### silentAttemptImport example\n\n```ts\nlet module = await silentAttemptImport('lodash')\n```\n\n### store\n\nStores data in a persistent key-value store.\n\n- Only tested on macOS\n- May require additional permissions or configurations\n\n#### store example\n\n```ts\nawait store.set('myKey', 'myValue')\nlet value = await store.get('myKey')\n```\n\n### db\n\nAn extremely simple database that persists to a file.\n\n#### db hello world\n\n```ts\n// Pre-populate the database with some items\n\nconst peopleDb = await db({\n  people: [\n    {\n      name: 'John',\n      age: 30,\n      city: 'San Francisco',\n    },\n    {\n      name: 'Jane',\n      age: 25,\n      city: 'New York',\n    },\n  ] as Person[],\n})\n\nconst person = await arg<Person>('Select a person', peopleDb.people)\n// Do something with the person...\n\nconst [name, age, city] = await fields({\n  fields: ['name', 'age', 'city'],\n  enter: 'Add',\n  description: 'Add a new person to the database',\n})\n\npeopleDb.people.push({ name, age: parseInt(age), city })\n\nawait peopleDb.write()\n\nawait editor(JSON.stringify(peopleDb.people, null, 2))\n\ntype Person = {\n  name: string\n  age: number\n  city: string\n}\n```\n\n#### db populate\n\n```ts\n// Pass in a function to generate data for the db\n// Because this script is named \"db-basic.js\"\n// The database is found at \"~/.kenv/db/_db-basic.json\"\n\nlet reposDb = await db(async () => {\n  let response = await get('https://api.github.com/users/johnlindquist/repos')\n\n  return response.data.map(({ name, description, html_url }) => {\n    return {\n      name,\n      description,\n      value: html_url,\n    }\n  })\n})\nlet repoUrl = await arg('Select repo to open:', reposDb.items)\n\nexec(`open \"${repoUrl}\"`)\n```\n\n#### db store\n\n```ts\nlet fruitDb = await db(['apple', 'banana', 'orange'])\n\nwhile (true) {\n  let fruitToAdd = await arg('Add a fruit', md(fruitDb.items.map(fruit => `* ${fruit}`).join('\\n')))\n\n  fruitDb.items.push(fruitToAdd)\n  await fruitDb.write()\n\n  let fruitToDelete = await arg('Delete a fruit', fruitDb.items)\n\n  fruitDb.items = fruitDb.items.filter(fruit => fruit !== fruitToDelete)\n\n  await fruitDb.write()\n}\n```\n\n### memoryMap\n\nManages a memory map of objects.\n\n#### memoryMap example\n\n```ts\nmemoryMap.set('myKey', { myObject: true })\nlet value = memoryMap.get('myKey')\n```\n\n### show\n\nShows the main prompt.\n\n#### show example\n\n```ts\nawait show()\n```\n\n### hide\n\nHides the main prompt.\n\n#### hide example\n\n```ts\nawait hide()\n```\n\n### blur\n\nReturns focus to the previous app.\n\n#### blur example\n\n```ts\nimport { URL, fileURLToPath } from 'node:url'\n\nawait editor({\n  onInit: async () => {\n    const { workArea } = await getActiveScreen()\n    const topLeft = { x: workArea.x, y: workArea.y }\n    const size = { height: 900, width: 200 }\n    await setBounds({\n      ...topLeft,\n      ...size,\n    })\n    await blur()\n\n    // get path to current file\n    const currentScript = fileURLToPath(new URL(import.meta.url))\n    const content = await readFile(currentScript, 'utf8')\n    const lines = content.split('\\n')\n    for await (const line of lines) {\n      editor.append(`${line}\\n`)\n      await wait(100)\n    }\n  },\n})\n```\n\n### setPanel\n\nSets the panel content.\n\n#### setPanel example\n\n```ts\nawait setPanel('<h1>Hello, world!</h1>')\n```\n\n### setPrompt\n\nSets the prompt content.\n\n#### setPrompt example\n\n```ts\nawait setPrompt('<h1>Enter your name:</h1>')\n```\n\n### setPreview\n\nSets the preview content.\n\n#### setPreview example\n\n```ts\nawait setPreview('<h1>Preview</h1>')\n```\n\n### setIgnoreBlur\n\nSets whether to ignore blur events.\n\n#### setIgnoreBlur example\n\n```ts\nawait setIgnoreBlur(true)\n```\n\n### getClipboardHistory\n\nGets the clipboard history from the in-memory clipboard\n\n#### getClipboardHistory example\n\n```ts\nconst history = await getClipboardHistory()\nconst text = await arg('Select from clipboard history', history)\nawait editor(text)\n```\n\n### removeClipboardItem\n\nRemoves an item from the clipboard.\n\n#### removeClipboardItem example\n\n```ts\nawait removeClipboardItem(item)\n```\n\n### clearClipboardHistory\n\nClears the clipboard history.\n\n#### clearClipboardHistory example\n\n```ts\nawait clearClipboardHistory()\n```\n\n### setScoredChoices\n\nSets scored choices for a prompt.\n\n#### setScoredChoices example\n\n```ts\nawait setScoredChoices([\n  { name: 'John', score: 0.9 },\n  { name: 'Mindy', score: 0.8 },\n  { name: 'Joy', score: 0.7 },\n])\n```\n\n### setSelectedChoices\n\nSets selected choices for a prompt.\n\n#### setSelectedChoices example\n\n```ts\nawait setSelectedChoices(['John', 'Mindy'])\n```\n\n### groupChoices\n\nGroups choices for a prompt.\n\n#### groupChoices example\n\n```ts\nawait groupChoices([\n  { name: 'Group 1', choices: ['John', 'Mindy'] },\n  { name: 'Group 2', choices: ['Joy'] },\n])\n```\n\n### preload\n\nPreloads data for a prompt.\n\n#### preload example\n\n```ts\nawait preload({\n  name: 'John',\n  age: 40,\n})\n```\n\n### select\n\nPrompts the user to select one or more options.\n\n#### select example\n\n```ts\n// Return an array of selected items\nconst multipleChoice = await select('Select one or more developer', [\n  'John',\n  'Nghia',\n  'Mindy',\n  'Joy',\n])\n\nawait editor(JSON.stringify(multipleChoice, null, 2))\n```\n\n#### select a choice with a single keystroke\n\n```ts\nlet choice = await arg({\n  placeholder: 'Choose a color',\n  choices: [\n    { name: '[R]ed', value: 'red' },\n    { name: '[G]reen', value: 'green' },\n    { name: '[B]lue', value: 'blue' },\n  ],\n})\n\nawait div(md(`You chose ${choice}`))\n```\n\n#### select array object\n\n```ts\nconst people = [\n  {\n    name: 'John',\n    description: 'Full-stack Dev',\n    value: 'John',\n  },\n  {\n    name: 'Nghia',\n    description: 'Full-stackoverflow dev',\n    value: 'Nghia',\n  },\n  {\n    name: 'Mindy',\n    description: 'Business Analyst',\n    value: 'Mindy',\n  },\n  {\n    name: 'Joy',\n    description: 'Leader',\n    value: 'Joy',\n  },\n]\nlet multipleChoice = await select('Select one or more developer', people)\n```\n\n#### select async choices array object\n\n```ts\nlet name = await select('GET: NAME (please wait)', async () => {\n  let response = await get('https://swapi.dev/api/people/')\n  return response?.data?.results.map(person => {\n    return {\n      name: person.name,\n      description: `height: ${person.height}, mass: ${person.mass}`,\n      value: person,\n      preview: () => JSON.stringify(person),\n    }\n  })\n})\n```\n\n#### select basic array input\n\n```ts\nlet multipleChoice = await select('Select one or more developer', ['John', 'Nghia', 'Mindy', 'Joy'])\n```\n\n#### select generated input choices\n\n```ts\nlet word = await select('Type then pick a words', input => {\n  return input.trim().split(new RegExp('[.,;/-_\\n]', 'g'))\n})\n```\n\n### grid\n\nPrompts the user to select one or more options in a grid layout.\n\n#### grid example\n\n```ts\nlet multipleChoice = await grid('Select one or more developer', ['John', 'Nghia', 'Mindy', 'Joy'])\n```\n\n### getMediaDevices\n\nRetrieves available media devices.\n\n#### getMediaDevices example\n\n```ts\nlet devices = await getMediaDevices()\n```\n\n### getTypedText\n\nRetrieves typed text from the user.\n\n#### getTypedText example\n\n```ts\nlet text = await getTypedText()\n```\n\n### toast\n\nDisplays a small pop-up notification inside the Script Kit window.\n\n#### toast example\n\n```ts\nawait toast('Hello from Script Kit!', {\n  autoClose: 3000, // close after 3 seconds\n  pauseOnFocusLoss: false,\n})\n```\n\n### submit\n\nForcefully submit a value from an open prompt\n\n#### submit example\n\n```ts\nconst result = await arg(\n  {\n    placeholder: \"Pick one in under 3 seconds or I'll pick one for you\",\n    onInit: async () => {\n      await wait(3000)\n      submit('broccoli') //forces a submission\n    },\n  },\n  ['cookie', 'donut']\n)\n\n// Wait for 1 second\nawait editor(result)\n```\n\n### preventSubmit\n\nA symbol used to block submitting a prompt\n\n#### preventSubmit example\n\n```ts\nawait arg({\n  placeholder: 'Try to submit text less than 10 characters',\n  onSubmit: async input => {\n    if (input.length < 10) {\n      setHint('Text must be at least 10 characters. You entered ' + input.length)\n      setEnter('Try Again')\n      return preventSubmit\n    }\n  },\n})\n```\n\n### wait\n\nWait for a number of milliseconds\n\n#### wait example\n\n```ts\ndiv(md(`Enjoying your wait?`))\nawait wait(1000)\ndiv(md(`I waited 1 second. Let's wait some more!`))\nawait wait(1000)\nawait div(md(`All done!`))\n```\n\n### exit\n\nExit the script completely\n\n#### exit example\n\n```ts\n// Prevent the script from running for more than 1 second\nsetTimeout(() => {\n  exit()\n}, 1000)\n\nawait arg('I will exit in 1 second')\n```\n\n## SDK Utils\n\n### kitPath\n\nCreate a path relative to the kit directory.\n\n### kenvPath\n\nCreate a path relative to the \"kenv\" (kit environment) directory\n\n#### kenvPath example\n\n```ts\nconst scriptsPath = kenvPath('scripts')\nconst scripts = await readdir(scriptsPath)\nawait editor(JSON.stringify(scripts, null, 2))\n```\n\n### tmpPath\n\nCreate a path relative to a \"kit\" directory in the system temp directory\n\n> Note: The tmp directory is symlinked to the ~/.kenv/tmp directory for easy access\n\n#### tmpPath example\n\n```ts\nconst tmpTestTxtPath = tmpPath('test.txt')\nconst content = await ensureReadFile(tmpTestTxtPath, 'Hello World')\n\nawait editor(\n  JSON.stringify(\n    {\n      tmpTestTxtPath,\n      content,\n    },\n    null,\n    2\n  )\n)\n```\n\n### getScripts\n\nGet all scripts\n\n#### getScripts example\n\n```ts\n// Get all scripts from ~/.kit/db/scripts.json\nconst scripts = await getScripts()\nconst script = await arg('Select a script', scripts)\nawait editor(JSON.stringify(script, null, 2))\n```\n\n### selectScript\n\nAllows you to build a custom script selection menu\n\n#### selectScript example\n\n```ts\nimport type { Script } from '@johnlindquist/kit'\n\nconst script = await selectScript(\n  'Select a Shortcut Script to Edit',\n  true, // \"true\" will load from ~/.kit/db/scripts.json cache\n  (scripts: Script[]) => scripts.filter(script => script.shortcut)\n)\n\nawait edit(script.filePath)\n```\n\n## Closing Thoughts\n\n### Alternate Importing\n\nAlso, you can import `kit` and access the APIs like so:\n\n```ts\nimport kit from '@johnlindquist/kit'\n\nawait kit.arg('Enter your name')\n```\n\n> **Advanced Usage:**\n>\n> For more advanced scenarios, you can import the [ai-sdk](https://ai-sdk.dev/docs/getting-started/nodejs) directly. Using Script Kit's helpers is not required‚Äîif you need features not provided by these helpers, feel free to use the ai-sdk, any other SDK, or any npm library directly in your scripts.\n\n</API_DOCS>\n\n<MINI_DOCS>\nBelow are **mini docs** for each prompt, **with three short examples** demonstrating different features or use cases. Feel free to adapt or expand them!\n\n---\n\n## 1. **arg**\n\n```ts\n// Basic text input\nlet name = await arg(\"What's your name?\")\n\n// Array of suggestions\nlet fruit = await arg('Pick a fruit:', ['Apple', 'Banana', 'Cherry'])\n\n// Allow freeform text while still showing suggestions and a hint\nlet color = await arg(\n  {\n    placeholder: 'Type a color or choose one',\n    hint: 'Enter any color name',\n    strict: false,\n  },\n  ['Red', 'Green', 'Blue']\n)\n```\n\n**Notes**:\n\n- `strict: false` lets you submit any typed text if no matching suggestion is found.\n- You can pass a function for dynamic or async suggestions.\n\n---\n\n## 2. **div**\n\n```ts\n// Display static HTML\nawait div(`<h1>Hello Script Kit!</h1>`)\n\n// Display Markdown using md()\nawait div(md(`# **Markdown** is *awesome*`))\n\n// Add Tailwind CSS classes for styling\nawait div(`<h2 class=\"text-2xl text-blue-500\">Styled Title</h2>`, `p-4 bg-gray-100`)\n```\n\n**Notes**:\n\n- Great for showing read-only content, images, or info messages.\n- You can pass a `PromptConfig` object for more control (e.g., adding shortcuts).\n\n---\n\n## 3. **editor**\n\n```ts\n// Basic usage: get text from the user\nlet notes = await editor('Enter your notes here:')\n\n// Load initial text and set language\nlet code = await editor({\n  value: `console.log(\"Hello TypeScript!\");`,\n  language: 'typescript',\n  hint: 'Edit the TypeScript code',\n})\n\n// Listen to input changes for a live preview panel\nawait editor({\n  value: `# Start Typing Markdown`,\n  onInput: async newText => {\n    setPanel(md(newText)) // Show rendered Markdown in a panel below\n  },\n})\n```\n\n**Notes**:\n\n- The built-in Monaco editor supports syntax highlighting for many languages.\n- Use `onInput`, `onBlur`, or `onSubmit` to handle editor events.\n\n---\n\n## 4. **form**\n\n```ts\n// Basic form with one input\nlet { email } = await form(`<input name=\"email\" type=\"email\" placeholder=\"Enter your email\" />`)\n\n// Multiple fields with labels\nlet userData = await form(\n  md(`\n  ## User Details\n  <label>Name: <input name=\"name\" type=\"text\" class=\"input\"></label>\n  <label>Age:  <input name=\"age\" type=\"number\" class=\"input\"></label>\n`)\n) // Using md for structure and Tailwind classes via @apply if setup\n\n// Form with various input types\nlet preferences = await form(\n  md(`\n  ### Preferences\n  Color: <input name=\"color\" type=\"color\" value=\"#ff0000\"/>\n  Fruit: \n  <select name=\"fruit\" class=\"select\">\n    <option>Apple</option>\n    <option>Banana</option>\n  </select>\n`)\n)\n```\n\n**Notes**:\n\n- Returns an object keyed by the `name` attribute of your form elements.\n- Perfect for custom layouts or when `fields` is too restrictive.\n\n---\n\n## 5. **fields**\n\n```ts\n// Simple array usage for labels, returns an array of string values\nlet [username, password] = await fields(['Username', 'Password'])\n\n// Define fields with more properties (label, type, placeholder, initial value)\nlet [productName, quantity] = await fields([\n  { label: 'Product Name', placeholder: 'e.g., Awesome Gadget' },\n  { label: 'Quantity', type: 'number', value: '1' },\n])\n\n// Process field values to build an object\nconst fieldDefs = [\n  { name: 'email', label: 'Email Address', type: 'email' },\n  { name: 'subscribe', label: 'Subscribe to newsletter?', type: 'checkbox', value: 'true' }, // Checkboxes return string \"true\"/\"false\"\n]\nconst values = await fields(fieldDefs)\nconst contactInfo = fieldDefs.reduce((obj, field, index) => {\n  obj[field.name] = field.type === 'checkbox' ? values[index] === 'true' : values[index]\n  return obj\n}, {})\nconsole.log(contactInfo)\n```\n\n**Notes**:\n\n- Returns an array of strings corresponding to the input values.\n- Each field can be a string (for label) or an object for detailed configuration.\n\n---\n\n## 6. **path**\n\n```ts\n// Simple usage: select a file or folder\nlet selectedPath = await path()\nconsole.log('User selected:', selectedPath)\n\n// Only allow picking folders, starting from the user's 'Documents'\nlet projectDir = await path({\n  placeholder: 'Pick a project folder',\n  startPath: home('Documents'),\n  onlyDirs: true,\n})\n\n// Restrict to a certain startPath and provide a hint\nlet configFile = await path({\n  startPath: kenvPath(), // Start in the current .kenv directory\n  hint: 'Select a configuration file from your kenv',\n})\n```\n\n**Notes**:\n\n- Lets users pick a file or folder from the filesystem.\n- Options include `startPath`, `onlyDirs`, `showHidden`, etc.\n\n---\n\n## 7. **select**\n\n```ts\n// Basic multi-select with an array of strings\nlet favoriteFruits = await select('Pick your favorite fruits (multi-select):', [\n  'Apple',\n  'Banana',\n  'Cherry',\n  'Date',\n])\n\n// Provide objects with name, value, and description\nlet selectedTask = await select('Select a task to run:', [\n  { name: 'Run Build', value: 'build_script', description: 'Compiles the project' },\n  { name: 'Run Tests', value: 'test_script', description: 'Executes all unit tests' },\n  { name: 'Deploy', value: 'deploy_script', description: 'Deploys to production' },\n])\n\n// Async dynamic choices based on user input\nlet character = await select('Type to search Star Wars characters:', async input => {\n  if (!input) return [{ name: 'Type to search...', disabled: true }]\n  const response = await get(`https://swapi.dev/api/people/?search=${input}`)\n  return response.data.results.map(p => ({ name: p.name, value: p }))\n})\n```\n\n**Notes**:\n\n- Returns an **array** of selected items (values).\n- Great for scenarios where multiple choices are needed, or for single selection from a rich list.\n\n---\n\n## 8. **drop**\n\n```ts\n// 1. Drop files and get their paths\nlet droppedItems = await drop('Drop files onto this area')\nif (Array.isArray(droppedItems) && droppedItems.length > 0 && droppedItems[0].path) {\n  let filePaths = droppedItems.map(item => item.path).join('\\n')\n  await editor({ value: `Dropped file paths:\\n${filePaths}`, hint: 'File paths listed' })\n} else if (typeof droppedItems === 'string') {\n  // Handle dropped text\n  await editor({ value: `Dropped text: ${droppedItems}`, hint: 'Text content displayed' })\n} else {\n  await div(md('Nothing specific dropped or an unknown type.'))\n}\n\n// 2. Differentiate based on dropped content (more robust check)\nlet result = await drop('Drop files or text')\nif (typeof result === 'string') {\n  console.log('User dropped text:', result)\n  await div(md(`You dropped text: \\`${result}\\``))\n} else if (Array.isArray(result) && result.length > 0 && result[0].path) {\n  console.log(\n    'User dropped file(s):',\n    result.map(f => f.path)\n  )\n  await div(md(`You dropped: **${result.map(f => f.name).join(', ')}**`))\n}\n\n// 3. Use in a flow, e.g., upload dropped image\n// (Conceptual: upload logic not shown)\nawait div(\"<h2>Drop an image to 'upload'</h2>\")\nlet imageDrop = await drop()\nif (Array.isArray(imageDrop) && imageDrop[0]?.path) {\n  // const uploadResult = await uploadImage(imageDrop[0].path);\n  await div(md(`Simulated upload of: **${imageDrop[0].name}**`))\n}\n```\n\n**Notes**:\n\n- Returns an array of file objects (each with `path`, `name`, etc.) if the user drops files.\n- Returns a string if the user drags and drops text (e.g., from a browser).\n\n---\n\n## 9. **env**\n\n```ts\n// Load MY_API_KEY, or prompt to set it if not found\nlet apiKey = await env('MY_API_KEY')\nconsole.log(`API Key: ${apiKey}`)\n\n// Prompt with a custom message and choices if variable isn't set\nlet preferredShell = await env('PREFERRED_SHELL', async () => {\n  return await arg('Select your preferred shell:', ['bash', 'zsh', 'fish'])\n})\nconsole.log(`Shell: ${preferredShell}`)\n\n// Prompt for a secret (input will be masked)\nlet dbPassword = await env('DATABASE_PASSWORD', {\n  secret: true,\n  placeholder: 'Enter your secure database password',\n})\n```\n\n**Notes**:\n\n- Stores and retrieves variables from `~/.kenv/.env`.\n- Ideal for API keys, user preferences, and configurations.\n\n---\n\n## 10. **term**\n\n```ts\n// Launch a simple terminal and run a command\nawait term('echo Hello from the embedded terminal!')\n\n// Start a shell in a specific directory and list files\nawait term({\n  command: 'ls -la', // Command to execute\n  cwd: home('Documents'), // Set working directory\n  hint: 'Listing files in Documents',\n})\n\n// Interactive usage for a CLI tool\nawait term('npx degit sveltejs/template my-svelte-project')\n```\n\n**Notes**:\n\n- Launches an embedded terminal window for interactive commands.\n- Great for scripts that require user input in a CLI environment or running CLI tools.\n\n---\n\n## 11. **template**\n\n```ts\n// Simple template with one placeholder\nlet greeting = await template(\"Hello, $1! What's new?\")\nconsole.log(\"User's response:\", greeting) // Contains the filled template\n\n// Template with multiple placeholders and default values\nlet meetingInvite = await template(\n  md(`\n  ## Meeting Invite\n  Hi \\${1:Team},\n  Let's meet on \\${2:Monday} at \\${3:10 AM}.\n  Topic: \\${4:Project Update}\n`)\n)\n// meetingInvite will be the fully filled Markdown string\n\n// Using choice placeholders\nlet mood = await template(\"I'm feeling \\${1|happy,sad,excited,calm} today.\")\nconsole.log(mood) // e.g., \"I'm feeling happy today.\"\n```\n\n**Notes**:\n\n- `$1`, `${2:default}`, etc., act like snippet placeholders you can tab between.\n- Use for quick \"fill-in-the-blanks\" text generation.\n\n---\n\n## 12. **chat**\n\n```ts\n// Basic chat session, returns array of messages on submit (e.g. Escape)\nlet conversationLog = await chat({ placeholder: 'Type your message...' })\nconsole.log('Chat ended. Log:', conversationLog)\n\n// Preload messages and respond after user types\nawait chat({\n  onInit: async () => {\n    chat.addMessage({ text: 'Hello! How can I assist you today?', position: 'left' })\n  },\n  onSubmit: async userInput => {\n    if (userInput.toLowerCase().includes('help')) {\n      chat.addMessage({ text: 'Sure, I can help with that!', position: 'left' })\n    } else {\n      chat.addMessage({ text: 'Interesting point!', position: 'left' })\n    }\n    // To keep chat open, you might need to avoid default submission or handle it\n  },\n})\n\n// Programmatically adding messages to an active chat\n// (This example implies a chat is already open or being managed by the script)\n// await chat.addMessage({ text: \"This is a system message.\", position: \"center\", type: \"system\" });\n// Note: For continuous interaction, use `onSubmit` to re-prompt or handle state.\n// The following is a conceptual example of sending a message from outside onSubmit:\n// setTimeout(() => chat.addMessage({ text: \"A delayed message!\", position: \"left\" }), 2000);\n// await chat(); // To keep it open for the timeout\n```\n\n**Notes**:\n\n- Creates a chat-like interface. `chat.addMessage()` adds messages.\n- `onSubmit` is key for handling user input and responding. By default, submitting closes the chat.\n\n---\n\n## 13. **micro**\n\n```ts\n// Minimal text input\nlet quickNote = await micro('Jot down a quick note:')\nconsole.log(quickNote)\n\n// With suggestions (like `arg()`)\nlet quickColor = await micro('Quickly pick a color:', ['red', 'green', 'blue'])\nconsole.log(`Selected: ${quickColor}`)\n\n// With actions (config object for placeholder and actions)\nawait micro({\n  placeholder: 'Search or action...',\n  choices: ['Google Search', 'DuckDuckGo Search'],\n  actions: [\n    {\n      name: 'Open Script Kit Docs',\n      shortcut: 'cmd+d',\n      onAction: () => open('https://scriptkit.com/docs'),\n    },\n  ],\n})\n```\n\n**Notes**:\n\n- Similar to `arg()`, but uses a more compact UI.\n- Good for quick, ephemeral prompts where screen real estate is a concern.\n\n---\n\n## 14. **ai**\n\n```ts\n// Basic text generation\nconst storyStarter = ai('Write a one-sentence story starter about a lost robot.')\nconst sentence = await storyStarter(\"The robot's name was Rusty.\") // Input can provide context\nawait div(md(sentence))\n\n// Translate text using a specific model\nconst translateToSpanish = ai('Translate the following English text to Spanish:', {\n  model: 'openai:gpt-5-nano', // Example: specify provider and model\n})\nconst spanishText = await translateToSpanish('Hello, how are you?')\nawait div(md(`Spanish: ${spanishText}`))\n\n// Summarize selected text\nconst selectedText = await getSelectedText()\nif (selectedText) {\n  const summarizer = ai('Summarize this text in one concise sentence.')\n  const summary = await summarizer(selectedText)\n  await setSelectedText(`Summary: ${summary}`) // Paste summary back\n} else {\n  await div('No text selected to summarize.')\n}\n```\n\n**Notes**:\n\n- Returns a function that, when called with input text, generates an AI completion.\n- Configure default provider/model via `.env` (e.g., `AI_DEFAULT_PROVIDER`, `AI_DEFAULT_MODEL`).\n- For structured JSON output, see `generate`.\n\n---\n\n## 15. **generate**\n\n```ts\n// Extract structured data from text\nconst userInfoSchema = z.object({ name: z.string(), email: z.string().email().optional() })\nconst textInput = 'User: Alice (alice@example.com)'\nconst userInfo = await generate(textInput, userInfoSchema)\nconsole.log(`Name: ${userInfo.name}, Email: ${userInfo.email || 'N/A'}`)\n\n// Generate a list of items based on a schema\nconst todoSchema = z.object({\n  tasks: z.array(z.object({ description: z.string(), done: z.boolean() })),\n})\nconst projectPrompt = \"Create 3 tasks for a 'Garden Cleanup' project. Mark first as done.\"\nconst todoList = await generate(projectPrompt, todoSchema)\ntodoList.tasks.forEach(task => console.log(`[${task.done ? 'x' : ' '}] ${task.description}`))\n\n// Using a different model for generation\nconst productSchema = z.object({ productName: z.string(), features: z.array(z.string()) })\nconst adCopy = 'Generate a product name and 2 features for a new smart coffee mug.'\nconst productInfo = await generate(adCopy, productSchema, {\n  model: 'anthropic:claude-3-opus-20240229',\n})\nawait div(md(`## ${productInfo.productName}\\n- ${productInfo.features.join('\\n- ')}`))\n```\n\n**Notes**:\n\n- Uses Zod (`z`) for defining the output schema. Make sure to `import { z } from 'zod'` if not automatically available or if Script Kit doesn't make `z` global. (Assuming `z` is globally available as per `kit.d.ts`).\n- Ideal for converting natural language to structured JSON objects.\n\n---\n\n## 16. **assistant**\n\n```ts\n// Simple conversational assistant\nconst friendlyBot = assistant('You are a friendly and helpful assistant.')\nfriendlyBot.addUserMessage('Tell me a fun fact about space.')\nlet responseText = ''\nfor await (const chunk of friendlyBot.textStream) {\n  responseText += chunk\n}\nawait div(md(responseText))\n\n// Assistant that streams to the chat UI\nconst chatBot = assistant('You are a concise chat bot.')\nawait chat({\n  onSubmit: async input => {\n    chat.addMessage({ text: '...', position: 'left' }) // Placeholder for AI response\n    chatBot.addUserMessage(input)\n    let fullReply = ''\n    for await (const chunk of chatBot.textStream) {\n      fullReply += chunk\n      chat.setMessage(-1, { text: md(fullReply), position: 'left' }) // Update last message\n    }\n  },\n})\n\n// Assistant with a simple tool (conceptual, relies on autoExecuteTools or manual handling)\nconst calculatorTool = {\n  add: {\n    description: 'Adds two numbers.',\n    parameters: z.object({ a: z.number(), b: z.number() }),\n    execute: async ({ a, b }) => ({ result: a + b }),\n  },\n}\nconst mathBot = assistant('You are a math assistant. Use tools when needed.', {\n  tools: calculatorTool,\n  autoExecuteTools: true, // Simplifies tool calling flow\n})\nmathBot.addUserMessage('What is 5 plus 7?')\nconst mathResult = await mathBot.generate() // autoExecuteTools handles intermediate steps\nawait div(md(`MathBot says: ${mathResult.text}`))\n```\n\n**Notes**:\n\n- Maintains conversation history. Use `addUserMessage`, `addSystemMessage`, etc.\n- Stream responses with `textStream` or get the full interaction with `generate()`.\n- Supports `tools` for extending capabilities. `autoExecuteTools: true` can simplify tool usage.\n\n---\n\n## 17. **hotkey**\n\n```ts\n// Capture a single hotkey combination\nawait div(md('Press any key combination to define a shortcut...'))\nconst keyInfo = await hotkey()\nawait editor(JSON.stringify(keyInfo, null, 2))\n// Example keyInfo: { key: \"s\", command: true, shift: false, shortcut: \"command s\" }\n\n// Use hotkey to trigger different actions\nawait div(md('Press Cmd+O to Open, Cmd+S to Save'))\nconst actionKey = await hotkey()\nif (actionKey.shortcut === 'command o') await div('Open action triggered!')\nif (actionKey.shortcut === 'command s') await div('Save action triggered!')\n\n// Set a placeholder for the hotkey prompt\nconst customHotkey = await hotkey({ placeholder: 'Define your custom hotkey:' })\nawait div(md(`You pressed: **${customHotkey.shortcut}**`))\n```\n\n**Notes**:\n\n- Captures a key combination (modifiers + one non-modifier key).\n- Returns an object with details about the pressed keys and the formatted shortcut string.\n\n---\n\n## 18. **grid**\n\n```ts\n// Simple grid selection with string choices\nlet selectedColors = await grid('Select your favorite colors:', [\n  'Red',\n  'Green',\n  'Blue',\n  'Yellow',\n  'Purple',\n  'Orange',\n])\nawait div(md(`You selected: ${selectedColors.join(', ')}`))\n\n// Grid with object choices (name, value, html for custom rendering)\nconst imageChoices = [\n  {\n    name: 'Cat',\n    value: 'cat_img.jpg',\n    html: `<img src=\"http://placekitten.com/100/100\" alt=\"Cat\" class=\"w-24 h-24 object-cover\"/>`,\n  },\n  {\n    name: 'Dog',\n    value: 'dog_img.jpg',\n    html: `<img src=\"https://placedog.net/100/100\" alt=\"Dog\" class=\"w-24 h-24 object-cover\"/>`,\n  },\n  {\n    name: 'Fox',\n    value: 'fox_img.jpg',\n    html: `<img src=\"https://randomfox.ca/images/randomfox.jpg\" alt=\"Fox\" style=\"width:96px;height:96px;object-fit:cover\"/>`,\n  },\n]\nlet chosenImages = await grid({ placeholder: 'Choose images:', columns: 3 }, imageChoices)\n// chosenImages will be an array of values, e.g., [\"cat_img.jpg\"]\n\n// Grid with dynamic choices and custom styling\nconst numbers = Array.from({ length: 9 }, (_, i) => ({ name: `${i + 1}`, value: i + 1 }))\nlet pickedNumber = await grid({\n  placeholder: 'Pick a number (single selection behavior for grid can be faked)',\n  choices: numbers,\n  columns: 3,\n  css: `.choice { border: 1px solid #ccc; text-align: center; padding: 10px; }\n        .focused { background-color: lightblue !important; }`,\n  // Note: Grid is typically multi-select. For single-select, you'd take the first item.\n})\nawait div(md(`Number (first if multiple): ${pickedNumber[0]}`))\n```\n\n**Notes**:\n\n- Similar to `select`, but displays choices in a grid layout.\n- Useful for visual choices like images or a large number of compact options.\n- Returns an array of selected values.\n\n---\n\n## 19. **eyeDropper**\n\n```ts\n// Basic usage: pick a color from the screen\nawait div(\n  md(\n    'Click the button above or use the prompt to activate eyedropper. Then click anywhere on screen.'\n  )\n)\nconst colorResult = await eyeDropper()\n// Example colorResult: { sRGBHex: \"#RRGGBB\", rgb: \"rgb(r,g,b)\", ... }\nif (colorResult) {\n  await div(\n    md(\n      `Picked color: <span style=\"color:${colorResult.sRGBHex}; background-color:lightgray; padding:2px;\">${colorResult.sRGBHex}</span>`\n    )\n  )\n} else {\n  await div(md('Eyedropper cancelled or failed.'))\n}\n\n// Using eyeDropper and immediately showing the hex value\nconst colorData = await eyeDropper({\n  placeholder: 'Activate eyedropper and pick a color',\n  hint: 'Click on the screen to select a color',\n})\nif (colorData?.sRGBHex) {\n  await setSelectedText(colorData.sRGBHex) // Pastes the hex code\n  await toast(`Copied ${colorData.sRGBHex} to clipboard!`) // Also copy it\n  copy(colorData.sRGBHex)\n}\n\n// Use in a script flow\nawait div(md('## Design Tool\\nPick a primary color:'))\nconst primaryColor = await eyeDropper()\nif (primaryColor) {\n  await div(md(`Primary color set to: ${primaryColor.sRGBHex}`))\n  // ... further script logic using primaryColor.sRGBHex\n}\n```\n\n**Notes**:\n\n- Activates a system color picker/eyedropper tool.\n- Returns an object with the color in various formats (hex, rgb, hsl, etc.).\n- Behavior might vary slightly across operating systems.\n\n---\n\n## Display & Actions\n\n- **`setPanel(htmlString)`**: Sets HTML content in the panel below the input.\n- **`setPreview(htmlString)`**: Sets HTML content in the preview pane (usually to the right).\n- **`setHint(textString)`**: Sets the hint text displayed below the input/choices.\n- **`setInput(textString)`**: Programmatically sets the text in the input field.\n- **`setChoices(choicesArray, config?)`**: Replaces the current list of choices.\n- **`md(markdownString)`**: Converts a Markdown string to HTML.\n- **`highlight(markdownString)`**: Syntax-highlights code blocks within a Markdown string.\n- **`notify({ title: \"...\", body: \"...\" })`**: Sends a system notification.\n- **`toast(\"Message\", options?)`**: Displays a small, temporary message within the Script Kit window.\n\n## Windows & UI Control\n\n- **`hide()` / `blur()` / `focus()`**: Control the main prompt's visibility and focus.\n- **`show()`**: Ensure the main prompt window is visible.\n- **`setBounds({ x, y, width, height })`**: Set the main prompt window's position and size.\n- **`getActiveScreen()`**: Get details about the currently active display (for positioning).\n- `alwaysOnTop`, `width`, `height`: These are properties of the `PromptConfig` object.\n- **`widget(html, options?)`**: Creates a new, independent HTML window.\n  - `widget.setState(newState)`: Updates reactive state in a petite-vue widget.\n  - `widget.onClick(handler)`, `widget.onClose(handler)`, etc.: Event handlers for widgets.\n\n## Editor (`editor` prompt specific API)\n\n- **`editor.append(\"text\")`**: Appends text at the current cursor position or end.\n- **`editor.setText(\"new text\")`**: Replaces the entire content of the editor.\n- **`editor.getSelection()`**: Returns `{ text: \"selected\", start: 0, end: 8 }`.\n- **`editor.moveCursor(offset)`**: Moves the cursor to a specific character offset.\n- The `editor` prompt itself returns the full text content upon submission.\n\n## Shortcuts & Global Input\n\n**IMPORTANT**: Always always use `await getSelectedText()` and `await setSelectedText(\"text\")` for text manipulation.\n\n- **`registerShortcut(\"cmd+opt+p\", callback)`**: Registers a global hotkey that runs `callback`.\n- **`unregisterShortcut(\"cmd+opt+p\")`**: Removes a previously registered global hotkey.\n- **`keyboard.type(\"Hello!\")`**, `keyboard.tap(Key.Enter)`: Simulate keyboard input. Only use when you need to simulate keyboard input. Otherwise, use `getSelectedText()` and `setSelectedText(\"text\")` for text manipulation.\n- **`mouse.leftClick()`**, `mouse.setPosition({ x:100, y:100 })`: Control the mouse.\n- **`onClick(callback)`**, `onKeydown(callback)`: Listen for global mouse/keyboard events.\n\n## DB & Files\n\n1. **`db(nameOrData, defaultData?)`**: Simple JSON file store in `~/.kenv/db/`.\n   ```ts\n   let settings = await db('my-settings', { theme: 'dark' })\n   settings.data.user = 'KitUser' // Modify data\n   await settings.write() // Save changes\n   ```\n2. **`readFile(path)`**, **`writeFile(path, content)`**, **`readdir(path)`**, **`remove(path)`**, **`move(src, dest)`**, **`copyFile(src, dest)`**, **`pathExists(path)`**: Standard file system operations (mostly from fs-extra/fs/promises).\n3. **`ensureReadFile(path, defaultContent?)`**: Reads a file; if it doesn't exist, creates it with `defaultContent`.\n4. **`ensureDir(path)`**: Ensures a directory exists, creating it if necessary.\n5. **`download(url, destinationPath?)`**: Downloads a file. Returns a `Buffer` if `destinationPath` is omitted.\n6. **`trash(path)`**: Moves files/directories to the system trash.\n7. Path helpers: **`home(...parts)`**, **`kenvPath(...parts)`**, **`tmpPath(...parts)`**, `kitPath(...parts)`.\n\n## Exec & Shell\n\n1. **`exec(\"command with args\", options?)`**: Execute a shell command (uses `execa`).\n   ```ts\n   let { stdout } = await exec('git status --porcelain')\n   ```\n2. **`$(strings, ...values)`** (zx-like template literal):\n   ```ts\n   let branch = (await $`git branch --show-current`).stdout.trim()\n   await $`echo Current branch is ${branch}`\n   ```\n3. **`cd(directory)`**, **`pwd()`**, **`which(command)`**: Shell navigation and utility commands (from shelljs).\n4. **`term(commandOrOptions?)`**: Opens an interactive embedded terminal.\n\n## Network\n\n- **`get(url, config?)`**, **`post(url, data?, config?)`**, **`put(url, data?, config?)`**, **`patch(url, data?, config?)`**, **`del(url, config?)`**: Axios-based HTTP request functions.\n\n## System & OS Interaction\n\n- **`say(\"text to speak\")`**: Text-to-speech.\n- **`beep()`**: Plays the system beep sound.\n- **`getSelectedText()`**: Copies selected text from the foreground application.\n- **`setSelectedText(\"text to paste\")`**: Pastes text into the foreground application.\n- **`clipboard.readText()`**, `clipboard.writeText(\"text\")`, `clipboard.readImage()`, `clipboard.writeImage(buffer)`: Interact with the system clipboard.\n- **`getClipboardHistory()`**: Retrieves recent clipboard entries (if enabled in Script Kit).\n- **`screenshot(displayId?, bounds?)`**: Captures a screenshot, returns a `Buffer`.\n- **`applescript(\"osascript code\")`**: Execute AppleScript on macOS.\n\n## Audio/Video\n\n- **`mic(config?)`**: Record audio from microphone, returns `Buffer`. `mic.start(config?)` / `mic.stop()` for streaming.\n- **`webcam(config?)`**: Capture an image from webcam, returns `Buffer`.\n- **`playAudioFile(filePath)`**: Plays an audio file.\n\n## Utility\n\n- **`inspect(object)`**: Opens a new editor window with a JSON representation of the object.\n- **`dev(object)`**: Opens Chrome DevTools with the object assigned to `x` in the console.\n- **`uuid()`**: Generates a random UUID string.\n- **`createChoiceSearch(choices, config)`**: Utility for creating efficient client-side search functions for choices.\n- **`groupChoices(choices, options)`**: Utility for grouping choices by a key.\n- **`preventSubmit`**: A symbol returned from `onSubmit` to prevent the prompt from closing.\n- **`mainScript()`**: Exits the current script and returns to the Script Kit main menu.\n- **`run(\"other-script-name\", ...args)`**: Executes another Script Kit script from the same kenv.\n\n## Common Aliases & Libraries\n\n- **`path.join(...)`**, `path.basename(...)`, etc.: Standard Node.js `path` module functions are available on the global `path` object.\n- **`chalk`**: For colorizing terminal output (e.g., `console.log(chalk.blue(\"Hello\"))`).\n- **`replace(config)`**: Replaces text in files (from `replace-in-file`).\n\n## Script Flow Control\n\n- **`submit(valueToReturn)`**: Closes the current prompt and returns `valueToReturn` from the prompt function.\n- **`exit(exitCode?)`**: Terminates the script immediately.\n- **`wait(milliseconds)`**: Pauses script execution for a specified duration.\n\n## Cron / System Events (Metadata)\n\n- Use `// Schedule: cronExpression` (e.g., `// Schedule: 0 * * * *` for hourly) for scheduled scripts.\n- Use `// System: eventName` (e.g., `// System: wake`) to trigger scripts on system events.\n\n</MINI_DOCS>\n\n<TYPES>\n\n---\nFile: core.d.ts\nimport type { ChildProcess } from 'node:child_process'\nimport type { ProcessType, UI, Mode } from '../core/enum.js'\n\ntype ModifierKeys = 'cmd' | 'ctrl' | 'shift' | 'option' | 'alt'\n\nexport interface Choice<Value = any> {\n  name: string\n  slicedName?: string\n  value?: Value\n  description?: string\n  slicedDescription?: string\n  focused?: string\n  img?: string\n  icon?: string\n  html?: string\n  hasPreview?: boolean\n  preview?: string | ((input: string, state: AppState) => string | Promise<string>)\n  previewPath?: string\n  previewLang?: string\n  id?: string\n  shortcode?: string\n  trigger?: string\n  keyword?: string\n  className?: string\n  nameClassName?: string\n  tagClassName?: string\n  focusedClassName?: string\n  descriptionClassName?: string\n  nameHTML?: string\n  tag?: string\n  shortcut?: string\n  drag?:\n    | {\n        format?: string\n        data?: string\n      }\n    | string\n  onFocus?: (input: string, state: AppState) => string | Promise<string>\n  onSubmit?: (input: string, state: AppState) => void | symbol | Promise<void | symbol>\n  enter?: string\n  disableSubmit?: boolean\n  info?: boolean\n  exclude?: boolean | string\n  width?: number\n  height?: number\n  skip?: boolean\n  miss?: boolean\n  pass?: boolean | string\n  group?: string\n  userGrouped?: boolean\n  choices?: (Omit<Choice<any>, 'choices'> | string)[]\n  hideWithoutInput?: boolean\n  ignoreFlags?: boolean\n  selected?: boolean\n  actions?: Action[]\n  exact?: boolean\n  recent?: boolean\n  index?: number\n}\n\nexport interface ScoredChoice {\n  item: Choice<{ id: string; name: string; value: any }>\n  score: number\n  matches: {\n    [key: string]: [number, number][]\n  }\n  _: string\n}\n\nexport interface ScriptPathInfo {\n  command: string\n  filePath: string\n  kenv: string\n  id: string\n  icon?: string\n  timestamp?: number\n  needsDebugger?: boolean\n  compileStamp?: number\n  compileMessage?: string\n}\n\nexport interface ScriptMetadata extends Metadata {\n  shebang?: string\n  name?: string\n  menu?: string\n  description?: string\n  shortcut?: string\n  shortcode?: string\n  trigger?: string\n  friendlyShortcut?: string\n  alias?: string\n  author?: string\n  twitter?: string\n  github?: string\n  social?: string\n  social_url?: string\n  exclude?: boolean\n  watch?: string\n  type: ProcessType\n  tabs?: string[]\n  tag?: string\n  log?: boolean\n  hasFlags?: boolean\n  cmd?: string\n  option?: string\n  ctrl?: string\n  shift?: string\n  hasPreview?: boolean\n  logo?: string\n  /** @deprecated Use 'expand' instead */\n  snippet?: string\n  expand?: string\n  snippetdelay?: number\n  template?: boolean\n  'color-text'?: string\n  'color-primary'?: string\n  'color-secondary'?: string\n  'color-background'?: string\n  opacity?: string\n  preview?: Choice['preview']\n  previewPath?: string\n  debug?: boolean\n  cache?: boolean\n  note?: string\n  group?: string\n  keyword?: string\n  enter?: string\n  recent?: boolean\n  img?: string\n  postfix?: boolean\n}\n\nexport type Script = ScriptMetadata & ScriptPathInfo & Choice\n\nexport type Scriptlet = Script & {\n  group: string\n  inputs: string[]\n  tool: string\n  scriptlet: string\n  value: Script\n  cwd?: string\n  prepend?: string\n  append?: string\n  term?: undefined | boolean\n  shell?: string | boolean\n}\n\nexport type Snippet = Script & {\n  group: 'Snippets'\n  text: string\n  snippetKey?: string\n  postfix?: boolean\n}\n\nexport type PromptBounds = {\n  x?: number\n  y?: number\n  width?: number\n  height?: number\n}\n\n// export type PromptState = \"collapsed\" | \"expanded\"\n\nexport type PromptDb = {\n  screens: {\n    [screenId: string]: {\n      [script: string]: PromptBounds\n    }\n  }\n}\n\nexport type InputType =\n  | 'button'\n  | 'checkbox'\n  | 'color'\n  | 'date'\n  | 'datetime-local'\n  | 'email'\n  | 'file'\n  | 'hidden'\n  | 'image'\n  | 'month'\n  | 'number'\n  | 'password'\n  | 'radio'\n  | 'range'\n  | 'reset'\n  | 'search'\n  | 'submit'\n  | 'tel'\n  | 'text'\n  | 'time'\n  | 'url'\n  | 'week'\n\nexport type Shortcut = {\n  id?: string\n  key: string\n  name?: string\n  value?: any\n  onPress?: (input: string, state: AppState) => unknown | Promise<unknown>\n  bar?: 'right' | 'left' | ''\n  flag?: string\n  visible?: boolean\n  condition?: (choice: any) => boolean\n}\n\nexport interface PromptData {\n  id: string\n  key: string\n  scriptPath: string\n  description: string\n  flags: FlagsObject\n  hasPreview: boolean\n  keepPreview?: boolean\n  hint: string\n  input: string\n  inputRegex: string\n  kitArgs: string[]\n  kitScript: string\n  mode: Mode\n  name: string\n  placeholder: string\n  preview: string\n  previewWidthPercent: number\n  panel: string\n  secret: boolean\n  selected: string\n  strict: boolean\n  tabs: string[]\n  tabIndex: number\n  type: InputType\n  ui: UI\n  resize: boolean\n  placeholderOnly: boolean\n  scripts: boolean\n  shortcodes: { [key: string]: any }\n  defaultChoiceId: string\n  focusedId: string\n  footer: string\n  env: any\n  shortcuts: Shortcut[]\n  enter: string\n  choicesType: 'string' | 'array' | 'function' | 'async' | 'null'\n  x: number\n  y: number\n  width: number\n  height: number\n  itemHeight: number\n  inputHeight: number\n  defaultValue: string\n  focused: string\n  formData?: any\n  html?: string\n  theme?: any\n  /** @deprecated Kit now supports backgrounding windows */\n  alwaysOnTop?: boolean\n  skipTaskbar?: boolean\n  cwd?: string\n  hasOnNoChoices?: boolean\n  inputCommandChars?: string[]\n  inputClassName?: string\n  headerClassName?: string\n  footerClassName?: string\n  preload?: boolean\n  css?: string\n  preventCollapse?: boolean\n  hideOnEscape?: boolean\n  keyword?: string\n  multiple?: boolean\n  searchKeys?: string[]\n  show?: boolean\n  scriptlet?: boolean\n  actionsConfig?: ActionsConfig\n  grid?: boolean\n}\n\nexport type GenerateChoices = (input: string) => Choice<any>[] | Promise<Choice<any>[]>\n\nexport type GenerateActions = (input: string) => Action[] | Promise<Action[]>\n\nexport type Choices<Value> = (\n  | (string | Choice)[]\n  | Choice<Value>[]\n  | (() => Choice<Value>[])\n  | (() => Promise<Choice<Value>[]>)\n  | Promise<Choice<any>[]>\n  | GenerateChoices\n) & {\n  preload?: boolean\n}\n\nexport type Preview =\n  | string\n  | void\n  | (() => string)\n  | (() => void)\n  | (() => Promise<string>)\n  | (() => Promise<void>)\n  | ((input: string) => string)\n  | ((input: string) => void)\n  | ((input: string) => Promise<any>)\n  | ((input: string) => Promise<void>)\n\nexport type Actions =\n  | Action[]\n  | (() => Action[])\n  | (() => Promise<Action[]>)\n  | Promise<Action[]>\n  | GenerateActions\n\nexport type Panel =\n  | string\n  | void\n  | (() => string)\n  | (() => void)\n  | (() => Promise<string>)\n  | (() => Promise<void>)\n  | ((input: string) => string)\n  | ((input: string) => void)\n  | ((input: string) => Promise<any>)\n  | ((input: string) => Promise<void>)\n\nexport type Flags = {\n  [key: string]: boolean | string\n} & Partial<Record<ModifierKeys, boolean | string>>\n\nexport type FlagsWithKeys = {\n  [key: string]: {\n    shortcut?: string\n    name?: string\n    group?: string\n    description?: string\n    bar?: 'left' | 'right' | ''\n    flag?: string\n    preview?: Choice['preview']\n    hasAction?: boolean\n  }\n} & {\n  sortChoicesKey?: string[]\n  order?: string[]\n}\nexport type FlagsObject = FlagsWithKeys | boolean\nexport type ActionsConfig = {\n  name?: string\n  placeholder?: string\n  active?: string\n}\n\nexport type Action = {\n  name: string\n  description?: string\n  value?: any\n  shortcut?: string\n  group?: string\n  flag?: string\n  visible?: boolean\n  enter?: string\n  onAction?: ChannelHandler\n  condition?: Shortcut['condition']\n  close?: boolean\n  index?: number\n}\n\nexport interface AppState {\n  input?: string\n  actionsInput?: string\n  inputChanged?: boolean\n  flaggedValue?: any\n  flag?: string\n  tab?: string\n  tabIndex?: number\n  value?: any\n  index?: number\n  focused?: Choice\n  history?: Script[]\n  modifiers?: string[]\n  count?: number\n  name?: string\n  description?: string\n  script?: Script\n  submitted?: boolean\n  shortcut?: string\n  paste?: string\n  cursor?: number\n  preview?: string\n  keyword?: string\n  mode?: Mode\n  ui?: UI\n  multiple?: boolean\n  selected?: any[]\n  action?: Action\n}\n\nexport type ChannelHandler = (input?: string, state?: AppState) => void | Promise<void>\n\nexport type SubmitHandler = (\n  input?: string,\n  state?: AppState\n) => void | symbol | Promise<void | symbol>\n\nexport type PromptConfig = {\n  validate?: (input: string) => boolean | string | Promise<boolean | string>\n  choices?: Choices<any> | Panel\n  actions?: Action[] | Panel\n  initialChoices?: Choices<any> | Panel\n  html?: string\n  formData?: any\n  className?: string\n  flags?: FlagsObject\n  actions?: Action[]\n  preview?:\n    | string\n    | ((input: string, state: AppState) => string | Promise<string> | void | Promise<void>)\n  panel?: string | (() => string | Promise<string>)\n  onNoChoices?: ChannelHandler\n  onEscape?: ChannelHandler\n  onAbandon?: ChannelHandler\n  onBack?: ChannelHandler\n  onForward?: ChannelHandler\n  onUp?: ChannelHandler\n  onDown?: ChannelHandler\n  onLeft?: ChannelHandler\n  onRight?: ChannelHandler\n  onTab?: ChannelHandler\n  onKeyword?: ChannelHandler\n  onInput?: ChannelHandler\n  onActionsInput?: ChannelHandler\n  onChange?: ChannelHandler\n  onBlur?: ChannelHandler\n  onSelected?: ChannelHandler\n  onChoiceFocus?: ChannelHandler\n  onMessageFocus?: ChannelHandler\n  onPaste?: ChannelHandler\n  onDrop?: ChannelHandler\n  onDragEnter?: ChannelHandler\n  onDragLeave?: ChannelHandler\n  onDragOver?: ChannelHandler\n  onMenuToggle?: ChannelHandler\n  onInit?: ChannelHandler\n  onSubmit?: SubmitHandler\n  onValidationFailed?: ChannelHandler\n  onAudioData?: ChannelHandler\n  debounceInput?: number\n  debounceChoiceFocus?: number\n  keyword?: string\n  shortcodes?: {\n    [key: string]: any\n  }\n  env?: any\n  shortcuts?: Shortcut[]\n  show?: boolean\n  grid?: boolean\n  columns?: number\n  columnWidth?: number\n  rowHeight?: number\n  gridGap?: number\n  gridPadding?: number\n} & Partial<Omit<PromptData, 'choices' | 'id' | 'script' | 'preview'>>\n\nexport type CronExpression =\n  | `${string} ${string} ${string} ${string} ${string}`\n  | `${string} ${string} ${string} ${string} ${string} ${string}`\n\ntype OptModifier = 'opt' | 'option' | 'alt'\ntype CmdModifier = 'cmd' | 'command'\ntype CtrlModifier = 'ctrl' | 'control'\ntype ShiftModifier = 'shift'\n\ntype Modifier = OptModifier | CmdModifier | CtrlModifier | ShiftModifier\ntype Key = string\ntype Separator = ' ' | '+'\n\ntype ModifierCombination =\n  | Modifier\n  | `${Modifier}${Separator}${Modifier}`\n  | `${Modifier}${Separator}${Modifier}${Separator}${Modifier}`\n  | `${Modifier}${Separator}${Modifier}${Separator}${Modifier}${Separator}${Modifier}`\n\nexport type MetadataShortcut = `${ModifierCombination}${Separator}${Key}`\n\nexport interface Metadata {\n  /** The author's name */\n  author?: string\n  /**\n   * Specifies the name of the script as it appears in the Script Kit interface.\n   * If not provided, the file name will be used.\n   */\n  name?: string\n  /** Provides a brief description of the script's functionality. */\n  description?: string\n  /** The string displayed in the Enter button */\n  enter?: string\n  /** Defines an alternative search term to find this script */\n  alias?: string\n  /** Defines the path to an image to be used for the script */\n  image?: string\n  /** Defines a global keyboard shortcut to trigger the script. */\n  shortcut?: MetadataShortcut\n  /**\n   * Similar to {@link trigger}, defines a string that, when typed in the main menu\n   * followed by a space, immediately executes the script.\n   */\n  shortcode?: string\n  /**\n   * Similar to {@link shortcode}, defines a string that, when typed in the main menu,\n   * immediately executes the script.\n   */\n  trigger?: string\n  /** @deprecated Use `expand` instead. Designates the script as a text expansion snippet and specifies the trigger text. */\n  snippet?: string\n  /** Designates the script as a text expansion snippet and specifies the trigger text. */\n  expand?: string\n  /** Associates a keyword with the script for easier discovery in the main menu. */\n  keyword?: string\n  /**\n   * Indicates that user input in the main menu should be passed as an argument to the script.\n   * \"true\" indicates that the entire input should be passed as an argument\n   * A string indicates a \"postfix\", then match the text before the string\n   * A RegExp indicates a \"pattern\" to match\n   * */\n  pass?: boolean | string\n  /** Assigns the script to a specific group for organization in the main menu. */\n  group?: string\n  /** Excludes the script from appearing in the main menu. */\n  exclude?: boolean\n  /** Specifies a file or directory to watch for changes, triggering the script upon modifications. */\n  watch?: string\n  /** Indicates whether to disable logs */\n  log?: boolean\n  /** Designates the script as a background process, running continuously in the background. */\n  background?: boolean | 'auto'\n  /** Associates the script with system events such as sleep, wake, or shutdown. */\n  system?:\n    | 'suspend'\n    | 'resume'\n    | 'on-ac'\n    | 'on-battery'\n    | 'shutdown'\n    | 'lock-screen'\n    | 'unlock-screen'\n    /** macOS only */\n    | 'user-did-become-active'\n    /** macOS only */\n    | 'user-did-resign-active'\n\n  /** Specifies a cron expression for scheduling the script to run at specific times or intervals. */\n  schedule?: CronExpression\n  /** Indicates whether the script can be run through the rest API */\n  access?: 'public' | 'key' | 'private'\n  /** Indicates whether the script can return a response through the rest API */\n  response?: boolean\n  /** Indicates the order of the script in its group in the main menu */\n  index?: number\n  /** Indicates whether to disable logs for the script */\n  log?: boolean\n  /** Optimization: if this script won't require a prompt, set this to false */\n  prompt?: boolean\n  /** Indicates the tag of the script */\n  tag?: string\n}\n\nexport interface ProcessInfo {\n  pid: number\n  scriptPath: string\n  child: ChildProcess\n  type: ProcessType\n  values: any[]\n  date: number\n}\n\n\n---\nFile: globals.d.ts\ntype ReadFileOptions = Parameters<typeof import('node:fs/promises').readFile>[1]\n\nexport type EnsureReadFile = (\n  path: string,\n  defaultContent?: string,\n  options?: ReadFileOptions\n) => Promise<string>\n\nexport type EnsureReadJson = <T>(\n  path: string,\n  defaultContent: T,\n  options?: Parameters<typeof import('fs-extra').readJson>[1]\n) => Promise<T>\n\ndeclare global {\n  //process\n  var cwd: typeof process.cwd\n  var pid: typeof process.pid\n  var stderr: typeof process.stderr\n  var stdin: typeof process.stdin\n  var stdout: typeof process.stdout\n  var uptime: typeof process.uptime\n  //axios\n  /**\n   * An alias for axios.get\n   * #### get example\n   * ```ts\n   * const result = await get(\"https://jsonplaceholder.typicode.com/todos/1\");\n   * await editor(JSON.stringify(result.data));\n   * ```\n   * #### get active app on mac\n   * ```ts\n   * // MAC ONLY!\n   * // Always hide immmediately if you're not going to show a prompt\n   * await hide()\n   * // but you can import that package directly (or another similar package) if you prefer\n   * let info = await getActiveAppInfo()\n   * if (info.bundleIdentifier === \"com.google.Chrome\") {\n   *   await keyboard.pressKey(Key.LeftSuper, Key.T)\n   *   await keyboard.releaseKey(Key.LeftSuper, Key.T)\n   * }\n   * ```\n   * [Examples](https://scriptkit.com?query=get) | [Docs](https://johnlindquist.github.io/kit-docs/#get) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=get)\n   */\n  var get: import('axios').AxiosInstance['get']\n  /**\n   * An alias for axios.put\n   * #### put example\n   * ```ts\n   * const result = await put(\"https://jsonplaceholder.typicode.com/posts/1\", {\n   *   title: \"foo\",\n   * });\n   * await editor(JSON.stringify(result.data));\n   * ```\n   * [Examples](https://scriptkit.com?query=put) | [Docs](https://johnlindquist.github.io/kit-docs/#put) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=put)\n   */\n  var put: import('axios').AxiosInstance['put']\n  /**\n   * An alias for axios.post\n   * #### post example\n   * ```ts\n   * const result = await post(\"https://jsonplaceholder.typicode.com/posts\", {\n   *   title: \"foo\",\n   *   body: \"bar\",\n   *   userId: 1,\n   * });\n   * await editor(JSON.stringify(result.data));\n   * ```\n   * [Examples](https://scriptkit.com?query=post) | [Docs](https://johnlindquist.github.io/kit-docs/#post) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=post)\n   */\n  var post: import('axios').AxiosInstance['post']\n  /**\n   * An alias for axios.patch\n   * #### patch example\n   * ```ts\n   * const result = await patch(\"https://jsonplaceholder.typicode.com/posts/1\", {\n   *   title: \"foo\",\n   * });\n   * await editor(JSON.stringify(result.data));\n   * ```\n   * [Examples](https://scriptkit.com?query=patch) | [Docs](https://johnlindquist.github.io/kit-docs/#patch) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=patch)\n   */\n  var patch: import('axios').AxiosInstance['patch']\n  /**\n   * An alias for axios.delete\n   * #### del example\n   * ```ts\n   * const result = await del(\"https://jsonplaceholder.typicode.com/posts/1\");\n   * await editor(JSON.stringify(result.data));\n   * ```\n   * [Examples](https://scriptkit.com?query=del) | [Docs](https://johnlindquist.github.io/kit-docs/#del) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=del)\n   */\n  var del: import('axios').AxiosInstance['delete']\n  //chalk\n  var chalk: typeof import('chalk').default\n  //child_process\n  var spawn: typeof import('child_process').spawn\n  var spawnSync: typeof import('child_process').spawnSync\n  var fork: typeof import('child_process').fork\n\n  // custom\n  var ensureReadFile: EnsureReadFile\n  var ensureReadJson: EnsureReadJson\n  // execa\n  /**\n   * `exec` uses allows you to run shell commands within your script:\n   * > Note: Execa is an alias for `execaCommand` from the `execa` npm package with \"shell\" and \"all\" true by default.\n   * #### exec example\n   * ```ts\n   * let result = await exec(`ls -la`, {\n   *   cwd: home(), // where to run the command\n   *   shell: \"/bin/zsh\", // if you're expecting to use specific shell features/configs\n   *   all: true, // pipe both stdout and stderr to \"all\"\n   * })\n   * inspect(result.all)\n   * ```\n   * #### exec with prompt info\n   * ```ts\n   * // It's extremely common to show the user what's happening while your command is running. This is often done by using `div` with `onInit` + `sumbit`:\n   * let result = await div({\n   *   html: md(`# Loading your home directory`),\n   *   onInit: async () => {\n   *     let result = await exec(`sleep 2 && ls -la`, {\n   *       cwd: home(), // where to run the command\n   *       shell: \"/bin/zsh\", // use if you're expecting the command to load in your .zshrc\n   *       all: true, // pipe both stdout and stderr to \"all\"\n   *     })\n   * submit(result.all)\n   *   },\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=exec) | [Docs](https://johnlindquist.github.io/kit-docs/#exec) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=exec)\n   */\n  var exec: typeof import('execa').execaCommand\n  var execa: typeof import('execa').execa\n  var execaSync: typeof import('execa').execaSync\n  var execaCommand: typeof import('execa').execaCommand\n  var execaCommandSync: typeof import('execa').execaCommandSync\n  var execaNode: typeof import('execa').execaNode\n  var $: typeof import('execa').$\n  /**\n   * Download a file from a URL\n   * #### download example\n   * ```ts\n   * const url = \"https://github.com/johnlindquist/kit/archive/refs/heads/main.zip\";\n   * const destination = home(\"Downloads\");\n   * await download(url, destination);\n   * ```\n   * [Examples](https://scriptkit.com?query=download) | [Docs](https://johnlindquist.github.io/kit-docs/#download) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=download)\n   */\n  var download: typeof import('download')\n  var emptyDir: typeof import('fs-extra').emptyDir\n  var emptyDirSync: typeof import('fs-extra').emptyDirSync\n  var ensureFile: typeof import('fs-extra').ensureFile\n  var ensureFileSync: typeof import('fs-extra').ensureFileSync\n  var ensureDir: typeof import('fs-extra').ensureDir\n  var ensureDirSync: typeof import('fs-extra').ensureDirSync\n  var ensureLink: typeof import('fs-extra').ensureLink\n  var ensureLinkSync: typeof import('fs-extra').ensureLinkSync\n  var ensureSymlink: typeof import('fs-extra').ensureSymlink\n  var ensureSymlinkSync: typeof import('fs-extra').ensureSymlinkSync\n  var mkdirp: typeof import('fs-extra').mkdirp\n  var mkdirpSync: typeof import('fs-extra').mkdirpSync\n  var mkdirs: typeof import('fs-extra').mkdirs\n  var outputFile: typeof import('fs-extra').outputFile\n  var outputFileSync: typeof import('fs-extra').outputFileSync\n  var outputJson: typeof import('fs-extra').outputJson\n  var outputJsonSync: typeof import('fs-extra').outputJsonSync\n  var pathExists: typeof import('fs-extra').pathExists\n  var pathExistsSync: typeof import('fs-extra').pathExistsSync\n  var readJson: typeof import('fs-extra').readJson\n  var readJsonSync: typeof import('fs-extra').readJsonSync\n  var remove: typeof import('fs-extra').remove\n  var removeSync: typeof import('fs-extra').removeSync\n  var writeJson: typeof import('fs-extra').writeJson\n  var writeJsonSync: typeof import('fs-extra').writeJsonSync\n  var move: typeof import('fs-extra').move\n  var moveSync: typeof import('fs-extra').moveSync\n  //fs/promises\n  var readFile: typeof import('node:fs/promises').readFile\n  var readFileSync: typeof import('node:fs').readFileSync\n  var writeFile: typeof import('node:fs/promises').writeFile\n  var writeFileSync: typeof import('node:fs').writeFileSync\n  var appendFile: typeof import('node:fs/promises').appendFile\n  var appendFileSync: typeof import('node:fs').appendFileSync\n  var readdir: typeof import('node:fs/promises').readdir\n  var readdirSync: typeof import('node:fs').readdirSync\n  var copyFile: typeof import('node:fs/promises').copyFile\n  var copyFileSync: typeof import('node:fs').copyFileSync\n\n  var stat: typeof import('node:fs/promises').stat\n  var lstat: typeof import('node:fs/promises').lstat\n\n  var rmdir: typeof import('node:fs/promises').rmdir\n  var unlink: typeof import('node:fs/promises').unlink\n  var symlink: typeof import('node:fs/promises').symlink\n  var readlink: typeof import('node:fs/promises').readlink\n  var realpath: typeof import('node:fs/promises').realpath\n  var access: typeof import('node:fs/promises').access\n\n  var chown: typeof import('fs/promises').chown\n  var lchown: typeof import('node:fs/promises').lchown\n  var utimes: typeof import('node:fs/promises').utimes\n  var lutimes: typeof import('node:fs/promises').lutimes\n\n  var rename: typeof import('node:fs/promises').rename\n\n  //fs\n  var createReadStream: typeof import('fs').createReadStream\n  var createWriteStream: typeof import('fs').createWriteStream\n\n  /**\n   * Create a handlebars template compiler\n   * #### compile example\n   * ```ts\n   * const compiler = compile(`\n   * Hello {{name}}\n   * Have a {{mood}} day!\n   * {{#if from}}\n   * From {{author}}\n   * {{/if}}\n   * `);\n   * const result = compiler({\n   *   name: \"John\",\n   *   mood: \"great\",\n   *   author: \"Script Kit\",\n   *   from: true,\n   * });\n   * await div(result);\n   * ```\n   * [Examples](https://scriptkit.com?query=compile) | [Docs](https://johnlindquist.github.io/kit-docs/#compile) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=compile)\n   */\n  var compile: typeof import('handlebars').compile\n\n  /**\n   * Convert markdown to HTML for rendering in prompts\n   * #### md example\n   * ```ts\n   * const html = md(`# You're the Best\n   * * Thanks for using Script Kit!\n   * `);\n   * await div(html);\n   * ```\n   * [Examples](https://scriptkit.com?query=md) | [Docs](https://johnlindquist.github.io/kit-docs/#md) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=md)\n   */\n  var md: typeof import('../globals/marked').md\n  var marked: typeof import('marked').marked\n\n  /**\n   * Generate a UUID\n   * #### uuid example\n   * ```ts\n   * const id = uuid();\n   * await editor(id);\n   * ```\n   * [Examples](https://scriptkit.com?query=uuid) | [Docs](https://johnlindquist.github.io/kit-docs/#uuid) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=uuid)\n   */\n  var uuid: typeof import('node:crypto').randomUUID\n\n  //replace-in-file\n  /**\n   * Replace a string or regex in one or more files\n   * #### replace example\n   * ```ts\n   * const mdPath = kenvPath(\"sticky.md\");\n   * await replace({\n   *   files: [mdPath],\n   *   from: /nice/g, // replace all instances of \"nice\"\n   *   to: \"great\",\n   * });\n   * ```\n   * [Examples](https://scriptkit.com?query=replace) | [Docs](https://johnlindquist.github.io/kit-docs/#replace) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=replace)\n   */\n  var replace: typeof import('replace-in-file').replaceInFile\n  // stream\n  var Writable: typeof import('node:stream').Writable\n  var Readable: typeof import('node:stream').Readable\n  var Duplex: typeof import('node:stream').Duplex\n  var Transform: typeof import('node:stream').Transform\n\n  /**\n   * Glob a list of files\n   * #### globby example\n   * ```ts\n   * const kenvScripts = kenvPath(\"scripts\", \"*.ts\");\n   * const kenvScriptlets = kenvPath(\"scriptlets\", \"*.md\");\n   * const pathsForScriptsAndScriptlets = await globby([\n   *   kenvScripts,\n   *   kenvScriptlets,\n   * ]);\n   * await editor(JSON.stringify(pathsForScriptsAndScriptlets, null, 2));\n   * ```\n   * [Examples](https://scriptkit.com?query=globby) | [Docs](https://johnlindquist.github.io/kit-docs/#globby) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=globby)\n   */\n  var globby: typeof import('globby').globby\n}\n\n\n---\nFile: io.d.ts\nimport { EventEmitter } from 'node:events'\nexport declare enum EventType {\n  EVENT_KEY_PRESSED = 4,\n  EVENT_KEY_RELEASED = 5,\n  EVENT_MOUSE_CLICKED = 6,\n  EVENT_MOUSE_PRESSED = 7,\n  EVENT_MOUSE_RELEASED = 8,\n  EVENT_MOUSE_MOVED = 9,\n  EVENT_MOUSE_WHEEL = 11,\n}\nexport interface UiohookKeyboardEvent {\n  type: EventType.EVENT_KEY_PRESSED | EventType.EVENT_KEY_RELEASED\n  time: number\n  altKey: boolean\n  ctrlKey: boolean\n  metaKey: boolean\n  shiftKey: boolean\n  keycode: number\n  key: string\n  text: string\n}\nexport interface UiohookMouseEvent {\n  type:\n    | EventType.EVENT_MOUSE_CLICKED\n    | EventType.EVENT_MOUSE_MOVED\n    | EventType.EVENT_MOUSE_PRESSED\n    | EventType.EVENT_MOUSE_RELEASED\n  time: number\n  altKey: boolean\n  ctrlKey: boolean\n  metaKey: boolean\n  shiftKey: boolean\n  x: number\n  y: number\n  button: unknown\n  clicks: number\n}\nexport interface UiohookWheelEvent {\n  type: EventType.EVENT_MOUSE_WHEEL\n  time: number\n  altKey: boolean\n  ctrlKey: boolean\n  metaKey: boolean\n  shiftKey: boolean\n  x: number\n  y: number\n  clicks: number\n  amount: number\n  direction: WheelDirection\n  rotation: number\n}\nexport declare enum WheelDirection {\n  VERTICAL = 3,\n  HORIZONTAL = 4,\n}\nexport declare const UiohookKey: {\n  readonly Backspace: 14\n  readonly Tab: 15\n  readonly Enter: 28\n  readonly CapsLock: 58\n  readonly Escape: 1\n  readonly Space: 57\n  readonly PageUp: 3657\n  readonly PageDown: 3665\n  readonly End: 3663\n  readonly Home: 3655\n  readonly ArrowLeft: 57419\n  readonly ArrowUp: 57416\n  readonly ArrowRight: 57421\n  readonly ArrowDown: 57424\n  readonly Insert: 3666\n  readonly Delete: 3667\n  readonly 0: 11\n  readonly 1: 2\n  readonly 2: 3\n  readonly 3: 4\n  readonly 4: 5\n  readonly 5: 6\n  readonly 6: 7\n  readonly 7: 8\n  readonly 8: 9\n  readonly 9: 10\n  readonly A: 30\n  readonly B: 48\n  readonly C: 46\n  readonly D: 32\n  readonly E: 18\n  readonly F: 33\n  readonly G: 34\n  readonly H: 35\n  readonly I: 23\n  readonly J: 36\n  readonly K: 37\n  readonly L: 38\n  readonly M: 50\n  readonly N: 49\n  readonly O: 24\n  readonly P: 25\n  readonly Q: 16\n  readonly R: 19\n  readonly S: 31\n  readonly T: 20\n  readonly U: 22\n  readonly V: 47\n  readonly W: 17\n  readonly X: 45\n  readonly Y: 21\n  readonly Z: 44\n  readonly Numpad0: 82\n  readonly Numpad1: 79\n  readonly Numpad2: 80\n  readonly Numpad3: 81\n  readonly Numpad4: 75\n  readonly Numpad5: 76\n  readonly Numpad6: 77\n  readonly Numpad7: 71\n  readonly Numpad8: 72\n  readonly Numpad9: 73\n  readonly NumpadMultiply: 55\n  readonly NumpadAdd: 78\n  readonly NumpadSubtract: 74\n  readonly NumpadDecimal: 83\n  readonly NumpadDivide: 3637\n  readonly NumpadEnd: number\n  readonly NumpadArrowDown: number\n  readonly NumpadPageDown: number\n  readonly NumpadArrowLeft: number\n  readonly NumpadArrowRight: number\n  readonly NumpadHome: number\n  readonly NumpadArrowUp: number\n  readonly NumpadPageUp: number\n  readonly NumpadInsert: number\n  readonly NumpadDelete: number\n  readonly F1: 59\n  readonly F2: 60\n  readonly F3: 61\n  readonly F4: 62\n  readonly F5: 63\n  readonly F6: 64\n  readonly F7: 65\n  readonly F8: 66\n  readonly F9: 67\n  readonly F10: 68\n  readonly F11: 87\n  readonly F12: 88\n  readonly F13: 91\n  readonly F14: 92\n  readonly F15: 93\n  readonly F16: 99\n  readonly F17: 100\n  readonly F18: 101\n  readonly F19: 102\n  readonly F20: 103\n  readonly F21: 104\n  readonly F22: 105\n  readonly F23: 106\n  readonly F24: 107\n  readonly Semicolon: 39\n  readonly Equal: 13\n  readonly Comma: 51\n  readonly Minus: 12\n  readonly Period: 52\n  readonly Slash: 53\n  readonly Backquote: 41\n  readonly BracketLeft: 26\n  readonly Backslash: 43\n  readonly BracketRight: 27\n  readonly Quote: 40\n  readonly Ctrl: 29\n  readonly CtrlRight: 3613\n  readonly Alt: 56\n  readonly AltRight: 3640\n  readonly Shift: 42\n  readonly ShiftRight: 54\n  readonly Meta: 3675\n  readonly MetaRight: 3676\n  readonly NumLock: 69\n  readonly ScrollLock: 70\n  readonly PrintScreen: 3639\n}\ndeclare interface UiohookNapi {\n  on(\n    event: 'input',\n    listener: (e: UiohookKeyboardEvent | UiohookMouseEvent | UiohookWheelEvent) => void\n  ): this\n  on(event: 'keydown', listener: (e: UiohookKeyboardEvent) => void): this\n  on(event: 'keyup', listener: (e: UiohookKeyboardEvent) => void): this\n  on(event: 'mousedown', listener: (e: UiohookMouseEvent) => void): this\n  on(event: 'mouseup', listener: (e: UiohookMouseEvent) => void): this\n  on(event: 'mousemove', listener: (e: UiohookMouseEvent) => void): this\n  on(event: 'click', listener: (e: UiohookMouseEvent) => void): this\n  on(event: 'wheel', listener: (e: UiohookWheelEvent) => void): this\n}\ndeclare class UiohookNapi extends EventEmitter {\n  private handler\n  start(): void\n  stop(): void\n  keyTap(key: number, modifiers?: number[]): void\n  keyToggle(key: number, toggle: 'down' | 'up'): void\n}\nexport declare const uIOhook: UiohookNapi\n\n\n---\nFile: kit.d.ts\nimport type { Low } from 'lowdb'\nimport type { format, formatDistanceToNow } from '../utils/date.js'\nimport type { RestEndpointMethodTypes } from '@octokit/plugin-rest-endpoint-methods'\nimport type {\n  Action,\n  Choice,\n  Choices,\n  FlagsObject,\n  ActionsConfig,\n  Panel,\n  Preview,\n  PromptConfig,\n  ScoredChoice,\n  Script,\n  Shortcut,\n  Flags,\n} from './core.js'\nimport { ChannelHandler } from './core.js'\nimport type { ConfigOptions, Options } from 'quick-score'\n// Import AI SDK specific types for global declaration\nimport type { CoreMessage, Tool, ToolCall, FinishReason, LanguageModel, LanguageModelV1 } from 'ai'\nimport type { AssistantOutcome, AssistantLastInteraction, ToolCallPart } from '../lib/ai.js' // Import our custom result types\nimport type { ZodTypeAny } from 'zod' // Import Zod types for global declaration\n\nexport interface Arg {\n  [key: string]: any\n  <T = string>(\n    placeholderOrConfig?: string | PromptConfig,\n    choicesOrPanel?: Choices<T> | Panel,\n    actionsOrPreview?: Action[] | Preview\n  ): Promise<T>\n}\n\nexport type Select = <T = any[]>(\n  placeholderOrConfig: string | PromptConfig,\n  choices: Choices<T>,\n  actions?: Action[]\n) => Promise<T>\n\nexport type Grid = <T = any[]>(\n  placeholderOrConfig: string | PromptConfig,\n  choices: Choices<T>,\n  actions?: Action[]\n) => Promise<T>\n\nexport interface EnvConfig extends PromptConfig {\n  reset?: boolean\n}\nexport interface Env {\n  (envKey: string, promptConfig?: string | EnvConfig | (() => Promise<string>)): Promise<string>\n  [key: string]: any\n}\n\nexport interface Args extends Array<string> {}\n\nexport type UpdateArgs = (args: string[]) => void\n\nexport type PathFn = (...pathParts: string[]) => string\n\nexport type Inspect = (data: any, extension?: string) => Promise<void>\n\nexport type Store = (\n  key: string,\n  initialData?: any\n) => Promise<InstanceType<typeof import('keyv').default>>\n\ntype DBExtensions<T> = {\n  data: T extends string[] ? { items: T } : T\n  dbPath: string\n  clear: () => Promise<void>\n  reset: () => Promise<void>\n}\n\ntype DBItems<T> = T extends string[] ? { items: T } : {}\n\nexport type DBKeyOrPath<T> = string | T | (() => Promise<T>)\nexport type DBData<T> = T | (() => Promise<T>)\nexport type DBReturnType<T> = Low<T> & DBItems<T> & DBExtensions<T> & T\n\nexport type DB = <\n  T = {\n    [key: string]: any\n  },\n>(\n  dataOrKeyOrPath?: DBKeyOrPath<T>,\n  data?: DBData<T>,\n  fromCache?: boolean\n) => Promise<DBReturnType<T>>\n\nexport type OnTab = (name: string, fn: (input?: string) => void | Promise<void>) => void\n\nexport interface Trace {\n  enabled: boolean\n  begin: (\n    fields: Parameters<InstanceType<typeof import('chrome-trace-event').Tracer>['begin']>[0]\n  ) => void\n  end: (\n    fields: Parameters<InstanceType<typeof import('chrome-trace-event').Tracer>['end']>[0]\n  ) => void\n  instant: (\n    fields: Parameters<InstanceType<typeof import('chrome-trace-event').Tracer>['instantEvent']>[0]\n  ) => void\n  flush: () => void\n}\n\nexport type KitModuleLoader = (packageName: string, ...moduleArgs: string[]) => Promise<any>\nexport type Edit = (\n  file: string,\n  dir?: string,\n  line?: string | number,\n  col?: string | number\n) => Promise<void>\n\nexport type Browse = (url: string) => Promise<void>\n\nexport type Wait = (time: number, submitValue?: any) => Promise<void>\n\nexport type IsCheck = (file: string) => Promise<boolean>\n\nexport type PathResolver = (dir: string) => (...pathParts: string[]) => string\n\nexport type GetScripts = (fromCache?: boolean) => Promise<Script[]>\n\nexport type FlagFn = (flags: FlagsObject, options?: ActionsConfig) => Promise<void>\nexport type ActionsFn = (actions: Action[], options?: ActionsConfig) => Promise<void>\nexport type PrepFlags = (flags: FlagsObject) => FlagsObject\n\nexport type SelectKitEditor = (reset: boolean) => Promise<string>\n\nexport interface SelectScript {\n  (message?: string, fromCache?: boolean, xf?: (x: Script[]) => Script[]): Promise<Script>\n  (\n    message: PromptConfig,\n    fromCache?: boolean,\n    xf?: (x: Script[]) => Script[]\n  ): Promise<Script | string>\n}\n\nexport interface Kenv {\n  name: string\n  dirPath: string\n}\nexport type SelectKenv = (config?: PromptConfig, ignorePattern?: RegExp) => Promise<Kenv>\n\nexport type Highlight = (\n  markdown: string,\n  containerClass?: string,\n  injectStyles?: string\n) => Promise<string>\n\nexport type PathDefaultMissingValues = 'select-anyway' | 'create-file' | 'create-folder'\nexport interface PathConfig extends PromptConfig {\n  startPath?: string\n  onlyDirs?: boolean\n  showHidden?: boolean\n  missingChoices?: Choice[]\n}\n\ntype PathPicker = (config?: string | PathConfig, actions?: Action[]) => Promise<string>\nexport type PathSelector = typeof import('path') & PathPicker\n\ntype GistOptions = {\n  fileName?: string\n  description?: string\n  isPublic?: boolean\n}\nexport type CreateGist = (\n  content: string,\n  options?: GistOptions\n) => Promise<RestEndpointMethodTypes['gists']['create']['response']['data']>\n\nexport type SetShortcuts = (shortcuts: Shortcut[]) => Promise<void>\nexport interface KitApi {\n  path: PathSelector\n  db: DB\n\n  wait: Wait\n\n  checkProcess: (processId: number) => string\n\n  home: PathFn\n  isFile: IsCheck\n  isDir: IsCheck\n  isBin: IsCheck\n  createPathResolver: PathResolver\n  arg: Arg\n  select: Select\n  mini: Arg\n  micro: Arg\n  env: Env\n  argOpts: string[]\n\n  kitPath: PathFn\n  kenvPath: PathFn\n  tmpPath: PathFn\n  kenvTmpPath: PathFn\n\n  inspect: Inspect\n\n  onTab: OnTab\n\n  attemptImport: KitModuleLoader\n  silentAttemptImport: KitModuleLoader\n  npm: KitModuleLoader\n  setup: KitModuleLoader\n\n  edit: Edit\n  browse: Browse\n\n  args: Args\n  updateArgs: UpdateArgs\n\n  kitScript: string\n\n  terminal: (script: string) => Promise<string>\n  iterm: (iterm: string) => Promise<string>\n  hyper: (hyper: string) => Promise<string>\n\n  onTabs: {\n    name: string\n    fn: (input?: string) => void | Promise<any>\n  }[]\n  onTabIndex: number\n\n  kitPrevChoices: Choices<any>\n\n  getScripts: GetScripts\n\n  memoryMap: Map<string, any>\n\n  selectKitEditor: SelectKitEditor\n\n  run: Run\n\n  flag: Flags\n  setFlags: FlagFn\n  prepFlags: PrepFlags\n  selectScript: SelectScript\n  selectKenv: SelectKenv\n  highlight: Highlight\n  projectPath: PathFn\n  createGist: CreateGist\n  setShortcuts: SetShortcuts\n  isWin: boolean\n  isMac: boolean\n  isLinux: boolean\n  cmd: 'cmd' | 'ctrl'\n  formatDate: typeof format\n  formatDateToNow: typeof formatDistanceToNow\n}\n\ninterface KeyValue {\n  [key: string]: any\n}\n\nexport type Run = (command?: string, ...args: string[]) => Promise<any>\n\ntype Utils = typeof import('../core/utils')\n\ndeclare global {\n  /**\n   * The `path` prompt allows you to select a file or folder from the file system. You navigate with tab/shift+tab (or right/left arrows) and enter to select.\n   * 1. Optional: The first argument is the initial directory to open with. Defaults to the home directory.\n   * #### path example\n   * ```ts\n   * let selectedFile = await path()\n   * ```\n   * #### path example startpath\n   * ```ts\n   * const projectPath = await path({\n   *   startPath: home(\"dev\"),\n   *   hint: \"Select a project from your dev folder\",\n   * });\n   * await editor(projectPath);\n   * ```\n   * [Examples](https://scriptkit.com?query=path) | [Docs](https://johnlindquist.github.io/kit-docs/#path) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=path)\n   */\n  var path: PathSelector\n  /**\n   * Open a file using the KIT_EDITOR env variable\n   * (For example, set KIT_EDITOR=/usr/local/bin/cursor)\n   * #### edit example\n   * ```ts\n   * const zshrcPath = home(\".zshrc\");\n   * await edit(zshrcPath);\n   * ```\n   * [Examples](https://scriptkit.com?query=edit) | [Docs](https://johnlindquist.github.io/kit-docs/#edit) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=edit)\n   */\n  var edit: Edit\n  /**\n   * Open a URL in the default browser.\n   * #### browse example\n   * ```ts\n   * // When executing a command without UI, \"hide\" allows you to instantly hide the UI rather than waiting for the command to finish\n   * await hide();\n   * await browse(\"https://scriptkit.com\");\n   * ```\n   * [Examples](https://scriptkit.com?query=browse) | [Docs](https://johnlindquist.github.io/kit-docs/#browse) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=browse)\n   */\n  var browse: Browse\n\n  /**\n   * Create a path relative to the kit directory.\n   * #### kitpath example\n   * ```ts\n   * const kitLogs = kitPath(\"logs\"); //~/.kit/logs\n   * ```\n   * [Examples](https://scriptkit.com?query=kitPath) | [Docs](https://johnlindquist.github.io/kit-docs/#kitPath) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=kitPath)\n   */\n  var kitPath: PathFn\n  /**\n   * Create a path relative to the \"kenv\" (kit environment) directory\n   * #### kenvPath example\n   * ```ts\n   * const scriptsPath = kenvPath(\"scripts\");\n   * const scripts = await readdir(scriptsPath);\n   * await editor(JSON.stringify(scripts, null, 2));\n   * ```\n   * [Examples](https://scriptkit.com?query=kenvPath) | [Docs](https://johnlindquist.github.io/kit-docs/#kenvPath) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=kenvPath)\n   */\n  var kenvPath: PathFn\n  /**\n   * Create a path relative to a \"kit\" directory in the system temp directory\n   * > Note: The tmp directory is symlinked to the ~/.kenv/tmp directory for easy access\n   * #### tmpPath example\n   * ```ts\n   * const tmpTestTxtPath = tmpPath(\"test.txt\");\n   * const content = await ensureReadFile(tmpTestTxtPath, \"Hello World\");\n   * await editor(\n   *   JSON.stringify(\n   *     {\n   *       tmpTestTxtPath,\n   *       content,\n   *     },\n   *     null,\n   *     2\n   *   )\n   * );\n   * ```\n   * [Examples](https://scriptkit.com?query=tmpPath) | [Docs](https://johnlindquist.github.io/kit-docs/#tmpPath) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=tmpPath)\n   */\n  var tmpPath: PathFn\n  var kenvTmpPath: PathFn\n\n  /**\n   * Attempts to import a module.\n   * #### attemptImport example\n   * ```ts\n   * let module = await attemptImport(\"lodash\")\n   * ```\n   * [Examples](https://scriptkit.com?query=attemptImport) | [Docs](https://johnlindquist.github.io/kit-docs/#attemptImport) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=attemptImport)\n   */\n  var attemptImport: KitModuleLoader\n  /**\n   * Attempts to import a module silently.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### silentAttemptImport example\n   * ```ts\n   * let module = await silentAttemptImport(\"lodash\")\n   * ```\n   * [Examples](https://scriptkit.com?query=silentAttemptImport) | [Docs](https://johnlindquist.github.io/kit-docs/#silentAttemptImport) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=silentAttemptImport)\n   */\n  var silentAttemptImport: KitModuleLoader\n  /**\n   * > Deprecated: Use standard `import` instead.\n   * Installs an npm package.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### npm example\n   * ```ts\n   * await npm(\"lodash\")\n   * ```\n   * [Examples](https://scriptkit.com?query=npm) | [Docs](https://johnlindquist.github.io/kit-docs/#npm) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=npm)\n   */\n  var npm: KitModuleLoader\n  var npmInstall: (packageName: string) => Promise<void>\n  var installMissingPackage: (packageName: string) => Promise<void>\n  /**\n   * Run another script from the same kenv\n   * #### run example\n   * ```ts\n   * // Assuming you have a \"hello-world.ts\" script next to this file\n   * await run(\"hello-world\");\n   * ```\n   * #### run example arg\n   * ```ts\n   * // Assuming the hello-world script has an: await arg(\"Enter your name\")\n   * await run(\"hello-world\", \"John\");\n   * ```\n   * [Examples](https://scriptkit.com?query=run) | [Docs](https://johnlindquist.github.io/kit-docs/#run) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=run)\n   */\n  var run: Run\n  var setup: KitModuleLoader\n\n  /**\n   * Load an env var if it exists, prompt to set the env var if not:\n   * You can also prompt the user to set the env var using a prompt by nesting it in an async function:\n   * #### env example\n   * ```ts\n   * // Write write \"MY_ENV_VAR\" to ~/.kenv/.env\n   * let MY_ENV_VAR = await env(\"MY_ENV_VAR\")\n   * ```\n   * #### env example with prompt\n   * ```ts\n   * // Prompt the user to select from a path\n   * let OUTPUT_DIR = await env(\"OUTPUT_DIR\", async () => {\n   *   return await path({\n   *     hint: `Select the output directory`,\n   *   })\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=env) | [Docs](https://johnlindquist.github.io/kit-docs/#env) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=env)\n   */\n  var env: Env\n  /**\n   * - Accept text input from the user.\n   * - Optionally provide a list of choices filtered by the text input.\n   * - Optionally provide a list of actions to trigger when the user presses a shortcut.\n   * 1. The first argument is a string or a prompt configuration object.\n   * 2. The second argument is a list of choices, a string to render, or a function that returns choices or a string to render.\n   * #### arg example\n   * ```ts\n   * let value = await arg()\n   * ```\n   * #### arg basic string input\n   * ```ts\n   * let name = await arg(\"Enter your name\")\n   * ```\n   * #### arg with async choices object\n   * ```ts\n   * let person = await arg(\"Select a person\", async () => {\n   *     let response = await get(\"https://swapi.dev/api/people/\");\n   *     // return an array of objects with \"name\", \"value\", and \"description\" properties\n   *     return response?.data?.results.map((person) => {\n   *         return {\n   *             name: person.name,\n   *             description: person.url,\n   *             value: person\n   *         }\n   *     });\n   * })\n   * ```\n   * #### arg with async choices\n   * ```ts\n   * let name = await arg(\"Select a name\", async () => {\n   *     let response = await get(\"https://swapi.dev/api/people/\");\n   *     return response?.data?.results.map((p) => p.name);\n   * })\n   * ```\n   * #### arg with choices array\n   * ```ts\n   * let name = await arg(\"Select a name\", [\n   *   \"John\",\n   *   \"Mindy\",\n   *   \"Joy\",\n   * ])\n   * ```\n   * #### arg with generated choices\n   * ```ts\n   * let char = await arg(\"Type then pick a char\", (input) => {\n   *     // return an array of strings\n   *     return input.split(\"\")\n   * })\n   * ```\n   * #### arg with shortcuts\n   * ```ts\n   * let url = \"https://swapi.dev/api/people\"\n   * let name = await arg({\n   *     placeholder: \"Select a name\",\n   *     shortcuts: [\n   *         {\n   *             name: \"Explore API\",\n   *             key: \"cmd+e\",\n   *             onPress: async () => {\n   *                 open(url)\n   *             },\n   *             bar: \"right\"\n   *         }\n   *     ]\n   * }, async () => {\n   *     let response = await get(url);\n   *     return response?.data?.results.map((p) => p.name);\n   * })\n   * ```\n   * #### arg actions example\n   * ```ts\n   * const result = await arg(\n   *   \"What is your name?\",\n   *   [\"John\", \"Mindy\", \"Ben\"],\n   *   //   Define an Array of Actions\n   *   [\n   *     {\n   *       name: \"Submit Joy\",\n   *       shortcut: `${cmd}+j`,\n   *       onAction: () => {\n   *         submit(\"Joy\");\n   *       },\n   *     },\n   *   ]\n   * );\n   * await editor(JSON.stringify(result, null, 2));\n   * ```\n   * [Examples](https://scriptkit.com?query=arg) | [Docs](https://johnlindquist.github.io/kit-docs/#arg) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=arg)\n   */\n  var arg: Arg\n  /**\n   * Prompts the user to select one or more options.\n   * #### select example\n   * ```ts\n   * // Return an array of selected items\n   * const multipleChoice = await select(\"Select one or more developer\", [\n   *   \"John\",\n   *   \"Nghia\",\n   *   \"Mindy\",\n   *   \"Joy\",\n   * ]);\n   * await editor(JSON.stringify(multipleChoice, null, 2));\n   * ```\n   * #### select a choice with a single keystroke\n   * ```ts\n   * let choice = await arg({\n   *   placeholder: \"Choose a color\",\n   *   choices: [\n   *     { name: \"[R]ed\", value: \"red\" },\n   *     { name: \"[G]reen\", value: \"green\" },\n   *     { name: \"[B]lue\", value: \"blue\" },\n   *   ],\n   * })\n   * await div(md(`You chose ${choice}`))\n   * ```\n   * #### select array object\n   * ```ts\n   * const people = [\n   *   {\n   *     name: \"John\",\n   *     description: \"Full-stack Dev\",\n   *     value: \"John\",\n   *   },\n   *   {\n   *     name: \"Nghia\",\n   *     description: \"Full-stackoverflow dev\",\n   *     value: \"Nghia\",\n   *   },\n   *   {\n   *     name: \"Mindy\",\n   *     description: \"Business Analyst\",\n   *     value: \"Mindy\",\n   *   },\n   *   {\n   *     name: \"Joy\",\n   *     description: \"Leader\",\n   *     value: \"Joy\",\n   *   },\n   * ]\n   * let multipleChoice = await select(\n   *   \"Select one or more developer\",\n   *   people\n   * )\n   * ```\n   * #### select async choices array object\n   * ```ts\n   * let name = await select(\n   *   \"GET: NAME (please wait)\",\n   *   async () => {\n   *     let response = await get(\n   *       \"https://swapi.dev/api/people/\"\n   *     )\n   *     return response?.data?.results.map(person => {\n   *       return {\n   *         name: person.name,\n   *         description: `height: ${person.height}, mass: ${person.mass}`,\n   *         value: person,\n   *         preview: () => JSON.stringify(person),\n   *       }\n   *     })\n   *   }\n   * )\n   * ```\n   * #### select basic array input\n   * ```ts\n   * let multipleChoice = await select(\n   *   \"Select one or more developer\",\n   *   [\"John\", \"Nghia\", \"Mindy\", \"Joy\"]\n   * )\n   * ```\n   * #### select generated input choices\n   * ```ts\n   * let word = await select(\"Type then pick a words\", input => {\n   *   return input.trim().split(new RegExp(\"[.,;/-_\\n]\", \"g\"))\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=select) | [Docs](https://johnlindquist.github.io/kit-docs/#select) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=select)\n   */\n  var select: Select\n  /**\n   * Prompts the user to select one or more options in a grid layout.\n   * #### grid example\n   * ```ts\n   * let multipleChoice = await grid(\n   *   \"Select one or more developer\",\n   *   [\"John\", \"Nghia\", \"Mindy\", \"Joy\"]\n   * )\n   * ```\n   * [Examples](https://scriptkit.com?query=grid) | [Docs](https://johnlindquist.github.io/kit-docs/#grid) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=grid)\n   */\n  var grid: Grid\n  var basePrompt: Arg\n  /**\n   * Same API as `arg`, but with a compact format.\n   * #### mini example\n   * ```ts\n   * let name = await mini(\"Enter your name\")\n   * ```\n   * [Examples](https://scriptkit.com?query=mini) | [Docs](https://johnlindquist.github.io/kit-docs/#mini) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=mini)\n   */\n  var mini: Arg\n  /**\n   * Same API as `arg`, but with a tiny, adorable UI.\n   * #### micro example\n   * ```ts\n   * let name = await micro(\"Enter your name\")\n   * ```\n   * [Examples](https://scriptkit.com?query=micro) | [Docs](https://johnlindquist.github.io/kit-docs/#micro) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=micro)\n   */\n  var micro: Arg\n  /**\n   * onTab allows you to build a menu where prompts are organized under a tab. Press Tab/Shift+Tab to navigate between prompts.\n   * #### onTab example\n   * ```ts\n   * onTab(\"People\", async (event) => {\n   *   await arg(\"Select a person\", [\"John\", \"Mindy\", \"Ben\"]);\n   * });\n   * onTab(\"Animals\", async (event) => {\n   *   await arg(\"Select an animal\", [\"Dog\", \"Cat\", \"Bird\"]);\n   * });\n   * ```\n   * [Examples](https://scriptkit.com?query=onTab) | [Docs](https://johnlindquist.github.io/kit-docs/#onTab) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=onTab)\n   */\n  var onTab: OnTab\n  var args: Args\n\n  var updateArgs: UpdateArgs\n  var argOpts: string[]\n\n  /**\n   * Wait for a number of milliseconds\n   * #### wait example\n   * ```ts\n   * div(md(`Enjoying your wait?`));\n   * await wait(1000);\n   * div(md(`I waited 1 second. Let's wait some more!`));\n   * await wait(1000);\n   * await div(md(`All done!`));\n   * ```\n   * [Examples](https://scriptkit.com?query=wait) | [Docs](https://johnlindquist.github.io/kit-docs/#wait) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=wait)\n   */\n  var wait: Wait\n\n  /**\n   * Create a path relative to the user's home directory\n   * #### home example\n   * ```ts\n   * const downloadsPath = home(\"Downloads\");\n   * const downloadedFileNames = await readdir(downloadsPath);\n   * await editor(JSON.stringify(downloadedFileNames, null, 2));\n   * ```\n   * [Examples](https://scriptkit.com?query=home) | [Docs](https://johnlindquist.github.io/kit-docs/#home) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=home)\n   */\n  var home: PathFn\n  /**\n   * Check if a path is a file\n   * #### isFile example\n   * ```ts\n   * const testingIsFileTxtPath = home(\"testing-isFile.txt\");\n   * const isTestingFile = await isFile(testingIsFileTxtPath);\n   * if (!isTestingFile) {\n   *   await writeFile(testingIsFileTxtPath, \"Hello World\");\n   * }\n   * const content = await readFile(testingIsFileTxtPath, \"utf8\");\n   * await editor(content);\n   * ```\n   * [Examples](https://scriptkit.com?query=isFile) | [Docs](https://johnlindquist.github.io/kit-docs/#isFile) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=isFile)\n   */\n  var isFile: IsCheck\n  /**\n   * Check if a path is a directory\n   * [Examples](https://scriptkit.com?query=isDir) | [Docs](https://johnlindquist.github.io/kit-docs/#isDir) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=isDir)\n   */\n  var isDir: IsCheck\n  /**\n   * Check if a path can be executed\n   * [Examples](https://scriptkit.com?query=isBin) | [Docs](https://johnlindquist.github.io/kit-docs/#isBin) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=isBin)\n   */\n  var isBin: IsCheck\n  var createPathResolver: PathResolver\n\n  /**\n   * `inspect` takes an object and writes out a text file you can use to read/copy/paste the values from:\n   * > Note: It will automatically convert objects to JSON to display them in the file\n   * #### inspect example\n   * ```ts\n   * let response = await get(\"https://swapi.dev/api/people/1/\")\n   * await inspect(response.data)\n   * ```\n   * [Examples](https://scriptkit.com?query=inspect) | [Docs](https://johnlindquist.github.io/kit-docs/#inspect) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=inspect)\n   */\n  var inspect: Inspect\n\n  /**\n   * An extremely simple database that persists to a file.\n   * #### db hello world\n   * ```ts\n   * // Pre-populate the database with some items\n   * const peopleDb = await db({\n   *   people: [\n   *     {\n   *       name: \"John\",\n   *       age: 30,\n   *       city: \"San Francisco\",\n   *     },\n   *     {\n   *       name: \"Jane\",\n   *       age: 25,\n   *       city: \"New York\",\n   *     },\n   *   ] as Person[],\n   * });\n   * const person = await arg<Person>(\"Select a person\", peopleDb.people);\n   * // Do something with the person...\n   * const [name, age, city] = await fields({\n   *   fields: [\"name\", \"age\", \"city\"],\n   *   enter: \"Add\",\n   *   description: \"Add a new person to the database\",\n   * });\n   * peopleDb.people.push({ name, age: parseInt(age), city });\n   * await peopleDb.write();\n   * await editor(JSON.stringify(peopleDb.people, null, 2));\n   * type Person = {\n   *   name: string;\n   *   age: number;\n   *   city: string;\n   * };\n   * ```\n   * #### db populate\n   * ```ts\n   * // Pass in a function to generate data for the db\n   * // Because this script is named \"db-basic.js\"\n   * // The database is found at \"~/.kenv/db/_db-basic.json\"\n   * let reposDb = await db(async () => {\n   *   let response = await get(\"https://api.github.com/users/johnlindquist/repos\");\n   * return response.data.map(({ name, description, html_url }) => {\n   *     return {\n   *       name,\n   *       description,\n   *       value: html_url,\n   *     };\n   *   });\n   * });\n   * let repoUrl = await arg(\"Select repo to open:\", reposDb.items);\n   * exec(`open \"${repoUrl}\"`);\n   * ```\n   * #### db store\n   * ```ts\n   * let fruitDb = await db([\"apple\", \"banana\", \"orange\"])\n   * while (true) {\n   *   let fruitToAdd = await arg(\"Add a fruit\", md(fruitDb.items.map(fruit => `* ${fruit}`).join(\"\\n\")))\n   * fruitDb.items.push(fruitToAdd)\n   *   await fruitDb.write()\n   * let fruitToDelete = await arg(\"Delete a fruit\", fruitDb.items)\n   * fruitDb.items = fruitDb.items.filter(fruit => fruit !== fruitToDelete)\n   * await fruitDb.write()\n   * }\n   * ```\n   * [Examples](https://scriptkit.com?query=db) | [Docs](https://johnlindquist.github.io/kit-docs/#db) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=db)\n   */\n  var db: DB\n  /**\n   * Stores data in a persistent key-value store.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### store example\n   * ```ts\n   * await store.set(\"myKey\", \"myValue\")\n   * let value = await store.get(\"myKey\")\n   * ```\n   * [Examples](https://scriptkit.com?query=store) | [Docs](https://johnlindquist.github.io/kit-docs/#store) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=store)\n   */\n  var store: Store\n\n  /**\n   * Manages a memory map of objects.\n   * #### memoryMap example\n   * ```ts\n   * memoryMap.set(\"myKey\", { myObject: true })\n   * let value = memoryMap.get(\"myKey\")\n   * ```\n   * [Examples](https://scriptkit.com?query=memoryMap) | [Docs](https://johnlindquist.github.io/kit-docs/#memoryMap) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=memoryMap)\n   */\n  var memoryMap: Map<string, any>\n\n  var onTabIndex: number\n\n  var selectKitEditor: SelectKitEditor\n\n  /**\n   * Get all scripts\n   * #### getScripts example\n   * ```ts\n   * // Get all scripts from ~/.kit/db/scripts.json\n   * const scripts = await getScripts();\n   * const script = await arg(\"Select a script\", scripts);\n   * await editor(JSON.stringify(script, null, 2));\n   * ```\n   * [Examples](https://scriptkit.com?query=getScripts) | [Docs](https://johnlindquist.github.io/kit-docs/#getScripts) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getScripts)\n   */\n  var getScripts: GetScripts\n  /**\n   * Returns focus to the previous app.\n   * #### blur example\n   * ```ts\n   * import { URL, fileURLToPath } from \"node:url\";\n   * await editor({\n   *   onInit: async () => {\n   *     const { workArea } = await getActiveScreen();\n   *     const topLeft = { x: workArea.x, y: workArea.y };\n   *     const size = { height: 900, width: 200 };\n   *     await setBounds({\n   *       ...topLeft,\n   *       ...size,\n   *     });\n   *     await blur();\n   * // get path to current file\n   *     const currentScript = fileURLToPath(new URL(import.meta.url));\n   *     const content = await readFile(currentScript, \"utf8\");\n   *     const lines = content.split(\"\\n\");\n   *     for await (const line of lines) {\n   *       editor.append(`${line}\\n`);\n   *       await wait(100);\n   *     }\n   *   },\n   * });\n   * ```\n   * [Examples](https://scriptkit.com?query=blur) | [Docs](https://johnlindquist.github.io/kit-docs/#blur) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=blur)\n   */\n  var blur: () => Promise<void>\n  /**\n   * A flag is almost exclusively used for the CLI, rarely with a prompt. When using a CLI script:\n   * ```bash\n   * my-script --debug --exclude \"*.md\"\n   * ```\n   * The flags in your script will be set as:\n   * ```ts\n   * flag.debug = true\n   * flag.exclude = \"*.md\"\n   * ```\n   * #### flag example\n   * ```ts\n   * // This concept is replaced by \"Actions\", but you will see it in older/legacy scripts\n   * const result = await arg({\n   *   placeholder: \"What is your name?\",\n   *   flags: {\n   *     post: {\n   *       // This will submit the prompt with the \"post\" flag\n   *       shortcut: `${cmd}+p`,\n   *     },\n   *     put: {\n   *       // This will submit the prompt with the \"put\" flag\n   *       shortcut: `${cmd}+u`,\n   *     },\n   *     delete: {\n   *       // This will submit the prompt with the \"delete\" flag\n   *       shortcut: `${cmd}+d`,\n   *     },\n   *   },\n   * });\n   * await editor(\n   *   JSON.stringify(\n   *     {\n   *       result,\n   *       flag: global.flag, // Inspect which flag was used when submitting\n   *     },\n   *     null,\n   *     2\n   *   )\n   * );\n   * ```\n   * [Examples](https://scriptkit.com?query=flag) | [Docs](https://johnlindquist.github.io/kit-docs/#flag) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=flag)\n   */\n  var flag: Flags\n  var actionFlag: string\n  var setFlags: FlagFn\n  var setActions: ActionsFn\n  /**\n   * Manually open the actions menu\n   * #### openactions example\n   * ```ts\n   * await arg(\n   *   {\n   *     onInit: async () => {\n   *       // Automatically open the actions menu\n   *       openActions();\n   *     },\n   *   },\n   *   [\"John\", \"Mindy\"],\n   *   [\n   *     {\n   *       name: \"Submit Ben Instead\",\n   *       onAction: async (name) => {\n   *         submit(\"Ben\");\n   *       },\n   *     },\n   *   ]\n   * );\n   * ```\n   * [Examples](https://scriptkit.com?query=openActions) | [Docs](https://johnlindquist.github.io/kit-docs/#openActions) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=openActions)\n   */\n  var openActions: () => Promise<void>\n  var closeActions: () => Promise<void>\n  var setFlagValue: (value: any) => Promise<void>\n  var prepFlags: PrepFlags\n\n  /**\n   * Allows you to build a custom script selection menu\n   * #### selectScript example\n   * ```ts\n   * import type { Script } from \"@johnlindquist/kit\";\n   * const script = await selectScript(\n   *   \"Select a Shortcut Script to Edit\",\n   *   true, // \"true\" will load from ~/.kit/db/scripts.json cache\n   *   (scripts: Script[]) => scripts.filter((script) => script.shortcut)\n   * );\n   * await edit(script.filePath);\n   * ```\n   * [Examples](https://scriptkit.com?query=selectScript) | [Docs](https://johnlindquist.github.io/kit-docs/#selectScript) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=selectScript)\n   */\n  var selectScript: SelectScript\n  var selectKenv: SelectKenv\n  var highlight: Highlight\n\n  var terminal: (script: string) => Promise<string>\n  var iterm: (iterm: string) => Promise<string>\n  var hyper: (hyper: string) => Promise<string>\n  var projectPath: PathFn\n  var clearAllTimeouts: () => void\n  var clearAllIntervals: () => void\n  /**\n   * Creates a GitHub gist.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### createGist example\n   * ```ts\n   * let gistUrl = await createGist({\n   *   description: \"My awesome gist\",\n   *   public: true,\n   *   files: {\n   *     \"hello.txt\": {\n   *       content: \"Hello, world!\"\n   *     }\n   *   }\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=createGist) | [Docs](https://johnlindquist.github.io/kit-docs/#createGist) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=createGist)\n   */\n  var createGist: CreateGist\n  var setShortcuts: SetShortcuts\n  var isWin: boolean\n  var isMac: boolean\n  var isLinux: boolean\n  var cmd: 'cmd' | 'ctrl'\n  /**\n   * Formats a date\n   * [Examples](https://scriptkit.com?query=formatDate) | [Docs](https://johnlindquist.github.io/kit-docs/#formatDate) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=formatDate)\n   */\n  var formatDate: typeof format\n  var formatDateToNow: typeof formatDistanceToNow\n\n  var debounce: Utils['debounce']\n  var sortBy: Utils['sortBy']\n  var isUndefined: Utils['isUndefined']\n  var isString: Utils['isString']\n\n  var createChoiceSearch: (\n    choices: Choice[],\n    config: Partial<Options & ConfigOptions>\n  ) => Promise<(query: string) => ScoredChoice[]>\n\n  /**\n   * Sets scored choices for a prompt.\n   * #### setScoredChoices example\n   * ```ts\n   * await setScoredChoices([\n   *   { name: \"John\", score: 0.9 },\n   *   { name: \"Mindy\", score: 0.8 },\n   *   { name: \"Joy\", score: 0.7 }\n   * ])\n   * ```\n   * [Examples](https://scriptkit.com?query=setScoredChoices) | [Docs](https://johnlindquist.github.io/kit-docs/#setScoredChoices) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setScoredChoices)\n   */\n  var setScoredChoices: (scoredChoices: ScoredChoice[]) => Promise<void>\n\n  /**\n   * Groups choices for a prompt.\n   * #### groupChoices example\n   * ```ts\n   * await groupChoices([\n   *   { name: \"Group 1\", choices: [\"John\", \"Mindy\"] },\n   *   { name: \"Group 2\", choices: [\"Joy\"] }\n   * ])\n   * ```\n   * [Examples](https://scriptkit.com?query=groupChoices) | [Docs](https://johnlindquist.github.io/kit-docs/#groupChoices) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=groupChoices)\n   */\n  var groupChoices: (\n    choices: Choice[],\n    options?: {\n      groupKey?: string\n      missingGroupName?: string\n      order?: string[]\n      sortChoicesKey?: (string | boolean)[]\n      recentKey?: string\n      recentLimit?: number\n      excludeGroups?: string[]\n    }\n  ) => Choice[]\n\n  /**\n   * Formats an array of choices.\n   * - If a choice is not an object, it is converted to a basic choice object.\n   * - If a choice has a nested `choices` array (i.e. represents a group), then:\n   *    1. The group header is formatted (its `group` property is preserved if already set, or defaulted to its name).\n   *    2. Its sub-choices are formatted in their original order.\n   *    3. After processing the sub‚Äëchoices, any items with an `index` property are re‚Äëinserted at the appropriate positions.\n   * - For top‚Äëlevel non-group items, if every item is non‚Äëgroup, then we re‚Äëinsert the indexed items in the final array.\n   * Parameters:\n   * - `choices`: An array of choices or simple values\n   * - `className`: An optional default className\n   * Returns the formatted array of choices.\n   * #### formatchoices example\n   * ```ts\n   * const people = [\n   *   {\n   *     name: \"Utah\",\n   *     choices: [\"John\", \"Mindy\"],\n   *   },\n   *   {\n   *     name: \"Alaska\",\n   *     choices: [\"Beth\"],\n   *   },\n   * ];\n   * const choices = formatChoices(people);\n   * await arg(\"Select a person from their group\", choices);\n   * ```\n   * [Examples](https://scriptkit.com?query=formatChoices) | [Docs](https://johnlindquist.github.io/kit-docs/#formatChoices) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=formatChoices)\n   */\n  var formatChoices: (choices: Choice[], className?: string) => Choice[]\n\n  /**\n   * Preloads data for a prompt.\n   * #### preload example\n   * ```ts\n   * await preload({\n   *   name: \"John\",\n   *   age: 40\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=preload) | [Docs](https://johnlindquist.github.io/kit-docs/#preload) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=preload)\n   */\n  var preload: (scriptPath?: string) => void\n\n  /**\n   * Sets selected choices for a prompt.\n   * #### setSelectedChoices example\n   * ```ts\n   * await setSelectedChoices([\"John\", \"Mindy\"])\n   * ```\n   * [Examples](https://scriptkit.com?query=setSelectedChoices) | [Docs](https://johnlindquist.github.io/kit-docs/#setSelectedChoices) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setSelectedChoices)\n   */\n  var setSelectedChoices: (choices: Choice[]) => Promise<void>\n  var toggleAllSelectedChoices: () => Promise<void>\n  var trace: Trace\n\n  type Metadata = import('./core.js').Metadata\n\n  /**\n   * Simple wrapper around AI SDK for text generation with system prompts.\n   * Returns a function that takes user input and resolves to the AI's text response.\n   * #### ai example\n   * ```ts\n   * const translate = ai(\"Translate to French\")\n   * const result = await translate(\"Hello world!\")\n   * // Returns: \"Bonjour le monde!\"\n   * ```\n   * To generate structured objects, use `ai.object()`.\n   * [Examples](https://scriptkit.com?query=ai) | [Docs](https://johnlindquist.github.io/kit-docs/#ai) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=ai)\n   */\n  var ai: {\n    (\n      systemPrompt: string,\n      options?: {\n        model?: string | LanguageModelV1\n        temperature?: number\n        maxTokens?: number\n      }\n    ): (input: string) => Promise<string>\n\n    /**\n     * Generates a structured JavaScript object based on a Zod schema and a prompt.\n     * #### ai.object example\n     * ```ts\n     * import { z } from 'zod';\n     * const sentimentSchema = z.object({\n     *   sentiment: z.enum(['positive', 'neutral', 'negative']),\n     *   confidence: z.number().min(0).max(1)\n     * });\n     *\n     * const result = await ai.object(\n     *   \"Analyze the sentiment of this text: 'I love programming!'\",\n     *   sentimentSchema\n     * );\n     * // result will be { sentiment: 'positive', confidence: ... }\n     * ```\n     * [Examples](https://scriptkit.com?query=ai.object) | [Docs](https://johnlindquist.github.io/kit-docs/#ai.object) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=ai.object)\n     */\n    object: <Schema extends ZodTypeAny>(\n      promptOrMessages: string | CoreMessage[],\n      schema: Schema,\n      options?: {\n        model?: string | LanguageModelV1\n        temperature?: number\n        maxTokens?: number\n        // Other generateObject-specific options could be added here\n      }\n    ) => Promise<z.infer<Schema>>\n  }\n\n  /**\n   * Create an AI assistant that maintains conversation context and history,\n   * supports tool calling, and provides detailed interaction results.\n   * #### assistant example\n   * ```ts\n   * const chatbot = assistant(\"You are a helpful assistant\", {\n   *   tools: {\n   *     getCurrentWeather: {\n   *       description: \"Get the current weather for a location\",\n   *       parameters: z.object({ location: z.string() }),\n   *       execute: async ({ location }) => ({ temperature: \"...\" })\n   *     }\n   *   }\n   * })\n   *\n   * chatbot.addUserMessage(\"What's the weather in London?\")\n   *\n   * // Using generate for full response including tool calls\n   * const result = await chatbot.generate()\n   * if (result.toolCalls && result.toolCalls.length > 0) {\n   *   // ... handle tool calls ...\n   *   for (const toolCall of result.toolCalls) {\n   *      // ... execute tool ...\n   *      chatbot.addMessage({\n   *          role: 'tool',\n   *          toolCallId: toolCall.toolCallId,\n   *          toolName: toolCall.toolName,\n   *          content: JSON.stringify({temperature: \"15C\"})\n   *      });\n   *   }\n   *   const finalResult = await chatbot.generate(); // Get response after tool execution\n   *   console.log(finalResult.text);\n   * }\n   *\n   * // Or stream text and check lastInteraction for tool calls\n   * for await (const chunk of chatbot.textStream) {\n   *   process.stdout.write(chunk)\n   * }\n   * if (chatbot.lastInteraction?.toolCalls) {\n   *   // ... handle tool calls as above ...\n   *   chatbot.addMessage(...); // add tool results\n   *   for await (const chunk of chatbot.textStream) { // stream again\n   *      process.stdout.write(chunk)\n   *   }\n   * }\n   *\n   * // Access conversation history (now CoreMessage[])\n   * for (const message of chatbot.messages) {\n   *   console.log(`${message.role}: ${JSON.stringify(message.content)}`)\n   * }\n   * ```\n   */\n  var assistant: (\n    systemPrompt: string,\n    options?: {\n      model?: string | LanguageModelV1\n      temperature?: number\n      maxTokens?: number\n      tools?: Record<string, Tool<any, any>>\n      maxSteps?: number\n      autoExecuteTools?: boolean\n      maxHistory?: number\n    }\n  ) => {\n    addUserMessage: (content: string | any[]) => void\n    addSystemMessage: (content: string) => void\n    addAssistantMessage: (\n      text?: string,\n      options?: { toolCalls?: ToolCallPart[]; parts?: CoreMessage['content'] }\n    ) => void\n    addMessage: (message: CoreMessage) => void\n    textStream: AsyncGenerator<string, void, unknown>\n    stop: () => void\n    generate: (abortSignal?: AbortSignal) => Promise<AssistantOutcome>\n    messages: CoreMessage[]\n    lastInteraction?: AssistantLastInteraction | null\n    get autoExecuteTools(): boolean\n    set autoExecuteTools(value: boolean)\n    get maxHistory(): number\n  }\n\n  /**\n   * Generates a structured JavaScript object based on a Zod schema and a prompt.\n   * This is the standalone version of ai.object() available as a global function.\n   * #### generate example\n   * ```ts\n   * import { z } from 'zod';\n   * const sentimentSchema = z.object({\n   *   sentiment: z.enum(['positive', 'neutral', 'negative']),\n   *   confidence: z.number().min(0).max(1)\n   * });\n   *\n   * const result = await generate(\n   *   \"Analyze the sentiment of this text: 'I love programming!'\",\n   *   sentimentSchema\n   * );\n   * // result will be { sentiment: 'positive', confidence: ... }\n   * ```\n   * [Examples](https://scriptkit.com?query=generate) | [Docs](https://johnlindquist.github.io/kit-docs/#generate) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=generate)\n   */\n  var generate: <Schema extends ZodTypeAny>(\n    promptOrMessages: string | CoreMessage[],\n    schema: Schema,\n    options?: {\n      model?: string | LanguageModelV1\n      temperature?: number\n      maxTokens?: number\n    }\n  ) => Promise<z.infer<Schema>>\n\n  /**\n   * The `metadata` object can include:\n   * - `name`: Display name in Script Kit UI (defaults to filename)\n   * - `author`: Creator's name\n   * - `description`: Brief script summary\n   * - `enter`: Text shown on Enter button\n   * - `alias`: Alternative search term\n   * - `image`: Path to script icon\n   * - `shortcut`: Global keyboard shortcut, e.g, cmd+opt+4\n   * - `shortcode`: Execute when typed + space in menu\n   * - `trigger`: Execute when typed in menu\n   * - `expand`: Text expansion trigger (replaces deprecated `snippet`)\n   * - `keyword`: Search keyword for menu\n   * - `pass`: Pass menu input as arg (true/string/RegExp)\n   * - `group`: Menu organization category\n   * - `exclude`: Hide from menu\n   * - `watch`: File/dir to watch for changes\n   * - `log`: Disable logging if false\n   * - `background`: Run as background process\n   * - `system`: Trigger on system events (sleep/wake/etc)\n   * - `schedule`: Cron expression for timing\n   * - `access`: REST API access level (public/key/private)\n   * - `response`: Allow REST API response\n   * - `index`: Order within group\n   * #### metadata example\n   * ```ts\n   *   name: \"Metadata Example\",\n   *   description: \"This is an example of how to use metadata in a script\",\n   *   author: \"John Lindquist\",\n   * };\n   * ```\n   * [Examples](https://scriptkit.com?query=metadata) | [Docs](https://johnlindquist.github.io/kit-docs/#metadata) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=metadata)\n   */\n  var metadata: Metadata\n\n  /**\n   * Zod schema validation library. Create and validate data schemas.\n   * #### z example\n   * ```ts\n   * const UserSchema = z.object({\n   *   name: z.string(),\n   *   age: z.number().min(18)\n   * });\n   *\n   * const user = UserSchema.parse({ name: \"John\", age: 25 });\n   * ```\n   * [Examples](https://scriptkit.com?query=z) | [Docs](https://johnlindquist.github.io/kit-docs/#z) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=z)\n   */\n  var z: typeof import('zod').z\n}\n\n\n---\nFile: kitapp.d.ts\nimport { execaCommand as exec } from 'execa'\nimport type { editor as editorApi } from './editor.api'\n\nimport {\n  type Key as CoreKeyEnum,\n  Channel,\n  Mode,\n  type statuses,\n  type PROMPT as CORE_PROMPT,\n} from '../core/enum.js'\n\nimport type { AppDb } from '../core/db.js'\n\nimport {\n  type Action,\n  type AppState,\n  ChannelHandler,\n  type Choice,\n  Choices,\n  type FlagsObject,\n  type PromptConfig,\n  type PromptData,\n  type ScoredChoice,\n  type Script,\n  type Shortcut,\n} from './core.js'\nimport type { BrowserWindowConstructorOptions, Display, Rectangle } from './electron.js'\n\nimport type { Trash } from './packages.js'\nimport type { marked } from '../globals/marked.js'\nimport type { Token as MarkedToken } from 'marked'\nimport type { ChildProcess } from 'node:child_process'\nimport type { UiohookKeyboardEvent, UiohookMouseEvent, UiohookWheelEvent } from './io.js'\nimport type { KeyEnum } from '../core/keyboard.js'\nimport type { FileSearchOptions } from './platform.js'\nimport type { NotificationConstructorOptions } from './notify.js'\nimport type { ShebangConfig } from '../core/shebang.js'\nimport type { Readable } from 'node:stream'\n\nexport type Status = (typeof statuses)[number]\n\nexport interface AppMessage {\n  channel: Channel\n  pid: number\n  newPid?: number\n  state: AppState\n  widgetId?: number\n  promptId: string\n  env?: Record<string, string>\n}\n\nexport interface Config {\n  imagePath: string\n  deleteSnippet: boolean\n}\n\nexport interface ChatMessage {\n  index: number\n  text: string\n  position: string\n  type: string\n}\n\n// Todo: Implement more methods and fix types accordingly\nexport interface IMessage extends ChatMessage {\n  id: string | number\n  title: string\n  focus: boolean\n  date: number | Date\n  dateString?: string\n  avatar?: string\n  titleColor: string\n  forwarded: boolean\n  replyButton: boolean\n  removeButton: boolean\n  status: 'waiting' | 'sent' | 'received' | 'read'\n  copiableDate?: boolean\n  retracted: boolean\n  className?: string\n  renderHTML?: boolean\n}\n\nexport type Message = string | Partial<IMessage>\n\nexport type Notify = (bodyOrOptions: NotificationConstructorOptions | string) => Promise<void>\n\nexport type Chat = ((config?: PromptConfig, actions?: Action[]) => Promise<Message[]>) & {\n  addMessage: (message: Message) => Promise<ChatMessage>\n  setMessage: (index: number, message: Message) => Promise<ChatMessage>\n  getMessages: () => Promise<ChatMessage[]>\n  setMessages: (messages: Message[]) => Promise<void>\n  pushToken: (token: string) => Promise<ChatMessage>\n}\n\ninterface ToastOptions {\n  /**\n   * Pause the timer when the mouse hover the toast.\n   * `Default: true`\n   */\n  pauseOnHover?: boolean\n  /**\n   * Pause the toast when the window loses focus.\n   * `Default: true`\n   */\n  pauseOnFocusLoss?: boolean\n  /**\n   * Remove the toast when clicked.\n   * `Default: true`\n   */\n  closeOnClick?: boolean\n  /**\n   * Set the delay in ms to close the toast automatically.\n   * Use `false` to prevent the toast from closing.\n   * `Default: 5000`\n   */\n  autoClose?: number | false\n  /**\n   * Hide or show the progress bar.\n   * `Default: false`\n   */\n  hideProgressBar?: boolean\n  /**\n   * Allow toast to be draggable\n   * `Default: 'touch'`\n   */\n  draggable?: boolean | 'mouse' | 'touch'\n  /**\n   * The percentage of the toast's width it takes for a drag to dismiss a toast\n   * `Default: 80`\n   */\n  draggablePercent?: number\n}\nexport type Toast = (toast: string, options?: ToastOptions) => void\n\nexport type Prompt = {\n  closeActions(): Promise<void>\n  close(): void\n  openActions(): void\n  setInput(input: string): void\n  focus(): Promise<void>\n  blur(): Promise<void>\n  hide(): Promise<void>\n}\n\nexport type Mic = ((config?: MicConfig) => Promise<Buffer>) & {\n  stop: () => Promise<Buffer>\n  start: (config?: MicConfig) => Promise<string>\n  stream: Readable\n}\n\nexport type WebCam = (config?: PromptConfig) => Promise<string>\n\nexport type Speech = (config?: PromptConfig) => Promise<string>\n\nexport type Screenshot = (displayId?: number, bounds?: Rectangle) => Promise<Buffer>\n\nexport type clipboardBufferType =\n  | 'public.item'\n  | 'public.content'\n  | 'public.text'\n  | 'public.plain-text'\n  | 'public.html'\n  | 'public.jpeg'\n  | 'public.png'\n  | 'public.file-url'\n  | 'public.url'\n  | (string & {}) // This allows any string while still providing hints\n\nexport type ScreenshotConfig = {\n  displayId?: Parameters<Screenshot>[0]\n  bounds?: Parameters<Screenshot>[1]\n}\n\nexport type MediaDeviceInfo = {\n  name: string\n  description: string\n  group: string\n  value: {\n    deviceId: string\n    kind: string\n    label: string\n    groupId: string\n  }\n  deviceId: string\n  kind: string\n  label: string\n  groupId: string\n}\n\nexport type GetMediaDevices = () => Promise<MediaDeviceInfo[]>\n\nexport type GetTypedText = () => Promise<string>\n\nexport type Find = (\n  placeholderOrConfig?: string | PromptConfig,\n  options?: FileSearchOptions\n) => Promise<string>\n\nexport type Editor = ((\n  config?: EditorConfig & { hint?: string },\n  actions?: Action[]\n) => Promise<string>) & {\n  setSuggestions: (suggestions: string[]) => Promise<void>\n  setConfig: (config: EditorConfig) => Promise<void>\n  append: (text: string) => Promise<void>\n  getSelection: () => Promise<{\n    text: string\n    start: number\n    end: number\n  }>\n  getCursorOffset: () => Promise<number>\n  moveCursor: (offset: number) => Promise<void>\n  insertText: (text: string) => Promise<void>\n  setText: (text: string) => Promise<void>\n  // setCodeHint: (hint: string) => Promise<void>\n}\n\nexport interface EditorProps {\n  options: EditorConfig\n  height: number\n  width: number\n}\n\nexport type EditorOptions = editorApi.IStandaloneEditorConstructionOptions & {\n  file?: string\n  footer?: string\n  scrollTo?: 'top' | 'center' | 'bottom'\n  hint?: string\n  onInput?: PromptConfig['onInput']\n  onEscape?: PromptConfig['onEscape']\n  onAbandon?: PromptConfig['onAbandon']\n  onPaste?: PromptConfig['onPaste']\n  onBlur?: PromptConfig['onBlur']\n  onDrop?: PromptConfig['onDrop']\n  extraLibs?: { content: string; filePath: string }[]\n  template?: string\n  suggestions?: string[]\n  actions?: Action[]\n}\n\nexport type EditorConfig = string | (PromptConfig & EditorOptions)\n\nexport type MicConfig = PromptConfig & {\n  filePath?: string\n  timeSlice?: number\n}\n\nexport interface TextareaConfig extends PromptConfig {\n  value?: string\n}\n\nexport type EditorRef = editorApi.IStandaloneCodeEditor\n\nexport type PromptBounds = {\n  x: number\n  y: number\n  width: number\n  height: number\n}\n\nexport type PromptDb = {\n  screens: {\n    [screenId: string]: {\n      [scriptId: string]: PromptBounds\n    }\n  }\n}\n\nexport type TextArea = (placeholderOrOptions?: string | TextareaConfig) => Promise<string | void>\n\nexport type Drop = (placeholder?: string | PromptConfig, actions?: Action[]) => Promise<any>\nexport type Template = (\n  template: string,\n  config?: EditorConfig,\n  actions?: Action[]\n) => Promise<string>\nexport type OldForm = (\n  html?:\n    | string\n    | {\n        html?: string\n        hint?: string\n      },\n  formData?: any\n) => Promise<any>\n\nexport type Form = (html: string | PromptConfig, formData?: any, actions?: Action[]) => Promise<any>\n\ntype Field =\n  | {\n      label?: string\n      placeholder?: string\n      value?: string\n      type?: string\n      required?: boolean\n      min?: number\n      max?: number\n      step?: number\n      pattern?: string\n      [key: string]: string | boolean | number\n    }\n  | string\n\nexport type Fields = (\n  fields: Field[] | (PromptConfig & { fields: Field[] }),\n  actions?: Action[]\n) => Promise<string[]>\n\nexport type AudioOptions = {\n  filePath: string\n  playbackRate?: number\n}\n\ntype EmojiObject = {\n  activeSkinTone: string\n  emoji: string\n  names: string[]\n  unified: string\n  unifiedWithoutSkinTone: string\n}\n\nexport type Emoji = (config?: PromptConfig) => Promise<EmojiObject>\n\nexport interface DivConfig extends PromptConfig {\n  html: string\n  placeholder?: string\n  hint?: string\n  footer?: string\n  containerClasses?: string\n}\n\nexport type Div = (html?: string | DivConfig, actions?: Action[]) => Promise<any>\n\nexport interface KeyData {\n  key: KeyEnum\n  keyCode: string\n  command: boolean\n  shift: boolean\n  option: boolean\n  control: boolean\n  fn: boolean\n  hyper: boolean\n  os: boolean\n  super: boolean\n  win: boolean\n  shortcut: string\n}\nexport type Hotkey = (placeholder?: string | PromptConfig) => Promise<KeyData>\n\ntype SetImage = string | { src: string }\n\ntype AddChoice = (choice: string | Choice) => Promise<void>\n\ntype SetChoices = (\n  choices: (Choice | string)[],\n  config?: {\n    className?: string\n    skipInitialSearch?: boolean\n    inputRegex?: string\n    generated?: boolean\n  }\n) => Promise<void>\n\ntype SetFormData = (formData: any) => Promise<void>\n\ntype AppendChoices = (choices: Choice[]) => Promise<void>\n\ntype SetTextAreaOptions = {\n  value?: string\n  placeholder?: string\n}\n\nexport interface AppConfig {\n  os: string\n  isWin: boolean\n  isMac: boolean\n  assetPath: string\n  version: string\n  delimiter: string\n  sep: string\n}\n\nexport interface KitStatus {\n  status: Status\n  message: string\n}\n\nexport type Appearance = 'light' | 'dark'\n\ntype DisabledThottlingConfig = Pick<\n  PromptConfig,\n  | 'headerClassName'\n  | 'footerClassName'\n  | 'ui'\n  | 'inputHeight'\n  | 'itemHeight'\n  | 'placeholder'\n  | 'scriptPath'\n>\n\nexport type GetAppData =\n  | Channel.GET_ACTIVE_APP\n  | Channel.GET_BACKGROUND\n  | Channel.GET_MOUSE\n  | Channel.GET_SCHEDULE\n  | Channel.GET_BOUNDS\n  | Channel.GET_SCREEN_INFO\n  | Channel.GET_SCREENS_INFO\n  | Channel.GET_SCRIPTS_STATE\n  | Channel.GET_CLIPBOARD_HISTORY\n\nexport type SendNoOptions =\n  | Channel.CLEAR_CACHE\n  | Channel.CLIPBOARD_SYNC_HISTORY\n  | Channel.CLEAR_PREVIEW\n  | Channel.CLEAR_PROMPT_CACHE\n  | Channel.CLEAR_TABS\n  | Channel.CONSOLE_CLEAR\n  | Channel.KIT_CLEAR\n  | Channel.HIDE_APP\n  | Channel.BLUR_APP\n  | Channel.NEEDS_RESTART\n  | Channel.TOGGLE_TRAY\n  | Channel.UPDATE_APP\n  | Channel.QUIT_APP\n  | Channel.OPEN_DEV_TOOLS\n  | Channel.OPEN_MENU\n  | Channel.FOCUS\n  | Channel.SHOW_EMOJI_PANEL\n  | Channel.BEEP\n  | Channel.PING\n  | Channel.PONG\nexport interface ChannelMap {\n  // Figure these undefined out later\n  [Channel.KIT_LOADING]: string\n  [Channel.KIT_READY]: string\n  [Channel.MAIN_MENU_READY]: string\n  [Channel.ERROR]: {\n    script: string\n    message?: string\n    stack?: string\n  }\n  [Channel.VALUE_SUBMITTED]: any\n  [Channel.GET_BACKGROUND]: undefined\n  [Channel.GET_COLOR]: undefined\n  [Channel.GET_TYPED_TEXT]: undefined\n  [Channel.GET_MOUSE]: undefined\n  [Channel.GET_EDITOR_HISTORY]: undefined\n  [Channel.GET_SCHEDULE]: undefined\n  [Channel.GET_PROCESSES]: undefined\n  [Channel.GET_BOUNDS]: undefined\n  [Channel.GET_SCREEN_INFO]: undefined\n  [Channel.GET_SCREENS_INFO]: undefined\n  [Channel.GET_ACTIVE_APP]: undefined\n  [Channel.GET_SCRIPTS_STATE]: undefined\n  [Channel.GET_CLIPBOARD_HISTORY]: undefined\n  [Channel.GET_APP_STATE]: undefined\n  [Channel.CUT_TEXT]: undefined\n  [Channel.START_DRAG]: {\n    filePath: string\n    iconPath?: string\n  }\n  [Channel.WIDGET_GET]: undefined\n  [Channel.WIDGET_UPDATE]: {\n    widgetId: number\n    html: string\n    options?: ShowOptions\n  }\n  [Channel.WIDGET_EXECUTE_JAVASCRIPT]: {\n    widgetId: number\n    js: string\n  }\n  [Channel.WIDGET_SET_STATE]: {\n    state: any\n  }\n  [Channel.WIDGET_CAPTURE_PAGE]: undefined\n  [Channel.WIDGET_CLICK]: {\n    targetId: string\n    windowId: number\n  }\n  [Channel.WIDGET_DROP]: {\n    targetId: string\n    windowId: number\n  }\n  [Channel.WIDGET_MOUSE_DOWN]: {\n    targetId: string\n    windowId: number\n  }\n  [Channel.WIDGET_INPUT]: {\n    targetId: string\n    windowId: number\n  }\n  [Channel.WIDGET_DRAG_START]: {\n    targetId: string\n    windowId: number\n  }\n  [Channel.WIDGET_END]: { widgetId: number }\n  [Channel.WIDGET_FIT]: { widgetId: number }\n  [Channel.WIDGET_SET_SIZE]: {\n    widgetId: number\n    width: number\n    height: number\n  }\n  [Channel.WIDGET_SET_POSITION]: {\n    widgetId: number\n    x: number\n    y: number\n  }\n\n  [Channel.WIDGET_CALL]: {\n    widgetId: number\n    method: string\n    args?: any[]\n  }\n\n  //\n\n  [Channel.CLEAR_CACHE]: undefined\n  [Channel.CLEAR_SCRIPTS_MEMORY]: undefined\n  [Channel.CLEAR_TABS]: string[]\n  [Channel.CLIPBOARD_SYNC_HISTORY]: undefined\n  [Channel.CLEAR_PROMPT_CACHE]: undefined\n  [Channel.CLEAR_PREVIEW]: undefined\n  [Channel.CONSOLE_CLEAR]: undefined\n  [Channel.KIT_CLEAR]: undefined\n  [Channel.KIT_PASTE]: undefined\n  [Channel.HIDE_APP]: HideOptions\n  [Channel.BLUR_APP]: undefined\n  [Channel.NEEDS_RESTART]: undefined\n  [Channel.TOGGLE_TRAY]: undefined\n  [Channel.UPDATE_APP]: undefined\n  [Channel.QUIT_APP]: undefined\n  [Channel.PRO_STATUS]: undefined\n  //\n\n  [Channel.APP_CONFIG]: AppConfig\n  [Channel.APP_DB]: AppDb\n  [Channel.ADD_CHOICE]: Choice\n  [Channel.CONSOLE_LOG]: string\n  [Channel.CONSOLE_WARN]: string\n  [Channel.CONSOLE_ERROR]: string\n  [Channel.CONSOLE_INFO]: string\n  [Channel.TERM_EXIT]: string\n  [Channel.TERM_KILL]: string\n  [Channel.SET_TRAY]: { label: string; scripts: string[] }\n  [Channel.KIT_LOG]: string\n  [Channel.KIT_WARN]: string\n  [Channel.COPY_PATH_AS_PICTURE]: string\n  [Channel.DEV_TOOLS]: any\n  [Channel.EXIT]: number\n  [Channel.NOTIFY]: {\n    title: string\n    message: string\n    icon: string\n  }\n  [Channel.SHEBANG]: ShebangConfig\n  [Channel.SELECT_FILE]: string\n  [Channel.SELECT_FOLDER]: string\n  [Channel.REVEAL_FILE]: string\n  [Channel.PLAY_AUDIO]: AudioOptions\n  [Channel.STOP_AUDIO]: undefined\n  [Channel.STOP_MIC]: undefined\n  [Channel.SPEAK_TEXT]: any\n\n  [Channel.REMOVE_CLIPBOARD_HISTORY_ITEM]: string\n  [Channel.SEND_KEYSTROKE]: Partial<KeyData>\n  [Channel.SET_CONFIG]: Partial<Config>\n  [Channel.SET_DISABLE_SUBMIT]: boolean\n  [Channel.SET_BOUNDS]: Partial<Rectangle>\n  [Channel.SET_CHOICES]: {\n    choices: Choice[]\n    skipInitialSearch?: boolean\n    inputRegex?: string\n    generated?: boolean\n  }\n  [Channel.SET_FORM_DATA]: {\n    [key: string]: string\n  }\n  [Channel.SET_UNFILTERED_CHOICES]: Choice[]\n  [Channel.SET_CHOICES_CONFIG]: { preload: boolean }\n  [Channel.SET_SCORED_CHOICES]: ScoredChoice[]\n  [Channel.SET_SCORED_FLAGS]: ScoredChoice[]\n  [Channel.SET_DARK]: boolean\n\n  [Channel.SET_DESCRIPTION]: string\n  [Channel.SET_EDITOR_CONFIG]: EditorConfig\n  [Channel.SET_EDITOR_SUGGESTIONS]: string[]\n  [Channel.APPEND_EDITOR_VALUE]: string\n  [Channel.SET_ENTER]: string\n  [Channel.SET_FIELDS]: Field[]\n  [Channel.SET_FLAGS]: FlagsObject\n  [Channel.SET_FLAG_VALUE]: any\n  [Channel.SET_FORM_HTML]: { html: string; formData: any }\n  [Channel.SET_FORM]: PromptConfig[]\n  [Channel.SET_HINT]: string\n  [Channel.SET_IGNORE_BLUR]: boolean\n  [Channel.SET_KIT_STATE]: any\n  [Channel.SET_INPUT]: string\n  [Channel.APPEND_INPUT]: string\n  [Channel.SCROLL_TO]: 'top' | 'bottom' | 'center' | null\n  [Channel.SET_FILTER_INPUT]: string\n  [Channel.SET_FOCUSED]: string\n  [Channel.SET_FOOTER]: string\n  [Channel.SET_LOADING]: boolean\n  [Channel.SET_PROGRESS]: number\n  [Channel.SET_RUNNING]: boolean\n  [Channel.SET_LOG]: string\n  [Channel.SET_LOGO]: string\n  [Channel.SET_NAME]: string\n  [Channel.SET_OPEN]: boolean\n  [Channel.SET_PANEL]: string\n  [Channel.SET_PID]: number\n  [Channel.SET_PLACEHOLDER]: string\n  [Channel.SET_PREVIEW]: string\n  [Channel.SET_PROMPT_BLURRED]: boolean\n  [Channel.SET_PROMPT_DATA]: PromptData\n  [Channel.SET_PROMPT_PROP]: any\n  [Channel.SET_READY]: boolean\n  [Channel.SET_RESIZE]: boolean\n  [Channel.SET_PAUSE_RESIZE]: boolean\n  [Channel.SET_RESIZING]: boolean\n  [Channel.SET_SCRIPT]: Script\n  [Channel.SET_SHORTCUTS]: Shortcut[]\n  [Channel.DEBUG_SCRIPT]: Script\n  [Channel.SET_SCRIPT_HISTORY]: Script[]\n  [Channel.SET_SPLASH_BODY]: string\n  [Channel.SET_SPLASH_HEADER]: string\n  [Channel.SET_SPLASH_PROGRESS]: number\n  [Channel.SET_STATUS]: KitStatus\n  [Channel.SET_SELECTED_TEXT]: string\n  [Channel.SET_SUBMIT_VALUE]: any\n  [Channel.SET_TAB_INDEX]: number\n  [Channel.SET_TEXTAREA_CONFIG]: TextareaConfig\n  [Channel.SET_TEXTAREA_VALUE]: string\n  [Channel.SET_THEME]: any\n  [Channel.SET_TEMP_THEME]: any\n  [Channel.SET_VALUE]: any\n  [Channel.START]: string\n  [Channel.SHOW]: { options: ShowOptions; html: string }\n  [Channel.SHOW_LOG_WINDOW]: string\n  [Channel.SHOW_IMAGE]: {\n    options: ShowOptions\n    image: string | { src: string }\n  }\n  [Channel.SWITCH_KENV]: string\n  [Channel.TERMINAL]: string\n  [Channel.TERM_WRITE]: string\n  [Channel.TOAST]: {\n    text: string\n    options: any\n  }\n  [Channel.TOGGLE_BACKGROUND]: string\n  [Channel.SET_SEARCH_DEBOUNCE]: boolean\n  [Channel.VALUE_INVALID]: string\n  [Channel.TERMINATE_PROCESS]: number\n\n  [Channel.KEYBOARD_CONFIG]: { autoDelayMs: number }\n  [Channel.KEYBOARD_TYPE]: string\n  [Channel.KEYBOARD_PRESS_KEY]: CoreKeyEnum[]\n  [Channel.KEYBOARD_RELEASE_KEY]: CoreKeyEnum[]\n\n  [Channel.SCRIPT_CHANGED]: Script\n  [Channel.SCRIPT_REMOVED]: Script\n  [Channel.SCRIPT_ADDED]: Script\n\n  [Channel.TRASH]: {\n    input: Parameters<Trash>[0]\n    options: Parameters<Trash>[1]\n  }\n\n  [Channel.COPY]: string\n  [Channel.PASTE]: undefined\n\n  [Channel.VERIFY_FULL_DISK_ACCESS]: undefined\n  [Channel.SET_ALWAYS_ON_TOP]: boolean\n  [Channel.SET_APPEARANCE]: Appearance\n  [Channel.PRELOAD]: string\n  [Channel.MIC_STREAM]: boolean\n  [Channel.START_MIC]: MicConfig\n  [Channel.SCREENSHOT]: ScreenshotConfig\n  [Channel.SYSTEM_CLICK]: boolean\n  [Channel.SYSTEM_KEYDOWN]: boolean\n  [Channel.SYSTEM_KEYUP]: boolean\n  [Channel.SYSTEM_MOUSEDOWN]: boolean\n  [Channel.SYSTEM_MOUSEUP]: boolean\n  [Channel.SYSTEM_MOUSEMOVE]: boolean\n  [Channel.SYSTEM_WHEEL]: boolean\n  [Channel.STAMP_SCRIPT]: Script\n  [Channel.VITE_WIDGET_SEND]: any\n}\nexport interface Send {\n  (channel: Channel | GetAppData | SendNoOptions): void\n  <C extends keyof ChannelMap, T extends ChannelMap[C]>(channel: C, data: T): void\n}\n\nexport interface SendData<C extends keyof ChannelMap> {\n  pid: number\n  kitScript: string\n  channel: C\n  value: ChannelMap[C]\n}\n\nexport type GenericSendData = SendData<keyof ChannelMap>\n\nexport type SetHint = (hint: string) => void\n\nexport type SetName = (name: string) => void\n\nexport type SetDescription = (description: string) => void\n\nexport type SetInput = (input: string) => Promise<void>\n\nexport type ScrollTo = (location: 'top' | 'bottom' | 'center') => Promise<void>\n\nexport type SetTextareaValue = (value: string) => void\n\nexport type SetIgnoreBlur = (ignoreBlur: boolean) => void\n\nexport type SetFocused = (id: string) => void\n\nexport type SetResize = (resize: boolean) => void\n\nexport type SetLoading = (loading: boolean) => void\n\nexport type SetProgress = (progress: number) => void\nexport type ShowDeprecated = (message: string) => Promise<void>\n\nexport type SetStatus = (status: KitStatus) => void\n\nexport interface KitTheme {\n  '--color-primary-light': string\n  '--color-secondary-light': string\n  '--color-primary': string\n  '--color-secondary-dark': string\n  '--color-background-light': string\n  '--color-background-dark': string\n  '--opacity-themelight': string\n  '--opacity-themedark': string\n  name: string\n  foreground: string\n  background: string\n  accent: string\n  ui: string\n  opacity: string\n}\n\nexport type SetTheme = (theme: string) => Promise<void>\n\nexport type SetPlaceholder = (placeholder: string) => Promise<void>\n\nexport type SetEnter = (text: string) => Promise<void>\n\nexport type SetPanel = (html: string, containerClasses?: string) => Promise<void>\n\nexport type SetFooter = (footer: string) => Promise<void>\n\nexport type SetPrompt = (config: Partial<PromptData>) => Promise<void>\nexport type SetPreview = (html: string, containerClasses?: string) => Promise<void>\nexport type SetBounds = (bounds: Partial<Rectangle>) => Promise<void>\n\nexport type SendKeystroke = (keyData: Partial<KeyData>) => void\n\nexport type GetBounds = () => Promise<Rectangle>\n\nexport type GetActiveScreen = () => Promise<Display>\n\nexport type GetEditorHistory = () => Promise<\n  {\n    content: string\n    timestamp: string\n  }[]\n>\n\nexport type Submit = (value: any) => Promise<void>\n\nexport type ShowOptions = BrowserWindowConstructorOptions & {\n  ttl?: number\n  draggable?: boolean\n  center?: boolean\n}\n\nexport type ShowAppWindow = (content: string, options?: ShowOptions) => Promise<void>\n\nexport interface ClipboardItem {\n  id: string\n  name: string\n  description: string\n  value: string\n  type: string\n  timestamp: string\n  maybeSecret: boolean\n  preview?: string\n}\n\nexport interface System {\n  onClick: typeof global.onClick\n  onMousedown: typeof global.onMousedown\n  onMouseup: typeof global.onMouseup\n  onWheel: typeof global.onWheel\n  onKeydown: typeof global.onKeydown\n  onKeyup: typeof global.onKeyup\n}\n/**\n * A handler for a script event. Receives the full path to the script that was affected\n * @param script The script that was added, changed, or removed.\n */\ntype ScriptHandler = (scriptPath: string) => void\ntype ScriptEventHandler = (handler: ScriptHandler) => removeListener\n\nexport type App = {\n  /**\n   * A handler for a script event. Receives the full path to the script that was added.\n   * @param scriptPath The full path to the script that was added\n   */\n  onScriptAdded?: ScriptEventHandler\n  /**\n   * A handler for a script event. Receives the full path to the script that was changed.\n   * @param scriptPath The full path to the script that was changed\n   */\n  onScriptChanged?: ScriptEventHandler\n  /**\n   * A handler for a script event. Receives the full path to the script that was removed.\n   * @param scriptPath The full path to the script that was removed\n   */\n  onScriptRemoved?: ScriptEventHandler\n}\n\nexport interface Keyboard {\n  type: (...text: (string | typeof CoreKeyEnum)[]) => Promise<void>\n  /**\n   * Types text or keys with a delay between each keystroke.\n   * @param config Configuration object for typing.\n   * @param config.rate The delay in milliseconds between keystrokes. Note: values less than 700 can give weird results.\n   * @param config.textOrKeys The text or keys to type.\n   */\n  typeDelayed: (config: { rate: number; textOrKeys: string | Key[] }) => Promise<void>\n  /**\n   * Presses a key.\n   * @param keys The keys to press.\n   */\n  pressKey: (...keys: CoreKeyEnum[]) => Promise<void>\n  /**\n   * Releases a key.\n   * @param keys The keys to release.\n   */\n  releaseKey: (...keys: CoreKeyEnum[]) => Promise<void>\n  /**\n   * Taps a key.\n   * @param keys The keys to tap.\n   */\n  tap: (...keys: CoreKeyEnum[]) => Promise<void>\n  /**\n   * @deprecated Use `keyboard.typeDelayed` or set `KIT_TYPING_RATE` and use `keyboard.type` instead.\n   */\n  config: (config: { autoDelayMs: number }) => Promise<void>\n}\n\nexport interface Mouse {\n  leftClick: () => Promise<void>\n  rightClick: () => Promise<void>\n  move: (points: { x: number; y: number }[]) => Promise<void>\n  setPosition: (position: { x: number; y: number }) => Promise<void>\n}\n\nexport interface Bookmark {\n  title: string\n  url: string\n}\n\nexport interface KitClipboard {\n  readText: () => Promise<string>\n  readHTML: () => Promise<string>\n  readImage: () => Promise<Buffer>\n  readRTF: () => Promise<string>\n  readBookmark: () => Promise<Bookmark>\n  readFindText: () => Promise<string>\n\n  writeText: (text: string) => Promise<void>\n  writeHTML: (html: string) => Promise<void>\n  writeImage: (image: Buffer) => Promise<void>\n  writeRTF: (rtf: string) => Promise<void>\n  writeBookmark: (bookmark: Bookmark) => Promise<void>\n  writeFindText: (text: string) => Promise<void>\n\n  /**\n   * Write a buffer to the clipboard for a custom type (e.g., file URLs, Finder file references).\n   * @param type The clipboard type (e.g., 'public.file-url', 'NSFilenamesPboardType').\n   * @param buffer The buffer to write.\n   * #### Example\n   * ```ts\n   * await clipboard.writeBuffer('public.file-url', Buffer.from(`file://${encodeURI(filePath)}`, 'utf8'))\n   * ```\n   */\n  writeBuffer: (type: clipboardBufferType, buffer: Buffer) => Promise<void>\n\n  clear: () => Promise<void>\n}\n\nexport type RegisterShortcut = (shortcut: string, callback: () => void) => Promise<void>\n\nexport type UnregisterShortcut = (shortcut: string) => Promise<void>\n\nexport type GuideSection = {\n  name: string\n  raw: string\n  group: string\n  comments: {\n    [key: string]: string\n  }\n}\nexport type Docs<T = any> = (\n  markdownPath: string,\n  options?:\n    | Partial<PromptConfig>\n    | ((sections?: GuideSection[], tokens?: MarkedToken[]) => Promise<Partial<PromptConfig>>)\n) => Promise<T>\n\nexport type ExecLog = (command: string, logger?: typeof console.log) => ChildProcess\n\nexport interface AppApi {\n  textarea: TextArea\n  drop: Drop\n  editor: Editor\n  template: Template\n  form: Form\n  fields: Fields\n  emoji: Emoji\n  div: Div\n  hotkey: Hotkey\n  prompt: Prompt\n\n  kitPrompt: (promptConfig: PromptConfig) => Promise<any>\n  send: Send\n  setFocused: SetFocused\n  setPlaceholder: SetPlaceholder\n  setEnter: SetEnter\n  setDiv: SetPanel\n  setPanel: SetPanel\n  setFooter: SetFooter\n  setPreview: SetPreview\n  setPrompt: SetPrompt\n  setBounds: SetBounds\n  getBounds: GetBounds\n  getActiveScreen: GetActiveScreen\n  setHint: SetHint\n  setName: SetName\n  setDescription: SetDescription\n  setInput: SetInput\n  setFilterInput: SetInput\n  showDeprecated: ShowDeprecated\n  setTextareaValue: SetTextareaValue\n\n  setIgnoreBlur: SetIgnoreBlur\n  setResize: SetResize\n  setLoading: SetLoading\n  setProgress: SetProgress\n  setStatus: SetStatus\n  setTheme: SetTheme\n  setScriptTheme: SetTheme\n\n  showImage: ShowAppWindow\n\n  currentOnTab: any\n  addChoice: AddChoice\n  setChoices: SetChoices\n  clearTabs: () => void\n  getDataFromApp: (channel: Channel) => Promise<any>\n  sendWait: (channel: Channel, value: any) => Promise<any>\n  sendWaitLong: (channel: Channel, value: any) => Promise<any>\n  getBackgroundTasks: () => Promise<{\n    channel: string\n    tasks: Background[]\n  }>\n  getSchedule: () => Promise<{\n    channel: string\n    schedule: Schedule[]\n  }>\n  getScriptsState: () => Promise<{\n    channel: string\n    tasks: Background[]\n    schedule: Schedule[]\n  }>\n\n  memoryMap: Map<string, any>\n\n  show: () => Promise<void>\n  hide: (hideOptions?: HideOptions) => Promise<void>\n  blur: () => Promise<void>\n\n  dev: (object: any) => Promise<void>\n  getClipboardHistory: () => Promise<ClipboardItem[]>\n  getEditorHistory: GetEditorHistory\n  removeClipboardItem: (id: string) => void\n  setTab: (tabName: string) => void\n  submit: Submit\n  mainScript: (input?: string, tab?: string) => Promise<void>\n\n  appKeystroke: SendKeystroke\n  Key: typeof CoreKeyEnum\n\n  log: typeof console.log\n  warn: typeof console.warn\n\n  keyboard: Keyboard\n  clipboard: KitClipboard\n  execLog: ExecLog\n\n  focus: () => Promise<void>\n  setAlwaysOnTop: (alwaysOnTop: boolean) => Promise<void>\n  docs: Docs\n  getAppState: any\n\n  registerShortcut: RegisterShortcut\n  unregisterShortcut: UnregisterShortcut\n}\n\nexport interface Background {\n  filePath: string\n  process: {\n    spawnargs: string[]\n    pid: number\n    start: string\n  }\n}\n\nexport interface Schedule extends Choice {\n  date: Date\n}\n\nexport interface HideOptions {\n  preloadScript?: string\n}\n\ndeclare global {\n  var textarea: TextArea\n  /**\n   * Use `await drop()` to prompt the user to drop a file or folder.\n   * #### drop example\n   * ```ts\n   * // Dropping text or an image from the browser returns a string\n   * let fileInfos = await drop()\n   * let filePaths = fileInfos.map(f => f.path).join(\",\")\n   * await div(md(filePaths))\n   * ```\n   * [Examples](https://scriptkit.com?query=drop) | [Docs](https://johnlindquist.github.io/kit-docs/#drop) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=drop)\n   */\n  var drop: Drop\n  /**\n   * `div` displays HTML. Pass a string of HTML to `div` to render it. `div` is commonly used in conjunction with `md` to render markdown.\n   * 1. Just like arg, the first argument is a string or a prompt configuration object.\n   * 2. Optional:The second argument is a string of tailwind class to apply to the container, e.g., `bg-white p-4`.\n   * #### div example\n   * ```ts\n   * await div(`Hello world!`)\n   * ```\n   * #### div with markdown\n   * ```ts\n   * await div(md(`\n   * # example!\n   *\n   * #### div actions example\n   * ```ts\n   * const html = md(`# Hello World`);\n   * await div(html, [\n   *   {\n   *     name: \"Goodbye\",\n   *     onAction: () => {\n   *       setDiv(\"Goodbye\");\n   *     },\n   *   },\n   * ]);\n   * ```\n   *\n   * #### div css example\n   * ```ts\n   * await div({\n   *   html: md(`# Hello World\n   * <p style=\"color: red;\">This is a note</p>\n   *     `),\n   *   css: `\n   *   body{\n   *     background-color: white !important;\n   *   }\n   * h1{\n   *     color: blue !important;\n   *   }\n   *     `,\n   * });\n   * ```\n   *\n   * [Examples](https://scriptkit.com?query=div) | [Docs](https://johnlindquist.github.io/kit-docs/#div) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=div)\n   */\n  var div: Div\n  /**\n   * Use an HTML form which returns an Object based on the names of the form fields.\n   * #### form example\n   * ```ts\n   * let result = await form(`\n   * <div class=\"p-4\">\n   *     <input type=\"text\" name=\"textInput\" placeholder=\"Text Input\" />\n   *     <input type=\"password\" name=\"passwordInput\" placeholder=\"Password\" />\n   *     <input type=\"email\" name=\"emailInput\" placeholder=\"Email\" />\n   *     <input type=\"number\" name=\"numberInput\" placeholder=\"Number\" />\n   *     <input type=\"date\" name=\"dateInput\" placeholder=\"Date\" />\n   *     <input type=\"time\" name=\"timeInput\" placeholder=\"Time\" />\n   *     <input type=\"datetime-local\" name=\"dateTimeInput\" placeholder=\"Date and Time\" />\n   *     <input type=\"month\" name=\"monthInput\" placeholder=\"Month\" />\n   *     <input type=\"week\" name=\"weekInput\" placeholder=\"Week\" />\n   *     <input type=\"url\" name=\"urlInput\" placeholder=\"URL\" />\n   *     <input type=\"search\" name=\"searchInput\" placeholder=\"Search\" />\n   *     <input type=\"tel\" name=\"telInput\" placeholder=\"Telephone\" />\n   *     <input type=\"color\" name=\"colorInput\" placeholder=\"Color\" />\n   *     <textarea name=\"textareaInput\" placeholder=\"Textarea\"></textarea>\n   * </div>\n   * `)\n   * inspect(result)\n   * ```\n   * [Examples](https://scriptkit.com?query=form) | [Docs](https://johnlindquist.github.io/kit-docs/#form) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=form)\n   */\n  var form: Form\n  /**\n   * The `fields` prompt allows you to rapidly create a form with fields.\n   * 1. An array of labels or objects with label and field properties.\n   * #### fields example\n   * ```ts\n   * let [first, last] = await fields([\"First name\", \"Last name\"])\n   * ```\n   * #### fields edit the keys and values of an object\n   * ```ts\n   * let data = {\n   *   name: \"John\",\n   *   age: 42,\n   *   location: \"USA\",\n   * };\n   * let result = await fields(\n   *   Object.entries(data).map(([key, value]) => ({\n   *     name: key,\n   *     label: key,\n   *     value: String(value),\n   *   }))\n   * );\n   * let newData = Object.entries(data).map(([key], i) => ({\n   *   [key]: result[i],\n   * }));\n   * inspect(newData);\n   * ```\n   * #### fields with field properties\n   * ```ts\n   * let [name, age] = await fields([\n   *     {\n   *         name: \"name\",\n   *         label: \"Name\",\n   *         type: \"text\",\n   *         placeholder: \"John\"\n   *     },\n   *     {\n   *         name: \"age\",\n   *         label: \"Age\",\n   *         type: \"number\",\n   *         placeholder: \"40\"\n   *     }\n   * ])\n   * ```\n   * [Examples](https://scriptkit.com?query=fields) | [Docs](https://johnlindquist.github.io/kit-docs/#fields) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=fields)\n   */\n  var fields: Fields\n  var emoji: Emoji\n  /**\n   * The `editor` function opens a text editor with the given text. The editor is a full-featured \"Monaco\" editor with syntax highlighting, find/replace, and more. The editor is a great way to edit or update text to write a file. The default language is markdown.\n   * #### editor example\n   * ```ts\n   * let content = await editor()\n   * ```\n   * #### editor load remote text content\n   * ```ts\n   * let response = await get(`https://raw.githubusercontent.com/johnlindquist/kit/main/API.md`)\n   * let content = await editor(response.data)\n   * ```\n   * #### editor with initial content\n   * ```ts\n   * let content = await editor(\"Hello world!\")\n   * ```\n   * #### editor actions example\n   * ```ts\n   * await editor(\"Hello World\", [\n   *   {\n   *     name: \"Exclaim\",\n   *     shortcut: `${cmd}+2`,\n   *     visible: true, // show the action in the shortcuts bar\n   *     onAction: () => {\n   *       editor.append(\"!\");\n   *     },\n   *   },\n   *   {\n   *     name: \"Clear\",\n   *     shortcut: `${cmd}+`,\n   *     visible: true, // show the action in the shortcuts bar\n   *     onAction: () => {\n   *       editor.setText(\"\");\n   *     },\n   *   },\n   * ]);\n   * ```\n   * [Examples](https://scriptkit.com?query=editor) | [Docs](https://johnlindquist.github.io/kit-docs/#editor) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=editor)\n   */\n  var editor: Editor\n  /**\n   * The `template` prompt will present the editor populated by your template. You can then tab through each variable in your template and edit it.\n   * 1. The first argument is a string template. Add variables using $1, $2, etc. You can also use\n   * [//]: # (\\${1:default value} to set a default value.&#41;)\n   * #### template example\n   * ```ts\n   * let text = await template(`Hello $1!`)\n   * ```\n   * #### template standard usage\n   * ```ts\n   * let text = await template(`\n   * Dear \\${1:name},\n   * Please meet me at \\${2:address}\n   * Sincerely, John`)\n   * ```\n   * [Examples](https://scriptkit.com?query=template) | [Docs](https://johnlindquist.github.io/kit-docs/#template) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=template)\n   */\n  var template: Template\n\n  /**\n   * The `hotkey` prompt allows you to press modifier keys, then submits once you've pressed a non-monodifier key. For example, press `command` then `e` to submit key info about the `command` and `e` keys:\n   * ```json\n   * {\n   *   \"key\": \"e\",\n   *   \"command\": true,\n   *   \"shift\": false,\n   *   \"option\": false,\n   *   \"control\": false,\n   *   \"fn\": false,\n   *   \"hyper\": false,\n   *   \"os\": false,\n   *   \"super\": false,\n   *   \"win\": false,\n   *   \"shortcut\": \"command e\",\n   *   \"keyCode\": \"KeyE\"\n   * }\n   * ```\n   * This can be useful when you want to use a palette of commands and trigger each of them by switching on a hotkey.\n   * 1. Optional: The first argument is a string to display in the prompt.\n   * #### hotkey example\n   * ```ts\n   * let keyInfo = await hotkey()\n   * await editor(JSON.stringify(keyInfo, null, 2))\n   * ```\n   * [Examples](https://scriptkit.com?query=hotkey) | [Docs](https://johnlindquist.github.io/kit-docs/#hotkey) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=hotkey)\n   */\n  var hotkey: Hotkey\n  var send: Send\n  var sendWait: (channel: Channel, value?: any, timeout?: number) => Promise<any>\n  var headers: Record<string, string>\n  var sendResponse: (body: any, headers?: Record<string, string>) => Promise<any>\n  var sendWaitLong: (channel: Channel, value?: any, timeout?: number) => Promise<any>\n\n  var setFocused: SetFocused\n  var setEnter: SetEnter\n  var setPlaceholder: SetPlaceholder\n  /**\n   * Sets the panel content.\n   * #### setPanel example\n   * ```ts\n   * await setPanel(\"<h1>Hello, world!</h1>\")\n   * ```\n   * [Examples](https://scriptkit.com?query=setPanel) | [Docs](https://johnlindquist.github.io/kit-docs/#setPanel) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setPanel)\n   */\n  var setPanel: SetPanel\n  var setFooter: SetFooter\n  var addChoice: AddChoice\n  var appendChoices: AppendChoices\n  var setChoices: SetChoices\n  var setFormData: SetFormData\n  var clearTabs: () => void\n  var setDiv: SetPanel\n  /**\n   * Sets the preview content.\n   * #### setPreview example\n   * ```ts\n   * await setPreview(\"<h1>Preview</h1>\")\n   * ```\n   * [Examples](https://scriptkit.com?query=setPreview) | [Docs](https://johnlindquist.github.io/kit-docs/#setPreview) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setPreview)\n   */\n  var setPreview: SetPreview\n  /**\n   * Sets the prompt content.\n   * #### setPrompt example\n   * ```ts\n   * await setPrompt(\"<h1>Enter your name:</h1>\")\n   * ```\n   * [Examples](https://scriptkit.com?query=setPrompt) | [Docs](https://johnlindquist.github.io/kit-docs/#setPrompt) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setPrompt)\n   */\n  var setPrompt: SetPrompt\n  var setBounds: SetBounds\n  var getBounds: GetBounds\n  var getActiveScreen: GetActiveScreen\n  var setHint: SetHint\n  var setName: SetName\n  var setDescription: SetDescription\n  var setInput: SetInput\n  var appendInput: SetInput\n  var scrollTo: ScrollTo\n  var setFilterInput: SetInput\n  var setTextareaValue: SetTextareaValue\n  /**\n   * Sets whether to ignore blur events.\n   * #### setIgnoreBlur example\n   * ```ts\n   * await setIgnoreBlur(true)\n   * ```\n   * [Examples](https://scriptkit.com?query=setIgnoreBlur) | [Docs](https://johnlindquist.github.io/kit-docs/#setIgnoreBlur) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setIgnoreBlur)\n   */\n  var setIgnoreBlur: SetIgnoreBlur\n  var setResize: SetResize\n  var setPauseResize: SetResize\n  var setLoading: SetLoading\n  var setProgress: SetProgress\n  var setRunning: SetLoading\n  /**\n   * Set the system menu bar icon and message.\n   * Each status message will be appended to a list.\n   * Clicking on the menu will display the list of messages.\n   * The status and messages will be dismissed once the tray closes, so use `log` if you want to persist messages.\n   * #### setStatus example\n   * ```ts\n   * await setStatus({\n   *   message: \"Working on it...\",\n   *   status: \"busy\",\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=setStatus) | [Docs](https://johnlindquist.github.io/kit-docs/#setStatus) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setStatus)\n   */\n  var setStatus: SetStatus\n  var setTheme: SetTheme\n  var setScriptTheme: SetTheme\n\n  var showImage: ShowAppWindow\n\n  /**\n   * Shows the main prompt.\n   * #### show example\n   * ```ts\n   * await show()\n   * ```\n   * [Examples](https://scriptkit.com?query=show) | [Docs](https://johnlindquist.github.io/kit-docs/#show) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=show)\n   */\n  var show: () => Promise<void>\n  /**\n   * Hides the main prompt.\n   * #### hide example\n   * ```ts\n   * await hide()\n   * ```\n   * [Examples](https://scriptkit.com?query=hide) | [Docs](https://johnlindquist.github.io/kit-docs/#hide) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=hide)\n   */\n  var hide: (hideOptions?: HideOptions) => Promise<void>\n  /**\n   * Returns focus to the previous app.\n   * #### blur example\n   * ```ts\n   * import { URL, fileURLToPath } from \"node:url\";\n   * await editor({\n   *   onInit: async () => {\n   *     const { workArea } = await getActiveScreen();\n   *     const topLeft = { x: workArea.x, y: workArea.y };\n   *     const size = { height: 900, width: 200 };\n   *     await setBounds({\n   *       ...topLeft,\n   *       ...size,\n   *     });\n   *     await blur();\n   * // get path to current file\n   *     const currentScript = fileURLToPath(new URL(import.meta.url));\n   *     const content = await readFile(currentScript, \"utf8\");\n   *     const lines = content.split(\"\\n\");\n   *     for await (const line of lines) {\n   *       editor.append(`${line}\\n`);\n   *       await wait(100);\n   *     }\n   *   },\n   * });\n   * ```\n   * [Examples](https://scriptkit.com?query=blur) | [Docs](https://johnlindquist.github.io/kit-docs/#blur) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=blur)\n   */\n  var blur: () => Promise<void>\n\n  /**\n   * `dev` Opens a standalone instance of Chrome Dev Tools so you can play with JavaScript in the console. Passing in an object will set the variable `x` to your object in the console making it easy to inspect.\n   * 1. Optional: the first argument is an object to set to the variable `x` to in the console.\n   * #### dev example\n   * ```ts\n   * dev()\n   * ```\n   * #### dev with object\n   * ```ts\n   * dev({\n   *     name: \"John\",\n   *     age: 40\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=dev) | [Docs](https://johnlindquist.github.io/kit-docs/#dev) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=dev)\n   */\n  var dev: (object?: any) => Promise<void>\n  /**\n   * Gets the clipboard history from the in-memory clipboard\n   * #### getClipboardHistory example\n   * ```ts\n   * const history = await getClipboardHistory();\n   * const text = await arg(\"Select from clipboard history\", history);\n   * await editor(text);\n   * ```\n   * [Examples](https://scriptkit.com?query=getClipboardHistory) | [Docs](https://johnlindquist.github.io/kit-docs/#getClipboardHistory) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getClipboardHistory)\n   */\n  var getClipboardHistory: () => Promise<ClipboardItem[]>\n  /**\n   * Clears the clipboard history.\n   * #### clearClipboardHistory example\n   * ```ts\n   * await clearClipboardHistory()\n   * ```\n   * [Examples](https://scriptkit.com?query=clearClipboardHistory) | [Docs](https://johnlindquist.github.io/kit-docs/#clearClipboardHistory) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=clearClipboardHistory)\n   */\n  var clearClipboardHistory: () => Promise<void>\n  var getEditorHistory: GetEditorHistory\n  /**\n   * Removes an item from the clipboard.\n   * #### removeClipboardItem example\n   * ```ts\n   * await removeClipboardItem(item)\n   * ```\n   * [Examples](https://scriptkit.com?query=removeClipboardItem) | [Docs](https://johnlindquist.github.io/kit-docs/#removeClipboardItem) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=removeClipboardItem)\n   */\n  var removeClipboardItem: (id: string) => Promise<void>\n  var setTab: (tabName: string) => void\n  /**\n   * Forcefully submit a value from an open prompt\n   * #### submit example\n   * ```ts\n   * const result = await arg(\n   *   {\n   *     placeholder: \"Pick one in under 3 seconds or I'll pick one for you\",\n   *     onInit: async () => {\n   *       await wait(3000);\n   *       submit(\"broccoli\"); //forces a submission\n   *     },\n   *   },\n   *   [\"cookie\", \"donut\"]\n   * );\n   * // Wait for 1 second\n   * await editor(result);\n   * ```\n   * [Examples](https://scriptkit.com?query=submit) | [Docs](https://johnlindquist.github.io/kit-docs/#submit) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=submit)\n   */\n  var submit: Submit\n  var mainScript: (input?: string, tab?: string) => Promise<void>\n\n  var appKeystroke: SendKeystroke\n  var Key: typeof CoreKeyEnum\n\n  var log: typeof console.log\n  var warn: typeof console.warn\n\n  /**\n   * > Note: Please use with caution\n   * Type and/or tap keys on your keyboard\n   * #### keyboard example\n   * ```ts\n   * prompt: false, // 99% of the time you'll want to hide the prompt\n   * };\n   * await keyboard.type(\"Hello, world!\");\n   * ```\n   * #### keyboard example keys\n   * ```ts\n   * prompt: false,\n   * };\n   * await keyboard.tap(Key.LeftSuper, Key.A);\n   * await wait(100);\n   * await keyboard.tap(Key.LeftSuper, Key.C);\n   * await wait(100);\n   * await keyboard.tap(Key.LeftSuper, Key.N);\n   * await wait(100);\n   * await keyboard.tap(Key.LeftSuper, Key.V);\n   * ```\n   * [Examples](https://scriptkit.com?query=keyboard) | [Docs](https://johnlindquist.github.io/kit-docs/#keyboard) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=keyboard)\n   */\n  var keyboard: Keyboard\n  /**\n   * > Note: Please use with caution\n   * move and click the system mouse\n   * #### mouse example\n   * ```ts\n   * await mouse.move([\n   *   { x: 100, y: 100 },\n   *   { x: 200, y: 200 },\n   * ]);\n   * await mouse.leftClick();\n   * await wait(100);\n   * await mouse.rightClick();\n   * await wait(100);\n   * await mouse.setPosition({ x: 1000, y: 1000 });\n   * ```\n   * [Examples](https://scriptkit.com?query=mouse) | [Docs](https://johnlindquist.github.io/kit-docs/#mouse) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=mouse)\n   */\n  var mouse: Mouse\n  /**\n   * Read and write to the system clipboard\n   * #### clipboard example\n   * ```ts\n   * // Write and read text to the clipboard\n   * await clipboard.writeText(\"Hello from Script Kit!\");\n   * const result = await clipboard.readText();\n   * await editor(result);\n   * ```\n   * #### clipboard example image\n   * ```ts\n   * const iconPath = kitPath(\"images\", \"icon.png\");\n   * const imageBuffer = await readFile(iconPath);\n   * // Write and read image buffers to the clipboard\n   * await clipboard.writeImage(imageBuffer);\n   * const resultBuffer = await clipboard.readImage();\n   * const outputPath = home(\"Downloads\", \"icon-copy.png\");\n   * await writeFile(outputPath, resultBuffer);\n   * await revealFile(outputPath);\n   * ```\n   * [Examples](https://scriptkit.com?query=clipboard) | [Docs](https://johnlindquist.github.io/kit-docs/#clipboard) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=clipboard)\n   */\n  var clipboard: KitClipboard\n\n  var execLog: ExecLog\n\n  var focus: () => Promise<void>\n  var setAlwaysOnTop: (alwaysOnTop: boolean) => Promise<void>\n\n  var docs: Docs\n  var getAppState: any\n\n  var registerShortcut: RegisterShortcut\n  var unregisterShortcut: UnregisterShortcut\n  var startDrag: (filePath: string, iconPath?: string) => void\n  /**\n   * Grab a color from your desktop\n   * > Note: Behaves best on Mac. Windows _might_ be locked to only the Script Kit app prompt.\n   * ```\n   * {\n   *     \"sRGBHex\": \"#e092d9\",\n   *     \"rgb\": \"rgb(224, 146, 217)\",\n   *     \"rgba\": \"rgba(224, 146, 217, 1)\",\n   *     \"hsl\": \"hsl(305, 56%, 73%)\",\n   *     \"hsla\": \"hsla(305, 56%, 73%, 1)\",\n   *     \"cmyk\": \"cmyk(0%, 35%, 3%, 12%)\"\n   *   }\n   * ```\n   * #### eyeDropper example\n   * ```ts\n   * const result = await eyeDropper();\n   * await editor(JSON.stringify(result, null, 2));\n   * ```\n   * [Examples](https://scriptkit.com?query=eyeDropper) | [Docs](https://johnlindquist.github.io/kit-docs/#eyeDropper) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=eyeDropper)\n   */\n  var eyeDropper: () => Promise<{\n    sRGBHex: string\n  }>\n  /**\n   * A chat prompt. Use `chat.addMessage()` to insert messages into the chat.\n   * > Note: Manually invoke `submit` inside of a shortcut/action/etc to end the chat.\n   * Also see the included \"chatgpt\" example for a much more advanced scenario.\n   * #### chat example\n   * ```ts\n   * await chat({\n   *   onInit: async () => {\n   *     chat.addMessage({\n   *       // Note: text and position are implemented, there are other properties that are a WIP\n   *       text: \"You like Script Kit\",\n   *       position: \"left\",\n   *     })\n   * await wait(1000)\n   * chat.addMessage({\n   *       text: \"Yeah! It's awesome!\",\n   *       position: \"right\",\n   *     })\n   * await wait(1000)\n   * chat.addMessage({\n   *       text: \"I know, right?!?\",\n   *       position: \"left\",\n   *     })\n   * await wait(1000)\n   * chat.addMessage({\n   *       text: `<img src=\"https://media0.giphy.com/media/yeE6B8nEKcTMWWvBzD/giphy.gif?cid=0b9ef2f49arnbs4aajuycirjsclpbtimvib6a76g7afizgr5&ep=v1_gifs_search&rid=giphy.gif\" width=\"200px\" />`,\n   *       position: \"right\",\n   *     })\n   *   },\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=chat) | [Docs](https://johnlindquist.github.io/kit-docs/#chat) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=chat)\n   */\n  var chat: Chat\n  /**\n   * Displays a small pop-up notification inside the Script Kit window.\n   * #### toast example\n   * ```ts\n   * await toast(\"Hello from Script Kit!\", {\n   *   autoClose: 3000, // close after 3 seconds\n   *   pauseOnFocusLoss: false\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=toast) | [Docs](https://johnlindquist.github.io/kit-docs/#toast) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=toast)\n   */\n  var toast: Toast\n  /**\n   * A file search prompt\n   * #### find example\n   * ```ts\n   * let filePath = await find(\"Search in the Downloads directory\", {\n   *   onlyin: home(\"Downloads\"),\n   * })\n   * await revealFile(filePath)\n   * ```\n   * [Examples](https://scriptkit.com?query=find) | [Docs](https://johnlindquist.github.io/kit-docs/#find) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=find)\n   */\n  var find: Find\n  /**\n   * Record from the mic, get a buffer back\n   * #### mic example\n   * ```ts\n   * const tmpMicPath = tmpPath(\"mic.webm\");\n   * const buffer = await mic();\n   * await writeFile(tmpMicPath, buffer);\n   * await playAudioFile(tmpMicPath);\n   * ```\n   * [Examples](https://scriptkit.com?query=mic) | [Docs](https://johnlindquist.github.io/kit-docs/#mic) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=mic)\n   */\n  var mic: Mic\n  /**\n   * Captures a screenshot. Defaults to the display where the current mouse cursor is located and captures the full screen if no bounds are specified.\n   * @param displayId - The identifier for the display to capture. If not provided, captures the display with the current mouse cursor.\n   * @param bounds - The specific area of the screen to capture. If not provided, captures the entire screen.\n   * @returns A Promise that resolves to a Buffer containing the screenshot data.\n   */\n  var screenshot: Screenshot\n  /**\n   * Prompt for webcam access. Press enter to capture an image buffer:\n   * #### webcam example\n   * ```ts\n   * let buffer = await webcam()\n   * let imagePath = tmpPath(\"image.jpg\")\n   * await writeFile(imagePath, buffer)\n   * await revealFile(imagePath)\n   * ```\n   * [Examples](https://scriptkit.com?query=webcam) | [Docs](https://johnlindquist.github.io/kit-docs/#webcam) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=webcam)\n   */\n  var webcam: WebCam\n  var prompt: Prompt\n  /**\n   * Retrieves available media devices.\n   * #### getMediaDevices example\n   * ```ts\n   * let devices = await getMediaDevices()\n   * ```\n   * [Examples](https://scriptkit.com?query=getMediaDevices) | [Docs](https://johnlindquist.github.io/kit-docs/#getMediaDevices) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getMediaDevices)\n   */\n  var getMediaDevices: GetMediaDevices\n  /**\n   * Retrieves typed text from the user.\n   * #### getTypedText example\n   * ```ts\n   * let text = await getTypedText()\n   * ```\n   * [Examples](https://scriptkit.com?query=getTypedText) | [Docs](https://johnlindquist.github.io/kit-docs/#getTypedText) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getTypedText)\n   */\n  var getTypedText: GetTypedText\n  var PROMPT: typeof PROMPT_OBJECT\n  /**\n   * A symbol used to block submitting a prompt\n   * #### preventSubmit example\n   * ```ts\n   * await arg({\n   *   placeholder: \"Try to submit text less than 10 characters\",\n   *   onSubmit: async (input) => {\n   *     if (input.length < 10) {\n   *       setHint(\n   *         \"Text must be at least 10 characters. You entered \" + input.length\n   *       );\n   *       setEnter(\"Try Again\");\n   *       return preventSubmit;\n   *     }\n   *   },\n   * });\n   * ```\n   * [Examples](https://scriptkit.com?query=preventSubmit) | [Docs](https://johnlindquist.github.io/kit-docs/#preventSubmit) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=preventSubmit)\n   */\n  var preventSubmit: symbol\n\n  type removeListener = () => void\n  /**\n   * Registers a global system onClick event listener.\n   * @param callback - The callback to call when the event is fired.\n   * @returns A function to disable the listener.\n   */\n  var onClick: (callback: (event: UiohookMouseEvent) => void) => removeListener\n\n  /**\n   * Registers a global system onMousedown event listener.\n   * @param callback - The callback to call when the event is fired.\n   * @returns A function to disable the listener.\n   */\n  var onMousedown: (callback: (event: UiohookMouseEvent) => void) => removeListener\n  /**\n   * Registers a global system onMouseup event listener.\n   * @param callback - The callback to call when the event is fired.\n   * @returns A function to disable the listener.\n   */\n  var onMouseup: (callback: (event: UiohookMouseEvent) => void) => removeListener\n  /**\n   * Registers a global system onWheel event listener.\n   * @param callback - The callback to call when the event is fired.\n   * @returns A function to disable the listener.\n   */\n  var onWheel: (callback: (event: UiohookWheelEvent) => void) => removeListener\n  /**\n   * Registers a global system onKeydown event listener.\n   * @param callback - The callback to call when the event is fired.\n   * @returns A function to disable the listener.\n   */\n  var onKeydown: (callback: (event: UiohookKeyboardEvent) => void) => removeListener\n  /**\n   * Registers a global system onKeyup event listener.\n   * @param callback - The callback to call when the event is fired.\n   * @returns A function to disable the listener.\n   */\n  var onKeyup: (callback: (event: UiohookKeyboardEvent) => void) => removeListener\n\n  var system: System\n  var app: App\n\n  var getTheme: () => Promise<KitTheme>\n\n  /**\n   * Send a system notification\n   * > Note: osx notifications require permissions for \"Terminal Notifier\" in the system preferences. Due to the complicated nature of configuring notifications, please use a search engine to find the latest instructions for your osx version.\n   * > In the Script Kit menu bar icon: \"Permissions -> Request Notification Permissions\" might help.\n   * #### notify example\n   * ```ts\n   * await notify(\"Attention!\")\n   * ```\n   * #### notify example body\n   * ```ts\n   * await notify({\n   *   title: \"Title text goes here\",\n   *   body: \"Body text goes here\",\n   * });\n   * ```\n   * [Examples](https://scriptkit.com?query=notify) | [Docs](https://johnlindquist.github.io/kit-docs/#notify) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=notify)\n   */\n  var notify: Notify\n}\n\n\n---\nFile: notify.ts\nexport interface NotificationAction {\n  // Docs: https://electronjs.org/docs/api/structures/notification-action\n\n  /**\n   * The label for the given action.\n   */\n  text?: string\n  /**\n   * The type of action, can be `button`.\n   */\n  type: 'button'\n}\n\nexport interface NotificationConstructorOptions {\n  /**\n   * A title for the notification, which will be displayed at the top of the\n   * notification window when it is shown.\n   */\n  title?: string\n  /**\n   * A subtitle for the notification, which will be displayed below the title.\n   *\n   * @platform darwin\n   */\n  subtitle?: string\n  /**\n   * The body text of the notification, which will be displayed below the title or\n   * subtitle.\n   */\n  body?: string\n  /**\n   * Whether or not to suppress the OS notification noise when showing the\n   * notification.\n   */\n  silent?: boolean\n  /**\n   * An icon to use in the notification.\n   */\n  icon?: string\n  /**\n   * Whether or not to add an inline reply option to the notification.\n   *\n   * @platform darwin\n   */\n  hasReply?: boolean\n  /**\n   * The timeout duration of the notification. Can be 'default' or 'never'.\n   *\n   * @platform linux,win32\n   */\n  timeoutType?: 'default' | 'never'\n  /**\n   * The placeholder to write in the inline reply input field.\n   *\n   * @platform darwin\n   */\n  replyPlaceholder?: string\n  /**\n   * The name of the sound file to play when the notification is shown.\n   *\n   * @platform darwin\n   */\n  sound?: string\n  /**\n   * The urgency level of the notification. Can be 'normal', 'critical', or 'low'.\n   *\n   * @platform linux\n   */\n  urgency?: 'normal' | 'critical' | 'low'\n  /**\n   * Actions to add to the notification. Please read the available actions and\n   * limitations in the `NotificationAction` documentation.\n   *\n   * @platform darwin\n   */\n  actions?: NotificationAction[]\n  /**\n   * A custom title for the close button of an alert. An empty string will cause the\n   * default localized text to be used.\n   *\n   * @platform darwin\n   */\n  closeButtonText?: string\n  /**\n   * A custom description of the Notification on Windows superseding all properties\n   * above. Provides full customization of design and behavior of the notification.\n   *\n   * @platform win32\n   */\n  toastXml?: string\n}\n\n\n---\nFile: packages.d.ts\nimport type * as shelljs from 'shelljs/index'\nimport type { add, clone, commit, init, pull, push, addRemote } from 'isomorphic-git'\n\nexport type Trash = (\n  input: string | readonly string[],\n  option?: {\n    glob?: boolean\n  }\n) => Promise<void>\n\nexport type Git = {\n  clone: (\n    repo: string,\n    dir: string,\n    options?: Partial<Parameters<typeof clone>[0]>\n  ) => ReturnType<typeof clone>\n  pull: (dir: string, options?: Partial<Parameters<typeof pull>[0]>) => ReturnType<typeof pull>\n  push: (dir: string, options?: Partial<Parameters<typeof push>[0]>) => ReturnType<typeof push>\n  add: (\n    dir: string,\n    glob: string,\n    options?: Partial<Parameters<typeof add>[0]>\n  ) => ReturnType<typeof add>\n  commit: (\n    dir: string,\n    message: string,\n    options?: Partial<Parameters<typeof commit>[0]>\n  ) => ReturnType<typeof commit>\n  init: (dir: string, options?: Partial<Parameters<typeof init>[0]>) => ReturnType<typeof init>\n  addRemote: (\n    dir: string,\n    remote: string,\n    url: string,\n    options?: Partial<Parameters<typeof addRemote>[0]>\n  ) => ReturnType<typeof addRemote>\n}\nexport type Open = typeof import('open').default\nexport type OpenApp = typeof import('open').openApp\n\nexport type OnTab = (name: string, fn: () => void) => void\n\nexport type TmpPromise = typeof import('tmp-promise')\n\nexport interface PackagesApi {\n  cd: typeof shelljs.cd\n  cp: typeof shelljs.cp\n  chmod: typeof shelljs.chmod\n  echo: typeof shelljs.echo\n  exit: typeof shelljs.exit\n  grep: typeof shelljs.grep\n  ln: typeof shelljs.ln\n  ls: typeof shelljs.ls\n  mkdir: typeof shelljs.mkdir\n  mv: typeof shelljs.mv\n  sed: typeof shelljs.sed\n  tempdir: typeof shelljs.tempdir\n  test: typeof shelljs.test\n  which: typeof shelljs.which\n  paste: () => Promise<string>\n  copy: (text: string) => Promise<void>\n  trash: Trash\n  open: Open\n  rm: Trash\n}\n\nexport interface DegitOptions {\n  force?: boolean\n}\n\nexport interface IDegit {\n  repo: string\n  subdirectory: string | undefined\n  ref: string | undefined\n  options: DegitOptions\n\n  clone(dest: string): Promise<void>\n}\ntype Degit = (repo: string, options?: DegitOptions) => IDegit\n\ndeclare global {\n  var cd: typeof shelljs.cd\n  var cp: typeof shelljs.cp\n  var chmod: typeof shelljs.chmod\n  var echo: typeof shelljs.echo\n  /**\n   * Exit the script completely\n   * #### exit example\n   * ```ts\n   * // Prevent the script from running for more than 1 second\n   * setTimeout(() => {\n   *   exit();\n   * }, 1000);\n   * await arg(\"I will exit in 1 second\");\n   * ```\n   * [Examples](https://scriptkit.com?query=exit) | [Docs](https://johnlindquist.github.io/kit-docs/#exit) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=exit)\n   */\n  var exit: typeof shelljs.exit\n  var grep: typeof shelljs.grep\n  var ln: typeof shelljs.ln\n  var ls: typeof shelljs.ls\n  var mkdir: typeof shelljs.mkdir\n  var mv: typeof shelljs.mv\n  var pwd: typeof shelljs.pwd\n  var sed: typeof shelljs.sed\n  var tempdir: typeof shelljs.tempdir\n  var test: typeof shelljs.test\n  var which: typeof shelljs.which\n\n  /**\n   * Grab a string from the clipboard into the script. A simple alias for \"clipboard.readText()\"\n   * > Note: This is often confused with `setSelectedText` which pastes a string where your text cursor is.\n   * [Examples](https://scriptkit.com?query=paste) | [Docs](https://johnlindquist.github.io/kit-docs/#paste) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=paste)\n   */\n  var paste: () => Promise<string>\n  /**\n   * Copy a string to the clipboard. A simple alias for \"clipboard.writeText()\"\n   * [Examples](https://scriptkit.com?query=copy) | [Docs](https://johnlindquist.github.io/kit-docs/#copy) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=copy)\n   */\n  var copy: (text: string) => Promise<void>\n\n  /**\n   * Moves files or directories to the trash.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### trash example\n   * ```ts\n   * await trash(\"/path/to/file.txt\")\n   * ```\n   * [Examples](https://scriptkit.com?query=trash) | [Docs](https://johnlindquist.github.io/kit-docs/#trash) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=trash)\n   */\n  var trash: Trash\n  var open: Open\n  /**\n   * Opens an application.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### openApp example\n   * ```ts\n   * await openApp(\"Google Chrome\")\n   * ```\n   * [Examples](https://scriptkit.com?query=openApp) | [Docs](https://johnlindquist.github.io/kit-docs/#openApp) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=openApp)\n   */\n  var openApp: OpenApp\n  var rm: Trash\n  /**\n   * Git utility functions.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### git example\n   * ```ts\n   * await git.clone(\"https://github.com/user/repo.git\", \"/path/to/repo\")\n   * ```\n   * [Examples](https://scriptkit.com?query=git) | [Docs](https://johnlindquist.github.io/kit-docs/#git) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=git)\n   */\n  var git: Git\n  /**\n   * Clones a GitHub repository using degit.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### degit example\n   * ```ts\n   * await degit(\"https://github.com/user/repo.git\", \"/path/to/repo\")\n   * ```\n   * [Examples](https://scriptkit.com?query=degit) | [Docs](https://johnlindquist.github.io/kit-docs/#degit) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=degit)\n   */\n  var degit: Degit\n  var tmpPromise: TmpPromise\n  /**\n   * Manages a memory map of objects.\n   * #### memoryMap example\n   * ```ts\n   * memoryMap.set(\"myKey\", { myObject: true })\n   * let value = memoryMap.get(\"myKey\")\n   * ```\n   * [Examples](https://scriptkit.com?query=memoryMap) | [Docs](https://johnlindquist.github.io/kit-docs/#memoryMap) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=memoryMap)\n   */\n  var memoryMap: Map<string, any>\n\n  var onTabIndex: number\n}\n\n\n---\nFile: platform.d.ts\nimport type { ProcessInfo } from './core.js'\nimport type { Display, Point } from './electron.js'\nimport type { BrowserContextOptions, Page, PageScreenshotOptions } from 'playwright'\n\ntype PlayAudioFile = (path: string, options?: any) => Promise<string>\n\ntype StopAudioFile = () => Promise<void>\n\ntype CopyPathAsImage = (path: string) => Promise<string>\n\ninterface FileSearchOptions {\n  onlyin?: string\n  kind?: string\n  kMDItemContentType?: string\n}\ntype FileSearch = (name: string, fileSearchOptions?: FileSearchOptions) => Promise<string[]>\n\ntype Browser = 'Google Chrome' | 'Brave' | 'Firefox' | 'Edge'\n\ntype GetActiveTab = (browser?: Browser) => Promise<string>\ntype GetTabs = (browser?: Browser) => Promise<{ url: string; title: string }[]>\n\ntype FocusTab = (url: string, browser?: Browser) => Promise<string>\n\ninterface ScrapeOptions {\n  headless?: boolean\n  timeout?: number\n  /**\n   * Playwright browser context options.\n   *\n   * {@link https://playwright.dev/docs/api/class-browser#browser-new-context}\n   */\n  browserOptions?: BrowserContextOptions\n}\n\ntype ScrapeSelector<T = any> = (\n  url: string,\n  selector: string,\n  /**\n   * Transformation to apply to each DOM node that was selected.\n   * By default, `element.innerText` is returned.\n   */\n  transform?: (element: any) => T,\n  options?: ScrapeOptions\n) => Promise<T[]>\n\ntype ScrapeAttribute = (\n  url: string,\n  selector: string,\n  attribute: string,\n  options?: ScrapeOptions\n) => Promise<string | null>\ninterface ScreenshotFromWebpageOptions {\n  timeout?: number\n  /**\n   * Playwright browser context options.\n   *\n   * {@link https://playwright.dev/docs/api/class-browser#browser-new-context}\n   */\n  browserOptions?: BrowserContextOptions\n  /**\n   * Playwright page screenshot options.\n   *\n   * {@link https://playwright.dev/docs/api/class-page#page-screenshot}\n   */\n  screenshotOptions?: PageScreenshotOptions\n}\n\ntype GetScreenshotFromWebpage = (\n  url: string,\n  options?: ScreenshotFromWebpageOptions\n) => Promise<Buffer>\n\ninterface WebpageAsPdfOptions {\n  timeout?: number\n  /**\n   * Playwright browser context options.\n   *\n   * {@link https://playwright.dev/docs/api/class-browser#browser-new-context}\n   */\n  browserOptions?: BrowserContextOptions\n  /**\n   * Playwright page pdf options.\n   *\n   * {@link https://playwright.dev/docs/api/class-page#page-pdf}\n   */\n  pdfOptions?: Parameters<Page['pdf']>[0]\n  /**\n   * Playwright page emulate media options.\n   *\n   * {@link https://playwright.dev/docs/api/class-page#page-emulate-media}\n   */\n  mediaOptions?: Parameters<Page['emulateMedia']>[0]\n}\n\ntype GetWebpageAsPdf = (url: string, options?: WebpageAsPdfOptions) => Promise<Buffer>\n\ninterface Window {\n  process: string\n  title: string\n  index: number\n}\ntype GetWindows = () => Promise<Window[]>\n\ntype FocusWindow = (process: string, title: string) => Promise<string>\n\ninterface WindowBounds {\n  process: string\n  name: string\n  position: { x: number; y: number }\n  size: { width: number; height: number }\n  fullscreen: boolean\n}\ntype GetWindowsBounds = () => Promise<WindowBounds[]>\ntype GetWindowPosition = (process: string, title: string, x: number, y: number) => Promise<string>\n\ntype SetWindowPosition = (process: string, title: string, x: number, y: number) => Promise<string>\ntype SetWindowSizeByIndex = (\n  process: string,\n  index: number,\n  x: number,\n  y: number\n) => Promise<string>\ntype SetWindowBoundsByIndex = (\n  process: string,\n  index: number,\n  x: number,\n  y: number,\n  width: number,\n  height: number\n) => Promise<string>\n\ntype ScatterWindows = () => Promise<string>\n\ntype OrganizeWindows = () => Promise<void>\n\ntype SetWindowPositionByIndex = (\n  process: string,\n  index: number,\n  x: number,\n  y: number\n) => Promise<string>\n\ntype SetWindowSize = (process: string, title: string, x: number, y: number) => Promise<string>\n\ninterface Screen {\n  name: string\n  x: number\n  y: number\n  width: number\n  height: number\n}\ntype GetScreens = () => Promise<Display[]>\ntype SelectDisplay = (includeThumbnails?: boolean) => Promise<Display>\n\ntype TileWindow = (app: string, leftOrRight: 'left' | 'right') => Promise<string>\n\ntype GetActiveScreen = () => Promise<Display>\n\ntype GetMousePosition = () => Promise<Point>\n\ntype GetProcesses = () => Promise<ProcessInfo[]>\n\ninterface Rectangle {\n  x: number\n  y: number\n  width: number\n  height: number\n}\n\nexport interface Prompt {\n  id: string\n  pid: number\n  birthTime: number\n  isFocused: boolean\n  isVisible: boolean\n  isDestroyed: boolean\n  bounds: Rectangle\n  focus: () => Promise<void>\n  exit: () => Promise<void>\n  hide: () => Promise<void>\n  scriptPath: string\n  name: string\n}\n\ntype GetPrompts = () => Promise<Prompt[]>\ntype AttemptScriptFocus = () => Promise<boolean>\n\ntype GetPromptStatus = () => Promise<{\n  status: Array<{\n    windowId: number\n    pid: number\n    boundToProcess: boolean\n    scriptPath: string\n    isVisible: boolean\n    isFocused: boolean\n    isDestroyed: boolean\n    isIdle: boolean\n  }>\n  summary: {\n    total: number\n    visible: number\n    bound: number\n    orphaned: number\n    idle: number\n  }\n}>\n\ntype CleanupPrompts = () => Promise<{\n  cleaned: number\n  status: Array<{\n    windowId: number\n    pid: number\n    boundToProcess: boolean\n    scriptPath: string\n    isVisible: boolean\n    isFocused: boolean\n    isDestroyed: boolean\n    isIdle: boolean\n  }>\n  summary: {\n    total: number\n    visible: number\n    bound: number\n    orphaned: number\n    idle: number\n  }\n}>\n\ntype ForcePromptCleanup = () => Promise<{\n  cleaned: number\n  status: Array<{\n    windowId: number\n    pid: number\n    boundToProcess: boolean\n    scriptPath: string\n    isVisible: boolean\n    isFocused: boolean\n    isDestroyed: boolean\n    isIdle: boolean\n  }>\n  summary: {\n    total: number\n    visible: number\n    bound: number\n    orphaned: number\n    idle: number\n  }\n}>\n\ninterface KitWindow {\n  name: string\n  id: string\n  value: string\n  bounds: Rectangle\n  isFocused: boolean\n  isVisible: boolean\n  isDestroyed: boolean\n}\n\ntype GetKitWindows = () => Promise<KitWindow[]>\n\ntype FocusAppWindow = (id: string) => Promise<void>\n\ninterface Bounds {\n  left: number\n  top: number\n  right: number\n  bottom: number\n}\ntype SetActiveAppBounds = (bounds: Bounds) => Promise<void>\ntype SetActiveAppPosition = (position: { x: number; y: number }) => Promise<void>\ntype SetActiveAppSize = (size: { width: number; height: number }) => Promise<void>\n\ntype GetActiveAppInfo = () => Promise<{\n  localizedName: string\n  bundleIdentifier: string\n  bundleURLPath: string\n  executableURLPath: string\n  isFinishedLaunching: boolean\n  processIdentifier: number\n  windowTitle: string\n  windowIndex: number\n  windowID: number\n  x: number\n  y: number\n  width: number\n  height: number\n}>\ntype GetActiveAppBounds = () => Promise<Bounds>\n\ntype GetSelectedFile = () => Promise<string>\n\ntype SetSelectedFile = (filePath: string) => Promise<void>\n\ntype GetSelectedDir = () => Promise<string>\ntype SelectFile = (message?: string) => Promise<string>\n\ntype RevealFile = (filePath: string) => Promise<string>\ntype RevealInFinder = (filePath?: string) => Promise<void>\ntype SelectFolder = (message?: string) => Promise<string>\n\ntype GetSelectedText = () => Promise<string>\n\ntype CutText = () => Promise<string>\n\ntype Lock = () => Promise<unknown>\n\ntype Logout = () => Promise<unknown>\ntype Sleep = () => Promise<unknown>\ntype Shutdown = () => Promise<unknown>\n\ntype QuitAllApps = (appsToExclude?: string) => Promise<unknown>\n\ntype Say = (text: string, options?: any) => Promise<string>\n\ntype Beep = () => Promise<void>\n\ntype SetSelectedText = (text: string, hide?: boolean) => Promise<void>\n\ntype KeyStroke = (keyString: string) => Promise<string>\n\ntype AppleScript = (script: string, options?: any) => Promise<string>\n\nexport interface PlatformApi {\n  applescript: AppleScript\n  copyPathAsImage: CopyPathAsImage\n  fileSearch: FileSearch\n  focusTab: FocusTab\n  focusWindow: FocusWindow\n  getActiveTab: GetActiveTab\n  getActiveScreen: GetActiveScreen\n  getActiveAppInfo: GetActiveAppInfo\n  getActiveAppBounds: GetActiveAppBounds\n  getMousePosition: GetMousePosition\n  getScreens: GetScreens\n  selectDisplay: SelectDisplay\n  getSelectedFile: GetSelectedFile\n  setSelectedFile: SetSelectedFile\n  getSelectedDir: GetSelectedDir\n  revealInFinder: RevealInFinder\n  selectFile: SelectFile\n  selectFolder: SelectFolder\n  revealFile: RevealFile\n  getSelectedText: GetSelectedText\n  cutText: CutText\n  getTabs: GetTabs\n  getWindows: GetWindows\n  getWindowsBounds: GetWindowsBounds\n  keystroke: KeyStroke\n  lock: Lock\n  openLog: () => void\n  organizeWindows: OrganizeWindows\n  playAudioFile: PlayAudioFile\n  stopAudioFile: StopAudioFile\n  quitAllApps: QuitAllApps\n  say: Say\n  beep: Beep\n  scatterWindows: ScatterWindows\n  scrapeAttribute: ScrapeAttribute\n  scrapeSelector: ScrapeSelector\n  getScreenshotFromWebpage: GetScreenshotFromWebpage\n  getWebpageAsPdf: GetWebpageAsPdf\n  setActiveAppBounds: SetActiveAppBounds\n  setActiveAppPosition: SetActiveAppPosition\n  setActiveAppSize: SetActiveAppSize\n  setSelectedText: SetSelectedText\n  setWindowBoundsByIndex: SetWindowBoundsByIndex\n  setWindowPosition: SetWindowPosition\n  setWindowPositionByIndex: SetWindowPositionByIndex\n  setWindowSize: SetWindowSize\n  setWindowSizeByIndex: SetWindowSizeByIndex\n  shutdown: Shutdown\n  sleep: Sleep\n  tileWindow: TileWindow\n}\n\ndeclare global {\n  /**\n   * Executes an applescript string\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### applescript example\n   * ```ts\n   * let result = await applescript(`\n   * tell application \"Finder\"\n   *   return name of every disk\n   * end tell\n   * `)\n   * ```\n   * [Examples](https://scriptkit.com?query=applescript) | [Docs](https://johnlindquist.github.io/kit-docs/#applescript) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=applescript)\n   */\n  var applescript: AppleScript\n  /**\n   * Beep the system speaker:\n   * #### beep example\n   * ```ts\n   * await beep()\n   * ```\n   * [Examples](https://scriptkit.com?query=beep) | [Docs](https://johnlindquist.github.io/kit-docs/#beep) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=beep)\n   */\n  var beep: Beep\n  /**\n   * Copies a file path as an image to the clipboard.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### copyPathAsImage example\n   * ```ts\n   * await copyPathAsImage(\"/path/to/file.txt\")\n   * ```\n   * [Examples](https://scriptkit.com?query=copyPathAsImage) | [Docs](https://johnlindquist.github.io/kit-docs/#copyPathAsImage) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=copyPathAsImage)\n   */\n  var copyPathAsImage: CopyPathAsImage\n  /**\n   * Searches for files on the filesystem.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### fileSearch example\n   * ```ts\n   * async function fileSearch(query: string, options?: {\n   *   onlyin?: string,\n   *   ...\n   * }): Promise<string[]>\n   * ```\n   * [Examples](https://scriptkit.com?query=fileSearch) | [Docs](https://johnlindquist.github.io/kit-docs/#fileSearch) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=fileSearch)\n   */\n  var fileSearch: FileSearch\n  var focusTab: FocusTab\n  /**\n   * Brings a specific window into focus.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### focusWindow example\n   * ```ts\n   * await focusWindow(12345)\n   * ```\n   * [Examples](https://scriptkit.com?query=focusWindow) | [Docs](https://johnlindquist.github.io/kit-docs/#focusWindow) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=focusWindow)\n   */\n  var focusWindow: FocusWindow\n  var getActiveAppInfo: GetActiveAppInfo\n  var getActiveAppBounds: GetActiveAppBounds\n  var getActiveScreen: GetActiveScreen\n  var getActiveTab: GetActiveTab\n  var getMousePosition: GetMousePosition\n  var getProcesses: GetProcesses\n  var getPrompts: GetPrompts\n  /**\n   * Attempts to bring the Script Kit window into focus.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### attemptScriptFocus example\n   * ```ts\n   * await attemptScriptFocus()\n   * ```\n   * [Examples](https://scriptkit.com?query=attemptScriptFocus) | [Docs](https://johnlindquist.github.io/kit-docs/#attemptScriptFocus) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=attemptScriptFocus)\n   */\n  var attemptScriptFocus: AttemptScriptFocus\n  /**\n   * Retrieves the Script Kit window objects.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### getKitWindows example\n   * ```ts\n   * let windows = await getKitWindows()\n   * ```\n   * [Examples](https://scriptkit.com?query=getKitWindows) | [Docs](https://johnlindquist.github.io/kit-docs/#getKitWindows) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getKitWindows)\n   */\n  var getKitWindows: GetKitWindows\n  /**\n   * Brings the Script Kit window into focus.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### focusKitWindow example\n   * ```ts\n   * await focusKitWindow()\n   * ```\n   * [Examples](https://scriptkit.com?query=focusKitWindow) | [Docs](https://johnlindquist.github.io/kit-docs/#focusKitWindow) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=focusKitWindow)\n   */\n  var focusKitWindow: FocusAppWindow\n  var getScreens: GetScreens\n  var selectDisplay: SelectDisplay\n  var getSelectedFile: GetSelectedFile\n  var revealInFinder: RevealInFinder\n  /**\n   * Prompt the user to select a file using the Finder dialog. You can pass a string as a customized message:\n   * #### selectFile example\n   * ```ts\n   * let filePromptMessage = \"Select a file to upload\"\n   * let filePath = await selectFile(filePromptMessage)\n   * let text = await readFile(filePath, \"utf8\")\n   * let gist = await createGist(text)\n   * ```\n   * [Examples](https://scriptkit.com?query=selectFile) | [Docs](https://johnlindquist.github.io/kit-docs/#selectFile) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=selectFile)\n   */\n  var selectFile: SelectFile\n  /**\n   * Prompt the user to select a folder using the Finder dialog. You can pass a string as a customized message:\n   * #### selectFolder example\n   * ```ts\n   * let promptMessage = \"Select a folder for your project\"\n   * let folderPath = await selectFolder(promptMessage)\n   * let files = await readdir(folderPath)\n   * await editor(files.join(\"\\n\"))\n   * ```\n   * [Examples](https://scriptkit.com?query=selectFolder) | [Docs](https://johnlindquist.github.io/kit-docs/#selectFolder) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=selectFolder)\n   */\n  var selectFolder: SelectFolder\n  var revealFile: RevealFile\n  var getSelectedText: GetSelectedText\n  var cutText: CutText\n  var getTabs: GetTabs\n  /**\n   * Retrieves information about open windows.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### getWindows example\n   * ```ts\n   * let windows = await getWindows()\n   * ```\n   * [Examples](https://scriptkit.com?query=getWindows) | [Docs](https://johnlindquist.github.io/kit-docs/#getWindows) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getWindows)\n   */\n  var getWindows: GetWindows\n  /**\n   * Retrieves the bounds of open windows.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### getWindowsBounds example\n   * ```ts\n   * let bounds = await getWindowsBounds()\n   * ```\n   * [Examples](https://scriptkit.com?query=getWindowsBounds) | [Docs](https://johnlindquist.github.io/kit-docs/#getWindowsBounds) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getWindowsBounds)\n   */\n  var getWindowsBounds: GetWindowsBounds\n  var getSelectedDir: GetSelectedDir\n  var keystroke: KeyStroke\n  /**\n   * Logs out the current user.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### logout example\n   * ```ts\n   * await logout()\n   * ```\n   * [Examples](https://scriptkit.com?query=logout) | [Docs](https://johnlindquist.github.io/kit-docs/#logout) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=logout)\n   */\n  var logout: Logout\n  /**\n   * Locks the screen.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### lock example\n   * ```ts\n   * await lock()\n   * ```\n   * [Examples](https://scriptkit.com?query=lock) | [Docs](https://johnlindquist.github.io/kit-docs/#lock) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=lock)\n   */\n  var lock: Lock\n  var openLog: () => void\n  /**\n   * Organizes windows in a specific way.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### organizeWindows example\n   * ```ts\n   * await organizeWindows({\n   *   direction?: \"horizontal\" | \"vertical\",\n   *   padding?: number,\n   *   ...\n   * }): Promise<string>\n   * ```\n   * [Examples](https://scriptkit.com?query=organizeWindows) | [Docs](https://johnlindquist.github.io/kit-docs/#organizeWindows) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=organizeWindows)\n   */\n  var organizeWindows: OrganizeWindows\n  var playAudioFile: PlayAudioFile\n  var stopAudioFile: StopAudioFile\n  var quitAllApps: QuitAllApps\n  /**\n   * Say something using the built-in text-to-speech:\n   * #### say example\n   * ```ts\n   * await say(\"Done!\")\n   * ```\n   * [Examples](https://scriptkit.com?query=say) | [Docs](https://johnlindquist.github.io/kit-docs/#say) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=say)\n   */\n  var say: Say\n  /**\n   * Evenly spaces out all open windows across the screen in a neat grid.\n   * - Only tested on macOS.\n   * - May require accessibility permissions if it's moving windows across multiple monitors.\n   * #### scatterWindows example\n   * ```ts\n   * await scatterWindows()\n   * ```\n   * [Examples](https://scriptkit.com?query=scatterWindows) | [Docs](https://johnlindquist.github.io/kit-docs/#scatterWindows) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=scatterWindows)\n   */\n  var scatterWindows: ScatterWindows\n  /**\n   * Scrapes a webpage and extracts an attribute value.\n   * #### scrapeAttribute example\n   * ```ts\n   * let src = await scrapeAttribute(\"https://example.com\", \"img\", \"src\")\n   * ```\n   * [Examples](https://scriptkit.com?query=scrapeAttribute) | [Docs](https://johnlindquist.github.io/kit-docs/#scrapeAttribute) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=scrapeAttribute)\n   */\n  var scrapeAttribute: ScrapeAttribute\n  /**\n   * Scrapes a webpage using a CSS selector.\n   * #### scrapeSelector example\n   * ```ts\n   * let text = await scrapeSelector(\"https://example.com\", \"#main-content\")\n   * ```\n   * [Examples](https://scriptkit.com?query=scrapeSelector) | [Docs](https://johnlindquist.github.io/kit-docs/#scrapeSelector) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=scrapeSelector)\n   */\n  var scrapeSelector: ScrapeSelector\n  /**\n   * Captures a screenshot of a webpage.\n   * #### getScreenshotFromWebpage example\n   * ```ts\n   * let buffer = await getScreenshotFromWebpage(\"https://example.com\", {\n   *   width?: number,\n   *   height?: number,\n   *   ...\n   * }): Promise<Buffer>\n   * ```\n   * [Examples](https://scriptkit.com?query=getScreenshotFromWebpage) | [Docs](https://johnlindquist.github.io/kit-docs/#getScreenshotFromWebpage) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getScreenshotFromWebpage)\n   */\n  var getScreenshotFromWebpage: GetScreenshotFromWebpage\n  /**\n   * Converts a webpage to a PDF.\n   * #### getWebpageAsPdf example\n   * ```ts\n   * let buffer = await getWebpageAsPdf(\"https://example.com\", {\n   *   width: 800,\n   *   height: 600\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=getWebpageAsPdf) | [Docs](https://johnlindquist.github.io/kit-docs/#getWebpageAsPdf) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getWebpageAsPdf)\n   */\n  var getWebpageAsPdf: GetWebpageAsPdf\n  var setActiveAppBounds: SetActiveAppBounds\n  var setActiveAppPosition: SetActiveAppPosition\n  var setActiveAppSize: SetActiveAppSize\n  /**\n   * Paste text into the focused app. Literally triggers a \"cmd/ctrl+v\", so expect a similar behavior.\n   * #### setSelectedText example\n   * ```ts\n   * await setSelectedText(\"Hello from Script Kit!\");\n   * ```\n   * Grab text from the focused app. Literally triggers a \"cmd?ctrl+c\", so expect a similar behavior.\n   * [Examples](https://scriptkit.com?query=setSelectedText) | [Docs](https://johnlindquist.github.io/kit-docs/#setSelectedText) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setSelectedText)\n   */\n  var setSelectedText: SetSelectedText\n  var setSelectedFile: SetSelectedFile\n  var setWindowBoundsByIndex: SetWindowBoundsByIndex\n  /**\n   * Sets the position of a specific window.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### setWindowPosition example\n   * ```ts\n   * await setWindowPosition(12345, 100, 200)\n   * ```\n   * [Examples](https://scriptkit.com?query=setWindowPosition) | [Docs](https://johnlindquist.github.io/kit-docs/#setWindowPosition) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setWindowPosition)\n   */\n  var setWindowPosition: SetWindowPosition\n  /**\n   * Sets the position of a window based on its index.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### setWindowPositionByIndex example\n   * ```ts\n   * await setWindowPositionByIndex(0, 100, 200)\n   * ```\n   * [Examples](https://scriptkit.com?query=setWindowPositionByIndex) | [Docs](https://johnlindquist.github.io/kit-docs/#setWindowPositionByIndex) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=setWindowPositionByIndex)\n   */\n  var setWindowPositionByIndex: SetWindowPositionByIndex\n  var setWindowSize: SetWindowSize\n  var setWindowSizeByIndex: SetWindowSizeByIndex\n  /**\n   * Shuts down the computer.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### shutdown example\n   * ```ts\n   * await shutdown()\n   * ```\n   * [Examples](https://scriptkit.com?query=shutdown) | [Docs](https://johnlindquist.github.io/kit-docs/#shutdown) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=shutdown)\n   */\n  var shutdown: Shutdown\n  /**\n   * Puts the computer to sleep.\n   * - Only tested on macOS\n   * - May require additional permissions or configurations\n   * #### sleep example\n   * ```ts\n   * await sleep()\n   * ```\n   * [Examples](https://scriptkit.com?query=sleep) | [Docs](https://johnlindquist.github.io/kit-docs/#sleep) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=sleep)\n   */\n  var sleep: Sleep\n  /**\n   * Tiles a specific window.\n   * - Only tested on macOS.\n   * - May require accessibility permissions.\n   * #### tileWindow example\n   * ```ts\n   * await tileWindow(12345, {\n   *   direction: \"horizontal\",\n   *   padding: 10\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=tileWindow) | [Docs](https://johnlindquist.github.io/kit-docs/#tileWindow) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=tileWindow)\n   */\n  var tileWindow: TileWindow\n  /**\n   * Gets detailed status information about all prompts for debugging purposes.\n   * #### getPromptStatus example\n   * ```ts\n   * let { status, summary } = await getPromptStatus()\n   * console.log(`Total prompts: ${summary.total}, Visible: ${summary.visible}`)\n   * ```\n   * [Examples](https://scriptkit.com?query=getPromptStatus) | [Docs](https://johnlindquist.github.io/kit-docs/#getPromptStatus) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=getPromptStatus)\n   */\n  var getPromptStatus: GetPromptStatus\n  /**\n   * Cleans up orphaned prompts that are no longer attached to running processes.\n   * #### cleanupPrompts example\n   * ```ts\n   * let { cleaned, summary } = await cleanupPrompts()\n   * console.log(`Cleaned up ${cleaned} orphaned prompts`)\n   * ```\n   * [Examples](https://scriptkit.com?query=cleanupPrompts) | [Docs](https://johnlindquist.github.io/kit-docs/#cleanupPrompts) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=cleanupPrompts)\n   */\n  var cleanupPrompts: CleanupPrompts\n  /**\n   * Force cleanup of all orphaned prompts, similar to cleanupPrompts but more aggressive.\n   * #### forcePromptCleanup example\n   * ```ts\n   * let { cleaned, summary } = await forcePromptCleanup()\n   * console.log(`Force cleaned ${cleaned} orphaned prompts`)\n   * ```\n   * [Examples](https://scriptkit.com?query=forcePromptCleanup) | [Docs](https://johnlindquist.github.io/kit-docs/#forcePromptCleanup) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=forcePromptCleanup)\n   */\n  var forcePromptCleanup: ForcePromptCleanup\n}\n\n\n---\nFile: pro.d.ts\nimport type { ForkOptions } from 'node:child_process'\nimport type { Channel } from '../core/enum.js'\nimport type { Action, PromptConfig } from './core.js'\nimport type { BrowserWindowConstructorOptions, Display, Rectangle } from './electron.js'\n\nexport type BaseWidgetOptions = BrowserWindowConstructorOptions & {\n  /**\n   * Important: This property determines whether the widget can be dragged.\n   * To enable dragging, ensure that the \"draggable\" class is added to any element\n   * intended for dragging the widget. This is essential for user interaction.\n   */\n  draggable?: boolean\n  title?: string\n  ignoreMouse?: boolean\n  ttl?: number\n  center?: boolean\n  preventEscape?: boolean\n  css?: string\n  body?: string\n}\n\nexport type WidgetOptions = BaseWidgetOptions & {\n  state?: any\n  unpkg?: string[]\n  containerClass?: string\n  hidePrompt?: boolean\n}\n\nexport type ViteOptions = BaseWidgetOptions & {\n  mode?: 'development' | 'production' | string\n  port?: number\n}\n\nexport interface WidgetMessage {\n  channel: Channel\n  pid: number\n  targetId: string\n  widgetId: number\n  value?: any\n  x: number\n  y: number\n  width?: number\n  height?: number\n  dataset?: {\n    [key: string]: any\n  }\n}\n\nexport interface ViteMessage extends WidgetMessage {\n  widgetChannel: string\n  widgetData?: any\n}\n\nexport type WidgetHandler = (data: WidgetMessage) => void\nexport type ViteHandler = (data: ViteMessage) => void\n\nexport interface BaseWidgetApi {\n  show: () => void\n  showInactive: () => void\n  hide: () => void\n  focus: () => void\n  blur: () => void\n  minimize: () => void\n  maximize: () => void\n  restore: () => void\n  setAlwaysOnTop: (flag: boolean) => void\n  close: () => void\n  setSize: (width: number, height: number) => void\n  setPosition: (x: number, y: number) => void\n  call: (name: string, ...args: any[]) => void\n  executeJavaScript: (js: string) => Promise<any>\n  capturePage: () => Promise<string>\n  onClose: (handler: WidgetHandler) => void\n}\n\nexport interface WidgetAPI extends BaseWidgetApi {\n  setState: (state: any) => void\n  fit: () => void\n  onCustom: (handler: WidgetHandler) => void\n  onClick: (handler: WidgetHandler) => void\n  onDrop: (handler: WidgetHandler) => void\n  onMouseDown: (handler: WidgetHandler) => void\n  onInput: (handler: WidgetHandler) => void\n  onResized: (handler: WidgetHandler) => void\n  onMoved: (handler: WidgetHandler) => void\n  onInit: (handler: WidgetHandler) => void\n}\n\ntype ViteWidgetSendMessage = {\n  channel: string\n  pid: number\n  targetId: string\n  widgetId: number\n  [key: string]: any\n}\nexport interface ViteAPI extends BaseWidgetApi {\n  /**\n   * Registers an event handler for a specific channel.\n   * @param event The channel name to listen for.\n   * @param handler The function to be called when an event on this channel is received.\n   * @returns A function that, when called, will remove the event handler.\n   *\n   * Example usage:\n   * ```typescript\n   * const removeHandler = v.on('myChannel', (data) => {\n   *   console.log('Received data:', data);\n   * });\n   *\n   * // Later, when you want to stop listening:\n   * removeHandler();\n   * ```\n   */\n  on: (event: string, handler: ViteHandler) => () => void\n  send: (channel: string, data: any) => void\n}\n\nexport type Widget = (html: string, options?: WidgetOptions) => Promise<WidgetAPI>\n\nexport type ViteWidget = (dir: string, options?: ViteOptions) => Promise<ViteAPI>\n\nexport type Menubar = (text: string, scripts?: string[]) => Promise<void>\n\nexport interface TerminalOptions extends PromptConfig {\n  command?: string\n  cwd?: string\n  shell?: string | boolean\n  args?: string[]\n  env?: {\n    [key: string]: string\n  }\n  closeOnExit?: boolean\n  cleanPath?: boolean\n}\n\nexport type Terminal = {\n  (command?: string, actions?: Action[]): Promise<string>\n  (options?: TerminalOptions, actions?: Action[]): Promise<string>\n} & {\n  write?: (text: string) => Promise<void>\n}\n\nexport interface ProAPI {\n  widget: Widget\n  menubar: Menubar\n  term: Terminal\n}\n\nexport type ShowLogWindow = (scriptPath?: string) => Promise<void>\n\ndeclare global {\n  /**\n   * A `widget` creates a new window using HTML. The HTML can be styled via [Tailwind CSS](https://tailwindcss.com/docs/utility-first) class names.\n   * Templating and interactivity can be added via [petite-vue](https://github.com/vuejs/petite-vue).\n   * 1. The first argument is a string of HTML to render in the window.\n   * 2. Optional: the second argument is [\"Browser Window Options\"](https://www.electronjs.org/docs/latest/api/browser-window#new-browserwindowoptions)\n   * #### widget example\n   * ```ts\n   * await widget(`<h1 class=\"p-4 text-4xl\">Hello World!</h1>`)\n   * ```\n   * #### widget clock\n   * ```ts\n   * let clock = await widget(`<h1 class=\"text-7xl p-5 whitespace-nowrap\">{{date}}</h1>`, {\n   *     transparent: true,\n   *     draggable: true,\n   *     hasShadow: false,\n   *     alwaysOnTop: true,\n   * })\n   * setInterval(()=> {\n   *     clock.setState({\n   *         date: new Date().toLocaleTimeString()\n   *     })\n   * }, 1000)\n   * ```\n   * #### widget events\n   * ```ts\n   * let text = \"\"\n   * let count = 0\n   * let w = await widget(`\n   * <div class=\"p-5\">\n   *     <h1>Widget Events</h1>\n   *     <input autofocus type=\"text\" class=\"border dark:bg-black\"/>\n   *     <button id=\"myButton\" class=\"border px-2 py-1\">+</button>\n   *     <span>{{count}}</span>\n   * </div>\n   * `)\n   * w.onClick((event) => {\n   *     if (event.targetId === \"myButton\") {\n   *         w.setState({count: count++})\n   *     }\n   * })\n   * w.onClose(async () => {\n   *     await widget(`\n   * <div class=\"p-5\">\n   *     <h1>You closed the other widget</h1>\n   *     <p>${text}</p>\n   * </div>\n   * `)\n   * })\n   * w.onInput((event) => {\n   *     text = event.value\n   * })\n   * w.onMoved(({ x, y}) => {\n   *     // e.g., save position\n   * })\n   * w.onResized(({ width, height }) => {\n   *     // e.g., save size\n   * })\n   * ```\n   * [Examples](https://scriptkit.com?query=widget) | [Docs](https://johnlindquist.github.io/kit-docs/#widget) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=widget)\n   */\n  var widget: Widget\n  /**\n   * A `vite` generates a vite project and opens it in its own window.\n   * 1. The first argument is the name of the folder you want generated in ~/.kenv/vite/your-folder\n   * 2. Optional: the second argument is [\"Browser Window Options\"](https://www.electronjs.org/docs/latest/api/browser-window#new-browserwindowoptions)\n   * #### vite example\n   * ```ts\n   * const { workArea } = await getActiveScreen();\n   * // Generates/opens a vite project in ~/.kenv/vite/project-path\n   * const viteWidget = await vite(\"project-path\", {\n   *   x: workArea.x + 100,\n   *   y: workArea.y + 100,\n   *   width: 640,\n   *   height: 480,\n   * });\n   * // In your ~/.kenv/vite/project-path/src/App.tsx (if you picked React)\n   * // use the \"send\" api to send messages. \"send\" is injected on the window object\n   * // <input type=\"text\" onInput={(e) => send(\"input\", e.target.value)} />\n   * const filePath = home(\"vite-example.txt\");\n   * viteWidget.on(\n   *   \"input\",\n   *   debounce(async (input) => {\n   *     await writeFile(filePath, input);\n   *   }, 1000)\n   * );\n   * ```\n   * [Examples](https://scriptkit.com?query=vite) | [Docs](https://johnlindquist.github.io/kit-docs/#vite) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=vite)\n   */\n  var vite: ViteWidget\n  /**\n   * Set the system menu to a custom message/emoji with a list of scripts to run.\n   * #### menu example\n   * ```ts\n   * // Set the menu to a custom message/emoji with a list of scripts to run\n   * await menu(`üëç`, [\"my-script\", \"another-script\"])\n   * ```\n   * #### menu reset example\n   * ```ts\n   * // Reset the menu to the default icon and scripts by passing an empty string\n   * await menu(``)\n   * ```\n   * [Examples](https://scriptkit.com?query=menu) | [Docs](https://johnlindquist.github.io/kit-docs/#menu) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=menu)\n   */\n  var menu: Menubar\n  /**\n   * Opens a built-in Terminal window.\n   * - Can run interactive commands\n   * - Supports custom working directory and shell\n   * #### term example\n   * ```ts\n   * await term(`cd ~/.kenv/scripts && ls`)\n   * ```\n   * #### term with command\n   * ```ts\n   * await term(`cd ~/.kenv/scripts && ls`)\n   * ```\n   * [Examples](https://scriptkit.com?query=term) | [Docs](https://johnlindquist.github.io/kit-docs/#term) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=term)\n   */\n  var term: Terminal\n  /**\n   * Opens a logs window to display script output.\n   * - Displays output from all scripts run in the current session\n   * #### showLogWindow example\n   * ```ts\n   * await showLogWindow()\n   * ```\n   * [Examples](https://scriptkit.com?query=showLogWindow) | [Docs](https://johnlindquist.github.io/kit-docs/#showLogWindow) | [Discussions](https://github.com/johnlindquist/kit/discussions?discussions_q=showLogWindow)\n   */\n  var showLogWindow: ShowLogWindow\n}\n\n\n</TYPES>\n\n<EXAMPLES>\n\n---\nFile: chatgpt.ts\n/*\n# Chat with ChatGPT\n\n- Opens the `chat` component\n- Type a message and press `enter` to send\n- The message is sent to the OpenAI API\n- The response from OpenAI is displayed in the chat\n- Repeat!\n*/\n\n// Name: ChatGPT\n// Description: Have a Conversation with an AI\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\nimport { ChatOpenAI } from '@langchain/openai'\nimport { ChatPromptTemplate, MessagesPlaceholder } from '@langchain/core/prompts'\nimport { START, END, MessagesAnnotation, StateGraph, MemorySaver } from '@langchain/langgraph'\nimport { trimMessages } from '@langchain/core/messages'\n\n// Initialize the chat model\nlet id: NodeJS.Timeout | number = -1 // Updated type to handle setTimeout\nlet currentMessage: string = ``\n\nconst chatsDir = kenvPath('chats')\nawait ensureDir(chatsDir)\nconst chatFile = kenvPath(`chats`, `${formatDate(new Date(), 'yyyy-MM-dd-T-HH-mm-ss')}.md`)\n\nconst llm = new ChatOpenAI({\n  modelName: 'gpt-5-nano',\n  apiKey: await env('OPENAI_API_KEY'),\n  temperature: 0.7,\n  streaming: true,\n  callbacks: [\n    {\n      handleLLMStart: async () => {\n        id = setTimeout(() => {\n          let dots = 0\n          id = setInterval(() => {\n            const loadingDots = '.'.repeat(dots + 1)\n            chat.setMessage(-1, md(`### Thinking${loadingDots}`))\n            dots = (dots + 1) % 3\n          }, 500)\n        }, 1000)\n        currentMessage = ``\n        chat.addMessage('')\n      },\n      handleLLMNewToken: async (token: string) => {\n        clearInterval(id)\n        setLoading(false)\n        if (!token) return\n        currentMessage += token\n        const htmlMessage = md(currentMessage)\n        chat.setMessage(-1, htmlMessage)\n        appendFile(chatFile, token)\n      },\n      handleLLMError: async (err: Error) => {\n        clearInterval(id)\n        warn(`error`, JSON.stringify(err))\n        running = false\n      },\n      handleLLMEnd: async () => {\n        clearInterval(id)\n        running = false\n      },\n    },\n  ],\n})\n\n// Create a chat prompt template with system message\nconst prompt = ChatPromptTemplate.fromMessages([\n  [\n    'system',\n    'You are a helpful and friendly AI assistant. Answer all questions to the best of your ability while being concise.',\n  ],\n  new MessagesPlaceholder('messages'),\n])\n\n// Create a message trimmer to manage conversation history\nconst trimmer = trimMessages({\n  maxTokens: 4000, // Adjust based on your needs\n  strategy: 'last',\n  tokenCounter: msgs => msgs.length * 4, // Rough estimate\n  includeSystem: true,\n  allowPartial: false,\n  startOn: 'human',\n})\n\n// Define the function that calls the model\nconst callModel = async (state: typeof MessagesAnnotation.State) => {\n  const trimmedMessages = await trimmer.invoke(state.messages)\n  const chain = prompt.pipe(llm)\n  const response = await chain.invoke({ messages: trimmedMessages }, { signal: controller?.signal })\n  return { messages: [response] }\n}\n\n// Define the graph\nconst workflow = new StateGraph(MessagesAnnotation)\n  .addNode('model', callModel)\n  .addEdge(START, 'model')\n  .addEdge('model', END)\n\n// Add memory and compile the app\nconst memory = new MemorySaver()\nconst app = workflow.compile({ checkpointer: memory })\n\n// Create a unique thread ID for this chat session\nconst config = { configurable: { thread_id: uuid() } }\n\n// Main chat loop\nlet controller: AbortController | null = null\nlet running = false\n\nawait chat({\n  placeholder: 'Chat with AI',\n  shortcuts: [\n    {\n      name: 'Open chat log',\n      key: `${cmd}+l`,\n      onPress: async () => {\n        await edit(chatFile)\n        await show() // \"edit\" will always hide the prompt, so we need to bring it back\n      },\n      bar: 'right',\n    },\n    {\n      name: 'Close',\n      key: `${cmd}+w`,\n      onPress: () => {\n        process.exit()\n      },\n      bar: 'right',\n    },\n  ],\n  onEscape: async () => {\n    if (running) {\n      controller?.abort()\n      running = false\n      clearInterval(id)\n    }\n  },\n  onSubmit: async (input = '') => {\n    if (!input) return\n\n    running = true\n    controller = new AbortController()\n\n    try {\n      // Create input message\n      const messages = [\n        {\n          role: 'user',\n          content: input,\n        },\n      ]\n\n      appendFile(chatFile, `\\n\\n${input}\\n\\n`)\n      await app.invoke({ messages }, config)\n    } catch (error) {\n      console.log(`Error: ${error.message}`)\n    } finally {\n      running = false\n    }\n  },\n})\n\n\n---\nFile: corgi.ts\n/*\n# Display Images with Widgets\n\n- Opens a widget displaying a picture of a corgi\n- Clicking on the corgi requests a new image\n- Closing the Widget speaks `Luv u Corgi!`\n*/\n// Name: Corgi Widget\n// Description: Display a Corgi in a Widget\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\n\ninterface DogResponse {\n  data: {\n    message: string\n  }\n}\n\nconst dogUrl: string = `https://dog.ceo/api/breed/corgi/images/random`\nconst getState = async () => {\n  const response: DogResponse = await get(dogUrl)\n  return {\n    url: response.data.message,\n  }\n}\n\n// Create a Corgi Widget\n// When focused, close with `escape` or `cmd + w`\n/*\n  Note: the `draggable` class is necessary to use an html element to drag the widget, \n  but it will also interfere with all other mouse interactions\n*/\nconst dragBar: string = `draggable absolute z-10 h-6 w-full top-0 left-0 bg-gray-100 bg-opacity-50`\nconst corgi = await widget(\n  `\n<img :src=\"url\"/>\n<div class=\"${dragBar}\">\n`,\n  {\n    state: await getState(),\n  }\n)\n\ncorgi.onInit(async () => {\n  corgi.focus()\n\n  await wait(2000)\n  corgi.fit()\n})\n\n// Update State on Click\ncorgi.onClick(async () => {\n  corgi.setState(await getState())\n})\n\ncorgi.onResized(async () => {\n  corgi.fit()\n})\n\ncorgi.onClose(async () => {\n  say(`Luv u Corgi!`)\n  // Overrideing \"onClose\" will prevent the script from exiting when the widget closes\n  // You'll have to exit the script manually or else it will hang open in the background\n  // (You can still access it from the main menu, then type \"p\", then \"space\" to access the process manager)\n  exit()\n})\n\n\n---\nFile: create-gist.ts\n/*\n# Create a Gist\n\n- Opens the built-in editor\n- Saving automatically creates a Gist\n- Opens the Gist in your browser\n*/\n\n// Name: Create Gist\n// Description: Quickly Save Text as a Gist\n\nimport { backToMainShortcut } from '@johnlindquist/kit'\n\nconst contents: string = await editor({\n  shortcuts: [\n    backToMainShortcut,\n    {\n      name: 'Post Gist',\n      key: `${cmd}+s`,\n      bar: 'right',\n      onPress: async (input: string) => {\n        submit(input)\n      },\n    },\n  ],\n})\n\nconst { html_url } = await createGist(contents)\nopen(html_url)\n\n\n---\nFile: dad-joke.ts\n/*\n# Speak Text Requested from an API\n\n- Requests a joke from [https://icanhazdadjoke.com](https://icanhazdadjoke.com)\n- Speaks the joke\n- Tap `y` to speak another joke\n*/\n\n// Name: Dad Joke\n// Description: Dad Joke from icanhazdadjoke.com\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\n\ninterface JokeResponse {\n  data: string\n}\n\nconst getJoke = async (): Promise<string> => {\n  const response: JokeResponse = await get(`https://icanhazdadjoke.com/`, {\n    headers: {\n      Accept: 'text/plain',\n      'User-Agent': 'axios 0.21.1',\n    },\n  })\n  say(response.data)\n  return `<div class=\"text-center text-4xl p-10 font-semibold\">${response.data}</div>`\n}\n\nwhile (true) {\n  const yesOrNo: string = await div({\n    html: await getJoke(),\n    enter: ``,\n    footerClassName: '', // By default, footerClassName is \"hidden\". We clear it to see the shortcut buttons\n    shortcuts: [\n      {\n        name: 'Another',\n        key: `Y`,\n        onPress: () => submit('y'),\n        bar: 'right',\n      },\n      {\n        name: 'Please, make it stop!',\n        key: `N`,\n        onPress: () => submit('n'),\n        bar: 'right',\n      },\n    ],\n  })\n\n  if (yesOrNo === 'n') {\n    process.exit(0) //forcefully exit any script\n  }\n}\n\n\n---\nFile: express-server.ts\n/*\n# Start an Express Server\n\n- Requests to install `express` and `detect-port`\n- Starts an express server\n- Opens the local url once server is running\n*/\n\n// Name: Express Server\n// Description: Start an Express server\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\nimport express, { Express, Request, Response } from 'express'\nimport detectPort from 'detect-port'\n\nconst app: Express = express()\nconst port: number = await detectPort(3000)\n\napp.get('/', async (req: Request, res: Response) => {\n  const content: string = await readFile(kitPath('API.md'), 'utf-8')\n  const style: string = `<style>\n  body {\n    font-family: \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\n  }\n    </style>`\n  const html: string = style + md(content)\n  res.send(html)\n})\n\nconst url: string = `http://localhost:${port}`\n\n/* Important Advanced Concept in v2:\nIf the \"div\" was inside of the app.listen callback, the script would end before the server started.\nThis is because the script attempts to \"clean up\" after itself once it reaches the end of the file\nand there are no outstanding promises or timers.\n*/\nawait new Promise<void>((resolve, reject) => {\n  app.listen(port, () => resolve())\n  open(url)\n})\n\nawait div(\n  md(`\n# Server running at [${url}](${url})\n\n## How to End Long-Running Scripts\n\nPress \"${cmd}+p\" from the Main Menu to open the Process Manager. Select the process you want to end.\n\n![http://res.cloudinary.com/johnlindquist/image/upload/v1689094925/clipboard/stzc2z4dsi15wrwdctao.png](http://res.cloudinary.com/johnlindquist/image/upload/v1689094925/clipboard/stzc2z4dsi15wrwdctao.png)\n`)\n)\n// If a script is going to stay \"alive\", you need to manually call `hide()` to hide the prompt\nhide()\n\n\n---\nFile: giphy-search.ts\n/* \n# Paste a Gif from Giphy\n- Prompts the user for a Giphy API key to store in the .env\n- Opens a prompt to search gifs from Giphy\n- Paste Gif per user's choice\n*/\n\n// Name: Giphy\n// Description: Search and Paste Gifs\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\nimport { infoPane } from '@johnlindquist/kit'\n\nconst GIPHY_API_KEY = await env('GIPHY_API_KEY', {\n  panel: md('## Get a [Giphy API Key](https://developers.giphy.com/dashboard/)'),\n  secret: true,\n})\n\nconst css = `\n.focused {\n  background: color-mix(in srgb, var(--color-secondary) calc(var(--ui-bg-opacity)* 100%), transparent);\n  padding: 0;\n}\n.focused > img {\n    border: 0.25rem solid var(--color-primary);        \n}\n.gif-container {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n}\n.gif-container img {\n    max-width: 200px;\n    max-height: 200px;\n    object-fit: contain;\n}\n`\n\nconst search = q =>\n  `https://api.giphy.com/v1/gifs/search?api_key=${GIPHY_API_KEY}&q=${q}&limit=10&offset=0&rating=g&lang=en`\n\nconst giphy = async (input: string) => {\n  if (!input) {\n    return infoPane('Search Giphy', 'Search for a gif and paste it into your document.')\n  }\n  const query = search(input)\n  const { data } = await get(query)\n  const result = data.data.map(gif => {\n    return {\n      name: gif.title.trim() || gif.slug,\n      value: gif.images.original.url,\n      html: `<div class=\"gif-container\"><img src=\"${\n        gif.images.downsized.url\n      }\" alt=\"${gif.title || gif.slug}\"></div>`,\n      focusedClassName: 'focused',\n    }\n  })\n\n  if (result.length === 0) {\n    return infoPane('No results', 'No results found for your search.')\n  }\n  return result\n}\n\nconst formattedLink = await grid<string>(\n  {\n    input: (flag?.pass as string) || '',\n    placeholder: 'Search Giphy',\n    css,\n    columns: 3,\n    enter: 'Paste URL',\n    preventCollapse: true,\n    shortcuts: [\n      {\n        name: 'Paste Markdown',\n        key: `${cmd}+m`,\n        bar: 'right',\n        onPress: (input, { focused }) => {\n          submit(`![${input}](${focused.value})`)\n        },\n        visible: true,\n      },\n      {\n        name: 'Paste <img>',\n        key: `${cmd}+i`,\n        bar: 'right',\n        onPress: (input, { focused }) => {\n          submit(`<img src=\"${focused.value}\" alt=\"${input}\">`)\n        },\n        visible: true,\n      },\n    ],\n  },\n  giphy\n)\n\nawait setSelectedText(formattedLink)\n\n\n---\nFile: group-choices.ts\n/*\n# Group Choices\n\n- Generates a list of names and job titles using the Faker library\n- Each person is randomly assigned to a group corresponding to a FAANG company\n- The list of people is then organized by their assigned group\n- The user is prompted to select a person from the listed groups\n- The script then displays the selected person\n*/\n\n// Name: Group Choices Sample\n\nimport '@johnlindquist/kit'\nimport { faker } from '@faker-js/faker'\n\ninterface Person {\n  name: string\n  value: string\n  description: string\n  group: string\n}\n\nconst generatePeople = (): Person[] => {\n  const faang: string[] = ['Facebook', 'Apple', 'Amazon', 'Netflix', 'Google']\n  const sample = <T>(arr: T[]): T => arr[Math.floor(Math.random() * arr.length)]\n\n  return Array.from({ length: 22 }).map(() => {\n    const name = faker.person.fullName()\n    return {\n      name,\n      value: name,\n      description: faker.person.jobTitle(),\n      group: sample(faang), // Grouping by a random company\n    }\n  })\n}\n\nconst storePath: string = kenvPath('db', 'people.json') // ~/.kenv/db/people.json\nconst peopleStore = await store(storePath)\n\nlet people: Person[] = await peopleStore.get('people')\nif (!people) {\n  people = generatePeople()\n  await peopleStore.set('people', people)\n}\n\n// groupChoices is based on the \"group\" property of each person\nconst groupedChoices = groupChoices(people)\n\nconst result: string = await micro('Select a Person', groupedChoices)\nawait editor(result)\n\n\n---\nFile: hide-examples.ts\n/*\n# Hide Examples\n\nRun this script to hide the scripts from ~/.kenv/kenvs/examples\nfrom the main menu.\n\nThis script will add `KIT_EXCLUDE_KENVS=examples` to your `~/.kenv/.kenv` file.\n\nYou can remove that line anytime to show the examples again.\n\n> Note: The scripts will still be available in the `~/.kenv/kenvs/examples` folder.\n*/\n\n// Name: Hide Example Scripts\n\nimport '@johnlindquist/kit'\n\n// Add to the `~/.kenv/.env`\nawait appendFile(kenvPath('.env'), `\\nKIT_EXCLUDE_KENVS=examples`)\n\n// You can write a script path to `kitPath('run.txt')` to trigger a new script instance\nawait writeFile(kitPath('run.txt'), kitPath('main', 'index.js'))\n\n\n---\nFile: journal.ts\n/*\n# Markdown Journal\n- Creates a new markdown file based on the day (or opens existing file)\n- Opens the file in the built-in editor\n- Adds a timestamp\n- Auto-saves as you type\n- On first run, will prompt the user to select where to store files\n*/\n\n// Name: Journal\n\nimport '@johnlindquist/kit'\nconst journalDir: string = await env('JOURNAL_DIR', async () => {\n  return await path({\n    hint: 'Select a directory to store journal.md files',\n  })\n})\n\nconst journalPath = createPathResolver(journalDir)\nawait ensureDir(journalPath())\n\nconst dashedDate: string = formatDate(new Date(), 'yyyy-MM-dd')\n\nconst filePath: string = journalPath(dashedDate + '.md')\nsetDescription(filePath)\nlet value = await ensureReadFile(filePath, `# ${dashedDate}`)\n\nconst dashedTime: string = formatDate(new Date(), 'hh:mma')\n\nif (!value.includes(dashedTime)) {\n  value = `${value}\n\n## ${dashedTime}\n\n`\n}\n\nlet changed = false\n\nconst autoSave = debounce(async (input: string) => {\n  await writeFile(filePath, input.trim())\n}, 3000)\n\nconst content: string = await editor({\n  value,\n  scrollTo: 'bottom',\n  shortcuts: [\n    {\n      name: 'Save',\n      key: `${cmd}+s`,\n      onPress: (input: string) => {\n        submit(input)\n      },\n      bar: 'right',\n    },\n    {\n      name: 'Open',\n      key: `${cmd}+o`,\n      onPress: async () => {\n        open(filePath)\n      },\n      bar: 'right',\n    },\n  ],\n  onEscape: async (input: string) => {\n    submit(input)\n  },\n  onAbandon: async (input: string) => {\n    submit(input)\n  },\n  onInput: async (input: string) => {\n    changed = true\n    autoSave(input)\n  },\n})\nawait hide()\n\nconst trimmed: string = content.trim()\nif (!changed) {\n  exit()\n}\n\nawait writeFile(filePath, trimmed)\n\nawait copy(content.split(/##.*/).pop()?.trim() || '')\n\n// Push changes if the path is a git repo\nconst isGit: boolean = await isDir(journalPath('.git'))\nif (isGit) {\n  try {\n    const { stdout } = await exec(\n      `git add . && git commit -m \"${dashedDate}-${dashedTime}\" && git push`,\n      {\n        cwd: journalPath(),\n      }\n    )\n    log({ stdout })\n  } catch (error) {\n    log(error)\n  }\n}\n\n\n---\nFile: main-menu-shortcuts.ts\n/*\n# Main Menu Cheat Sheet\n\n> Open a Widget that displays the Main Menu Cheat Sheet\n*/\n\n// Name: Main Menu Reference\n// Description: List of Main Menu Features\n// Index: 0\n\nimport '@johnlindquist/kit'\n\nconst cheatSheet: string = `\n# Main Menu Cheat Sheet\n\n## Scripts\n\n| Script                    | Key         |\n| ------------------------- | -           |\n| App Launcher              | ;           |\n| File Browser              | /           |\n| Terminal                  | >           |\n| Clipboard                 | <           |\n| Calculator                | 1-9         |\n| Emoji Picker              | 0           |\n| Scratch Pad              | ,           |\n| File Search               | .           |\n| View Snippets             | '           |\n| Word API                  | \"           |\n| System Commands           | -           |\n| Dev Tools Window          | =           |\n| Google Suggest            | ~           |\n| Google                    | \\`          |\n| GitHub Discussions        | ?           |\n\n## Actions\n\n| Actions                   | Shortcut       |\n| ------------------------- | ---------      |\n| Run Selected Script       | return         |\n| Reveal Actions            | ${cmd}+k       |\n| Debug Script (Pro)        | ${cmd}+return  |\n| Show Log Window (Pro)     | opt+return     |\n| New Script                | ${cmd}+n       |\n| Edit Script               | ${cmd}+o       |\n| Share Script on GitHub    | ${cmd}+s       |\n| Copy Script Contents      | ${cmd}+c       |\n| Paste Script as Markdown  | ${cmd}+shift+p |\n| Open Log                  | ${cmd}+l       |\n| Open Kenv in VS Code      | ${cmd}+shift+o |\n| Create/Edit Script Docs   | ${cmd}+.       |\n| Reveal Script in Finder   | ${cmd}+shift+f |\n| Manage Running Processes  | ${cmd}+p       |\n`.trim()\n\nconst { workArea } = await getActiveScreen()\n\nawait widget(md(cheatSheet), {\n  height: workArea.height,\n})\n\n\n---\nFile: microphone.ts\n/*\n# Record Your Microphone\n\n- Opens the microphone recorder\n- Saves the recording to your recordings folder\n- Reveals the recording on your desktop\n*/\n\n// Name: Record Microphone\n// Description: Quickly Record Your Microphone\n\nimport '@johnlindquist/kit'\n\nconst recordingsPath = createPathResolver(kenvPath('recordings'))\nawait ensureDir(recordingsPath())\n\nconst buffer = await mic()\n\nconst outputFile = recordingsPath(`${Date.now()}.webm`)\nawait writeFile(outputFile, buffer)\nawait revealFile(outputFile)\n\nawait hide()\nawait playAudioFile(outputFile)\n\n// Or use a div to play the audio\n// await div({\n//   html: `<audio src=\"file://${outputFile}\" controls/>`,\n// });\n\n\n---\nFile: ocr.ts\n/*\n# OCR Clipboard Image\n\n- This script analyzes the clipboard to see if there is an image present\n- If an image is found, it uses the Tesseract OCR library to convert the content of the image into text and copies to the clipboard\n*/\n\n// Name: Optical Character Recognition\n// Description: Extract text from images\n// Author: Kent C. Dodds\n// Twitter: @kentcdodds\n\nimport '@johnlindquist/kit'\nimport Tesseract from 'tesseract.js'\n\ninterface TesseractResult {\n  data: {\n    text: string\n  }\n}\n\nconst clipboardImage: Buffer = await clipboard.readImage()\n\nif (clipboardImage.byteLength) {\n  const tmpImagePath = tmpPath('ocr.png')\n  await writeFile(tmpImagePath, clipboardImage)\n\n  const text = await div({\n    html: md(`\n## Analyzing image...    \n\n<img src=\"file://${tmpImagePath}\" />`),\n    onInit: async () => {\n      const { data }: TesseractResult = await Tesseract.recognize(clipboardImage, 'eng', {\n        logger: (m: any) => console.log(m),\n      })\n      submit(data.text)\n    },\n  })\n\n  console.clear()\n  await editor(text)\n} else {\n  const selectedFiles: string | undefined = await getSelectedFile()\n  let filePaths: string[]\n\n  if (selectedFiles) {\n    filePaths = selectedFiles.split('\\n')\n  } else {\n    const droppedFiles = await drop({ placeholder: 'Drop images to compress' })\n    filePaths = droppedFiles.map(file => file.path)\n  }\n  for (const filePath of filePaths) {\n    const { data }: TesseractResult = await Tesseract.recognize(filePath, 'eng', {\n      logger: (m: any) => console.log(m),\n    })\n    console.clear()\n    await editor(data.text)\n  }\n}\n\n\n---\nFile: openai-playground.ts\n/*\n# Query the OpenAI API\n\n- Prompts the user for an OPENAI_API_KEY\n- Prompts the user for a prompt to send to OpenAI\n- Sends the prompt to OpenAI\n- Displays the response from OpenAI in the built-in editor\n*/\n\n// Name: OpenAI Playground\n// Description: Query Open AI's API\n\nimport '@johnlindquist/kit'\nimport { OpenAI } from 'openai'\nimport { ChatCompletion, ChatCompletionMessageParam } from 'openai/resources/chat'\n\nconst openai = new OpenAI({\n  apiKey: await env('OPENAI_API_KEY'),\n})\n\nlet currentPanel: string = ``\nlet content: string = ``\nconst messages: ChatCompletionMessageParam[] = []\n\nwhile (true) {\n  content = await micro(\n    {\n      input: '',\n      placeholder: 'Prompt OpenAI',\n      strict: false,\n      onEscape: () => {\n        exit()\n      },\n    },\n    currentPanel\n  )\n\n  messages.push({\n    role: 'user',\n    content,\n  })\n\n  setLoading(true)\n\n  const response: ChatCompletion = await openai.chat.completions.create({\n    model: 'gpt-5-nano',\n    messages,\n  })\n\n  const message = response?.choices?.[0]?.message\n  if (message) {\n    messages.push(message)\n    currentPanel = md(message?.content)\n  } else {\n    dev(response)\n  }\n}\n\n\n---\nFile: paste-clipboard-as-cloudinary-markdown.ts\n/*\n# Paste Clipboard Image as Cloudinary Markdown URL\n\n- Checks if there is an image on the clipboard\n- If image is present, it uploads to Cloudinary using the `upload_stream` method\n- Asks user for the alternative text of the image using `mini` method\n- Formats the Cloudinary response to a markdown image syntax with Alt text\n- Replaces the selected text with this generated markdown\n- If no image is stored in clipboard, it displays a message `No Image in Clipboard`\n\n> Ensure you have your Cloudinary credentials stored in your environment variables for this script to run successfully. \n- `CLOUDINARY_CLOUD_NAME`\n- `CLOUDINARY_API_KEY`\n- `CLOUDINARY_API_SECRET`\n*/\n\n// Name: Paste Clipboard Image as Cloudinary Markdown URL\n\nimport '@johnlindquist/kit'\nimport { infoPane } from '@johnlindquist/kit'\nimport cloudinary from 'cloudinary'\nimport { Readable } from 'stream'\n\ninterface CloudinaryResponse {\n  secure_url: string\n  public_id: string\n}\n\ndiv(infoPane('Reading Clipboard', 'Writing to Cloudinary')) // Don't await\nconst buffer: Buffer = await clipboard.readImage()\n\n// https://console.cloudinary.com/settings/api-keys\nif (buffer && buffer.length) {\n  cloudinary.v2.config({\n    cloud_name: await env('CLOUDINARY_CLOUD_NAME'),\n    api_key: await env('CLOUDINARY_API_KEY'),\n    api_secret: await env('CLOUDINARY_API_SECRET'),\n  })\n\n  const response: CloudinaryResponse = await new Promise((resolve, reject) => {\n    const uploadStream = cloudinary.v2.uploader.upload_stream(\n      {\n        folder: 'clipboard',\n        resource_type: 'auto',\n        secure: true,\n      },\n      (error: Error | null, result: CloudinaryResponse | null) => {\n        if (error) reject(error)\n        else if (result) resolve(result)\n      }\n    )\n\n    new Readable({\n      read() {\n        this.push(buffer)\n        this.push(null)\n      },\n    }).pipe(uploadStream)\n  })\n\n  // format however you want\n  const alt = 'Alt Text'\n  const markdown: string = `![${alt}](${response.secure_url})`\n  await setSelectedText(markdown)\n} else {\n  await div(md(`# No Image in Clipboard`))\n}\n\n\n---\nFile: post-to-bluesky.ts\n/*\n# Post to Bluesky\n\n- Posts a message to Bluesky\n*/\n// Name: Post to Bluesky\n// Description: Post a message to Bluesky\n// Author: John Lindquist\n\nimport '@johnlindquist/kit'\n\nimport { AtpAgent } from '@atproto/api'\n\nconst agent = new AtpAgent({\n  service: 'https://bsky.social',\n})\n\nawait agent.login({\n  identifier: await env('BLUESKY_USERNAME'),\n  password: await env('BLUESKY_PASSWORD'),\n})\n\nconst text = await editor()\n\nawait agent.post({\n  text,\n  createdAt: new Date().toISOString(),\n})\n\n\n---\nFile: resize-image.ts\n/*\n# Resize an Image\n- Prompts user to install \"jimp\"\n- Uses image path from currently selected file in Finder\n- Prompts user for resize dimensions\n- Resizes and reveals new file in Finder\n*/\n\n// Name: Resize an Image\n// Description: Select an Image in Finder to Resize\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\nimport Jimp from 'jimp'\n\nlet imagePath: string = await getSelectedFile()\nif (!imagePath) imagePath = await selectFile(`Choose an image:`)\n\nlet extension: string = path.extname(imagePath)\nconst allowImageExtensions: string[] = ['.png', '.jpg']\nwhile (!allowImageExtensions.includes(extension)) {\n  const fileName: string = path.basename(imagePath)\n\n  imagePath = await selectFile(`${fileName} wasn't an image:`)\n  if (!imagePath) exit()\n\n  extension = path.extname(imagePath)\n}\n\nconst width: number = Number(\n  await arg('Enter width of resized image:', `<img src=\"${imagePath}\" />`)\n)\n\nconst image: Jimp = await Jimp.read(imagePath)\n\nconst newHeight: number = Math.floor(image.bitmap.height * (width / image.bitmap.width))\n\nconst resizedImagePath: string = imagePath.replace(\n  new RegExp(`${extension}$`),\n  `-${width}${extension}`\n)\n\nlog({ resizedImagePath })\n\nawait image.resize(width, newHeight).writeAsync(resizedImagePath)\n\nawait revealFile(resizedImagePath)\n\n\n---\nFile: sample-template.ts\n/*\n# Paste Text from a Template\n\n- Opens the built-in editor where you can tab through template variables for lightning-fast text generation\n- Submitting (`cmd+s`) the template will paste the current text into the window behind Kit.app\n*/\n\n// Name: Sample Template\n// Description: Use a Template to Generate Text\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\n\n// Templates use the same variable syntax as VS Code templates\n// Templates pair very nicely with snippets!\nconst result: string = await template(\n  `\nDear \\${1:Name},\n\nThank you for buying \\${2:Product}!\n\nWe hope you enjoy it.\n\nHave a \\${3|wonderful,great,okay,bad|} day!\n\n\\${4|Sincerely,Best regards,Thanks|},\n\n- \\${5:John Lindquist}\n\n`.trim(),\n  {\n    height: PROMPT.HEIGHT.XXS,\n  }\n)\n\n// You can think of `setSelectedText` as \"paste this text\" in the\n// active app behind Kit.app\nawait setSelectedText(result)\n\n\n---\nFile: scrape-images.ts\n/*\n# Scrape Images Script\n\n- You will be prompted to input an \"Image search\" query.\n- The script autonomously performs an image search on Google for your input.\n- The script extracts the image source links (`.src`) from the search results and filters to base64\n- An array of these images is then mapped to be displayed as an HTML string.\n- The HTML string is then displayed in a `div` prompt\n*/\n\n// Name: Scrape Images\n// Description: Scrape Images from Google\n\nimport '@johnlindquist/kit'\n\nconst query = await arg({\n  placeholder: 'Image query',\n  enter: 'Scrape Google for Images',\n})\n\nconst srcs: string[] = await scrapeSelector(\n  `https://www.google.com/search?q=${encodeURIComponent(query)}&tbm=isch`,\n  'img',\n  el => el.src\n)\n\nconst base64s: string[] = []\nfor (const src of srcs) {\n  if (src.startsWith('data:image/') && !src.includes('image/gif')) {\n    base64s.push(src)\n  }\n}\n\nif (base64s.length === 0) {\n  console.error('No base64 images found.')\n  process.exit(1)\n}\n\nconst choices = []\nfor (let i = 0; i < base64s.length; i++) {\n  const src = base64s[i]\n  choices.push({\n    name: `Image ${i + 1}`,\n    value: i,\n    html: `<img class=\"w-24 h-24 object-cover\" src=\"${src.trim()}\" crossorigin=\"anonymous\" />`,\n  })\n}\n\nconst index = await grid<number>('Pick an image', choices)\n\nif (index === undefined) {\n  console.error('No image selected.')\n  process.exit(1)\n}\n\nconst selectedSrc = base64s[index]\nconsole.log(`Selected image index: ${index}`)\n\n// Extract base64 data from data URL\nconst base64Data = selectedSrc.split(',')[1]\nif (!base64Data) {\n  console.error('Invalid base64 data.')\n  process.exit(1)\n}\n\n// Convert base64 to image buffer\nconst imageBuffer = Buffer.from(base64Data, 'base64')\n\n// Determine image extension\nconst extension = getImageExtension(imageBuffer)\nif (!extension) {\n  await div(md(`No extension found for image... Exiting`))\n  process.exit(1)\n}\n\nconst imagesPath = createPathResolver(kenvPath('images'))\nawait ensureDir(imagesPath())\n\nconst outputPath = imagesPath(`${query}.${extension}`)\nawait writeFile(outputPath, imageBuffer)\nawait revealFile(outputPath)\n\nfunction getImageExtension(buffer: Buffer): string | null {\n  const hex = buffer.toString('hex').toUpperCase()\n  if (hex.startsWith('89504E47')) {\n    return 'png'\n  } else if (hex.startsWith('FFD8FF')) {\n    return 'jpg'\n  } else if (hex.startsWith('474946')) {\n    return 'gif'\n  } else if (hex.startsWith('424D')) {\n    return 'bmp'\n  } else if (hex.startsWith('52494646')) {\n    // Further check for WebP\n    const webpHeader = buffer.toString('ascii', 8, 12)\n    if (webpHeader === 'WEBP') {\n      return 'webp'\n    }\n    return null\n  } else {\n    return null // Unknown type\n  }\n}\n\n\n---\nFile: selfie.ts\n/*\n# Take a Selfie\n\n- Opens the webcam\n- Saves the selfie to your selfies folder\n- Reveals the selfie on your desktop\n*/\n\n// Name: Take a Selfie\n// Description: Quickly Take a Selfie\n\nimport '@johnlindquist/kit'\n\nconst selfiePath = createPathResolver(kenvPath('selfies'))\nawait ensureDir(selfiePath())\nconst buffer = await webcam()\nconst outputFile = selfiePath(`${Date.now()}.png`)\nawait writeFile(outputFile, buffer)\nawait div({\n  className: 'flex flex-col items-center justify-center h-full',\n  html: `<img src=\"file://${outputFile}\" class=\"max-h-full\" />`,\n  onInit: async () => {\n    toast(`Heya cutie! üòò`)\n  },\n})\n\n\n---\nFile: todos.ts\n/*\n# Todos \"App\"\n- Creates a json file to read/write todos\n- Allows to add, toggle, and remove todos\n- Demonstrates using \"onTab\" and advanced \"arg\" features\n*/\n\n// Name: Todos \"App\"\n// Description: Create/read/update/delete db example\n// Author: John Lindquist\n// Twitter: @johnlindquist\n\nimport '@johnlindquist/kit'\n\ninterface Todo {\n  name: string\n  done: boolean\n  id: string\n}\n\n// \"kv\" is a key/value store\n// The name \"todos\" will map to ~/.kenv/db/todos.json\n// The object will be the initial value\nconst kv = await store('todos', { todos: [] })\nlet defaultChoiceId: string = ''\n\n// The input allows you to maintain input when switching tabs\nconst toggleTab = async (input: string = '') => {\n  const todos: Todo[] = (await kv.get<{ todos: Todo[] }>('todos'))?.todos || []\n  const toggleTodos = todos.map(t => {\n    return {\n      ...t,\n      enter: 'Toggle Todo',\n      name: `${t.done ? '‚úÖ' : '‚ùå'} ${t.name}`,\n    }\n  })\n  const choices = [\n    ...toggleTodos,\n    {\n      name: 'Add Todo',\n      miss: true,\n      info: true,\n    },\n  ]\n  const todo = await micro<Todo>(\n    {\n      input,\n      placeholder: todos.length ? 'Add Todo' : 'Toggle Todo',\n      defaultChoiceId,\n      // disabling \"strict\" allows you to submit the input when no choices are available\n      strict: false,\n      onChoiceFocus: (input: string, { focused }) => {\n        // defaultValue allows you to maintain the selected choice when switching tabs\n        defaultChoiceId = focused?.id || ''\n        setEnter('Toggle Todo')\n      },\n      onNoChoices: (input: string) => {\n        setEnter('Add Todo')\n      },\n    },\n    choices\n  )\n\n  // \"todo\" was the string input\n  if (typeof todo === 'string') {\n    todos.push({\n      name: todo,\n      done: false,\n      id: uuid(),\n    })\n  }\n  // \"todo\" was the selected object\n  else if (todo?.id) {\n    const foundTodo = todos.find(({ id }) => id === todo.id)\n    if (foundTodo) {\n      foundTodo.done = !foundTodo.done\n    }\n  }\n\n  await kv.set('todos', { todos })\n  await toggleTab()\n}\n\nconst removeTab = async (input: string = '') => {\n  const todos: Todo[] = (await kv.get<{ todos: Todo[] }>('todos'))?.todos || []\n  const todo = await micro<Todo>(\n    {\n      input,\n      defaultChoiceId,\n      placeholder: 'Remove Todo',\n      enter: 'Remove Todo',\n      onChoiceFocus: (input: string, { focused }) => {\n        defaultChoiceId = focused?.id || ''\n      },\n    },\n    [\n      ...todos.map(t => {\n        return {\n          ...t,\n          enter: 'Toggle Todo',\n          name: `${t.done ? '‚úÖ' : '‚ùå'} ${t.name}`,\n        }\n      }),\n      {\n        name: todos.length ? 'No Matches' : 'No Todos',\n        miss: true,\n        info: true,\n      },\n    ]\n  )\n  // Remove the todo from the array\n  const index = todos.findIndex(t => t.id === todo.id)\n\n  todos.splice(index, 1)\n  await kv.set('todos', { todos })\n  await removeTab()\n}\n\nonTab('Toggle', toggleTab)\nonTab('Remove', removeTab)\n\n\n---\nFile: update-examples.ts\n/*\n# Update to the Latest Script Kit Examples\n\n- cd's to the examples directory\n- pulls the latest examples from the script kit repo\n- goes back to the main menu\n*/\n\n// Name: Update Examples\n// Description: Update to the Latest Script Kit Examples\n// Recent: false\n\nimport '@johnlindquist/kit'\n\nconst examplesDir: string = kenvPath('kenvs', 'examples')\ncd(examplesDir)\n\nawait $`git stash`\nawait $`git pull`\n\nawait mainScript()\n\n\n---\nFile: vite-widget.ts\nimport '@johnlindquist/kit'\n\nawait vite('sample-project')\n\n\n</EXAMPLES>\n\n<METADATA>\nCRITICAL: Every generated script MUST begin _exactly_ like this, with these specific comment lines. Fill in the bracketed placeholders appropriately.\n\n// Name: {Script Name}\n// Description: {Brief Description based on the user prompt}\n// Author: {Author Name from userInfo}\n// Twitter: {@twitterHandle from userInfo if available, otherwise omit this line}\n// GitHub: {githubUsername from userInfo if available, otherwise omit this line}\n\nInstructions for Placeholders:\n\n- `{Script Name}`: A concise, descriptive name for the script (e.g., \"List Desktop Files\", \"Summarize Clipboard\").\n- `{Brief Description}`: A short sentence explaining what the script does.\n- `{Author Name from userInfo}`: Use the `fullName` or `username` provided in the `{userInfo}` object passed into the main prompt.\n- `{@twitterHandle from userInfo if available}`: If the `{userInfo}` contains a Twitter handle, include it prefixed with `@`. If not, omit the entire `// Twitter:` line.\n- `{githubUsername from userInfo if available}`: If the `{userInfo}` contains a GitHub username, include it. If not, omit the entire `// GitHub:` line.\n\nExample using provided userInfo `{ name: \"Jane Doe\", username: \"janedoe\", twitter: \"JaneDoesTweets\" }`:\n\n// Name: Quick Note Taker\n// Description: Opens an editor to quickly jot down a note.\n// Author: Jane Doe\n// Twitter: @JaneDoesTweets\n// GitHub: janedoe\n\n(The actual script code follows immediately after these metadata lines, starting with `import \"@johnlindquist/kit\";`)\n\n</METADATA>\n\n<STRUCTURED_SCRIPT_KIT_DOCS>\n{\n  \"categories\": [\n    {\n      \"category\": \"Prompts\",\n      \"functions\": [\n        \"arg\",\n        \"env\",\n        \"select\",\n        \"div\",\n        \"md\",\n        \"editor\",\n        \"form\",\n        \"fields\",\n        \"path\",\n        \"micro\",\n        \"mini\",\n        \"chat\",\n        \"template\",\n        \"hotkey\",\n        \"drop\",\n        \"find\",\n        \"eyeDropper\"\n      ]\n    },\n    {\n      \"category\": \"System Interaction\",\n      \"functions\": [\n        \"notify\",\n        \"say\",\n        \"beep\",\n        \"toast\",\n        \"setSelectedText\",\n        \"getSelectedText\",\n        \"clipboard\",\n        \"keyboard\",\n        \"mouse\",\n        \"menu\",\n        \"term\",\n        \"applescript\",\n        \"getMediaDevices\",\n        \"getTypedText\",\n        \"mic\",\n        \"webcam\",\n        \"screenshot\"\n      ]\n    },\n    {\n      \"category\": \"File System\",\n      \"functions\": [\n        \"home\",\n        \"kitPath\",\n        \"kenvPath\",\n        \"tmpPath\",\n        \"readFile\",\n        \"writeFile\",\n        \"readdir\",\n        \"copyFile\",\n        \"ensureReadFile\",\n        \"ensureDir\",\n        \"pathExists\",\n        \"remove\",\n        \"move\",\n        \"trash\"\n      ]\n    },\n    {\n      \"category\": \"Network\",\n      \"functions\": [\n        \"get\",\n        \"post\",\n        \"put\",\n        \"del\",\n        \"patch\",\n        \"download\"\n      ]\n    },\n    {\n      \"category\": \"Shell/Exec\",\n      \"functions\": [\n        \"$\",\n        \"exec\",\n        \"spawn\",\n        \"cd\",\n        \"pwd\",\n        \"which\"\n      ]\n    },\n    {\n      \"category\": \"Utilities\",\n      \"functions\": [\n        \"inspect\",\n        \"dev\",\n        \"db\",\n        \"store\",\n        \"uuid\",\n        \"wait\",\n        \"compile (handlebars)\",\n        \"degit\",\n        \"git\",\n        \"md\",\n        \"highlight\",\n        \"replace\",\n        \"formatDate\",\n        \"run\"\n      ]\n    },\n    {\n      \"category\": \"State/UI Control\",\n      \"functions\": [\n        \"submit\",\n        \"exit\",\n        \"show\",\n        \"hide\",\n        \"blur\",\n        \"focus\",\n        \"setPanel\",\n        \"setPreview\",\n        \"setHint\",\n        \"setInput\",\n        \"setChoices\",\n        \"onTab\"\n      ]\n    }\n  ],\n  \"snippets\": {\n    \"arg\": \"// Basic text input\\nlet name = await arg(\\\"What's your name?\\\")\\n\\n// Array of suggestions\\nlet fruit = await arg('Pick a fruit:', ['Apple', 'Banana', 'Cherry'])\\n\\n// Allow freeform text while still showing suggestions and a hint\\nlet color = await arg(\\n  {\\n    placeholder: 'Type a color or choose one',\\n    hint: 'Enter any color name',\\n    strict: false,\\n  },\\n  ['Red', 'Green', 'Blue']\\n)\",\n    \"div\": \"// Display static HTML\\nawait div(`<h1>Hello Script Kit!</h1>`)\\n\\n// Display Markdown using md()\\nawait div(md(`# **Markdown** is *awesome*`))\\n\\n// Add Tailwind CSS classes for styling\\nawait div(`<h2 class=\\\"text-2xl text-blue-500\\\">Styled Title</h2>`, `p-4 bg-gray-100`)\",\n    \"editor\": \"// Basic usage: get text from the user\\nlet notes = await editor('Enter your notes here:')\\n\\n// Load initial text and set language\\nlet code = await editor({\\n  value: `console.log(\\\"Hello TypeScript!\\\");`,\\n  language: 'typescript',\\n  hint: 'Edit the TypeScript code',\\n})\\n\\n// Listen to input changes for a live preview panel\\nawait editor({\\n  value: `# Start Typing Markdown`,\\n  onInput: async newText => {\\n    setPanel(md(newText)) // Show rendered Markdown in a panel below\\n  },\\n})\",\n    \"form\": \"// Basic form with one input\\nlet { email } = await form(`<input name=\\\"email\\\" type=\\\"email\\\" placeholder=\\\"Enter your email\\\" />`)\\n\\n// Multiple fields with labels\\nlet userData = await form(\\n  md(`\\n  ## User Details\\n  <label>Name: <input name=\\\"name\\\" type=\\\"text\\\" class=\\\"input\\\"></label>\\n  <label>Age:  <input name=\\\"age\\\" type=\\\"number\\\" class=\\\"input\\\"></label>\\n`)\\n) // Using md for structure and Tailwind classes via @apply if setup\\n\\n// Form with various input types\\nlet preferences = await form(\\n  md(`\\n  ### Preferences\\n  Color: <input name=\\\"color\\\" type=\\\"color\\\" value=\\\"#ff0000\\\"/>\\n  Fruit: \\n  <select name=\\\"fruit\\\" class=\\\"select\\\">\\n    <option>Apple</option>\\n    <option>Banana</option>\\n  </select>\\n`)\\n)\",\n    \"fields\": \"// Simple array usage for labels, returns an array of string values\\nlet [username, password] = await fields(['Username', 'Password'])\\n\\n// Define fields with more properties (label, type, placeholder, initial value)\\nlet [productName, quantity] = await fields([\\n  { label: 'Product Name', placeholder: 'e.g., Awesome Gadget' },\\n  { label: 'Quantity', type: 'number', value: '1' },\\n])\\n\\n// Process field values to build an object\\nconst fieldDefs = [\\n  { name: 'email', label: 'Email Address', type: 'email' },\\n  { name: 'subscribe', label: 'Subscribe to newsletter?', type: 'checkbox', value: 'true' }, // Checkboxes return string \\\"true\\\"/\\\"false\\\"\\n]\\nconst values = await fields(fieldDefs)\\nconst contactInfo = fieldDefs.reduce((obj, field, index) => {\\n  obj[field.name] = field.type === 'checkbox' ? values[index] === 'true' : values[index]\\n  return obj\\n}, {})\\nconsole.log(contactInfo)\",\n    \"path\": \"// Simple usage: select a file or folder\\nlet selectedPath = await path()\\nconsole.log('User selected:', selectedPath)\\n\\n// Only allow picking folders, starting from the user's 'Documents'\\nlet projectDir = await path({\\n  placeholder: 'Pick a project folder',\\n  startPath: home('Documents'),\\n  onlyDirs: true,\\n})\\n\\n// Restrict to a certain startPath and provide a hint\\nlet configFile = await path({\\n  startPath: kenvPath(), // Start in the current .kenv directory\\n  hint: 'Select a configuration file from your kenv',\\n})\",\n    \"select\": \"// Basic multi-select with an array of strings\\nlet favoriteFruits = await select('Pick your favorite fruits (multi-select):', [\\n  'Apple',\\n  'Banana',\\n  'Cherry',\\n  'Date',\\n])\\n\\n// Provide objects with name, value, and description\\nlet selectedTask = await select('Select a task to run:', [\\n  { name: 'Run Build', value: 'build_script', description: 'Compiles the project' },\\n  { name: 'Run Tests', value: 'test_script', description: 'Executes all unit tests' },\\n  { name: 'Deploy', value: 'deploy_script', description: 'Deploys to production' },\\n])\\n\\n// Async dynamic choices based on user input\\nlet character = await select('Type to search Star Wars characters:', async input => {\\n  if (!input) return [{ name: 'Type to search...', disabled: true }]\\n  const response = await get(`https://swapi.dev/api/people/?search=${input}`)\\n  return response.data.results.map(p => ({ name: p.name, value: p }))\\n})\",\n    \"drop\": \"// 1. Drop files and get their paths\\nlet droppedItems = await drop('Drop files onto this area')\\nif (Array.isArray(droppedItems) && droppedItems.length > 0 && droppedItems[0].path) {\\n  let filePaths = droppedItems.map(item => item.path).join('\\\\n')\\n  await editor({ value: `Dropped file paths:\\\\n${filePaths}`, hint: 'File paths listed' })\\n} else if (typeof droppedItems === 'string') {\\n  // Handle dropped text\\n  await editor({ value: `Dropped text: ${droppedItems}`, hint: 'Text content displayed' })\\n} else {\\n  await div(md('Nothing specific dropped or an unknown type.'))\\n}\\n\\n// 2. Differentiate based on dropped content (more robust check)\\nlet result = await drop('Drop files or text')\\nif (typeof result === 'string') {\\n  console.log('User dropped text:', result)\\n  await div(md(`You dropped text: \\\\`${result}\\\\``))\\n} else if (Array.isArray(result) && result.length > 0 && result[0].path) {\\n  console.log(\\n    'User dropped file(s):',\\n    result.map(f => f.path)\\n  )\\n  await div(md(`You dropped: **${result.map(f => f.name).join(', ')}**`))\\n}\\n\\n// 3. Use in a flow, e.g., upload dropped image\\n// (Conceptual: upload logic not shown)\\nawait div(\\\"<h2>Drop an image to 'upload'</h2>\\\")\\nlet imageDrop = await drop()\\nif (Array.isArray(imageDrop) && imageDrop[0]?.path) {\\n  // const uploadResult = await uploadImage(imageDrop[0].path);\\n  await div(md(`Simulated upload of: **${imageDrop[0].name}**`))\\n}\",\n    \"env\": \"// Load MY_API_KEY, or prompt to set it if not found\\nlet apiKey = await env('MY_API_KEY')\\nconsole.log(`API Key: ${apiKey}`)\\n\\n// Prompt with a custom message and choices if variable isn't set\\nlet preferredShell = await env('PREFERRED_SHELL', async () => {\\n  return await arg('Select your preferred shell:', ['bash', 'zsh', 'fish'])\\n})\\nconsole.log(`Shell: ${preferredShell}`)\\n\\n// Prompt for a secret (input will be masked)\\nlet dbPassword = await env('DATABASE_PASSWORD', {\\n  secret: true,\\n  placeholder: 'Enter your secure database password',\\n})\",\n    \"term\": \"// Launch a simple terminal and run a command\\nawait term('echo Hello from the embedded terminal!')\\n\\n// Start a shell in a specific directory and list files\\nawait term({\\n  command: 'ls -la', // Command to execute\\n  cwd: home('Documents'), // Set working directory\\n  hint: 'Listing files in Documents',\\n})\\n\\n// Interactive usage for a CLI tool\\nawait term('npx degit sveltejs/template my-svelte-project')\",\n    \"template\": \"// Simple template with one placeholder\\nlet greeting = await template(\\\"Hello, $1! What's new?\\\")\\nconsole.log(\\\"User's response:\\\", greeting) // Contains the filled template\\n\\n// Template with multiple placeholders and default values\\nlet meetingInvite = await template(\\n  md(`\\n  ## Meeting Invite\\n  Hi \\\\${1:Team},\\n  Let's meet on \\\\${2:Monday} at \\\\${3:10 AM}.\\n  Topic: \\\\${4:Project Update}\\n`)\\n)\\n// meetingInvite will be the fully filled Markdown string\\n\\n// Using choice placeholders\\nlet mood = await template(\\\"I'm feeling \\\\${1|happy,sad,excited,calm} today.\\\")\\nconsole.log(mood) // e.g., \\\"I'm feeling happy today.\\\"\",\n    \"chat\": \"// Basic chat session, returns array of messages on submit (e.g. Escape)\\nlet conversationLog = await chat({ placeholder: 'Type your message...' })\\nconsole.log('Chat ended. Log:', conversationLog)\\n\\n// Preload messages and respond after user types\\nawait chat({\\n  onInit: async () => {\\n    chat.addMessage({ text: 'Hello! How can I assist you today?', position: 'left' })\\n  },\\n  onSubmit: async userInput => {\\n    if (userInput.toLowerCase().includes('help')) {\\n      chat.addMessage({ text: 'Sure, I can help with that!', position: 'left' })\\n    } else {\\n      chat.addMessage({ text: 'Interesting point!', position: 'left' })\\n    }\\n    // To keep chat open, you might need to avoid default submission or handle it\\n  },\\n})\\n\\n// Programmatically adding messages to an active chat\\n// (This example implies a chat is already open or being managed by the script)\\n// await chat.addMessage({ text: \\\"This is a system message.\\\", position: \\\"center\\\", type: \\\"system\\\" });\\n// Note: For continuous interaction, use `onSubmit` to re-prompt or handle state.\\n// The following is a conceptual example of sending a message from outside onSubmit:\\n// setTimeout(() => chat.addMessage({ text: \\\"A delayed message!\\\", position: \\\"left\\\" }), 2000);\\n// await chat(); // To keep it open for the timeout\",\n    \"micro\": \"// Minimal text input\\nlet quickNote = await micro('Jot down a quick note:')\\nconsole.log(quickNote)\\n\\n// With suggestions (like `arg()`)\\nlet quickColor = await micro('Quickly pick a color:', ['red', 'green', 'blue'])\\nconsole.log(`Selected: ${quickColor}`)\\n\\n// With actions (config object for placeholder and actions)\\nawait micro({\\n  placeholder: 'Search or action...',\\n  choices: ['Google Search', 'DuckDuckGo Search'],\\n  actions: [\\n    {\\n      name: 'Open Script Kit Docs',\\n      shortcut: 'cmd+d',\\n      onAction: () => open('https://scriptkit.com/docs'),\\n    },\\n  ],\\n})\",\n    \"ai\": \"// Basic text generation\\nconst storyStarter = ai('Write a one-sentence story starter about a lost robot.')\\nconst sentence = await storyStarter(\\\"The robot's name was Rusty.\\\") // Input can provide context\\nawait div(md(sentence))\\n\\n// Translate text using a specific model\\nconst translateToSpanish = ai('Translate the following English text to Spanish:', {\\n  model: 'openai:gpt-5-nano', // Example: specify provider and model\\n})\\nconst spanishText = await translateToSpanish('Hello, how are you?')\\nawait div(md(`Spanish: ${spanishText}`))\\n\\n// Summarize selected text\\nconst selectedText = await getSelectedText()\\nif (selectedText) {\\n  const summarizer = ai('Summarize this text in one concise sentence.')\\n  const summary = await summarizer(selectedText)\\n  await setSelectedText(`Summary: ${summary}`) // Paste summary back\\n} else {\\n  await div('No text selected to summarize.')\\n}\",\n    \"generate\": \"// Extract structured data from text\\nconst userInfoSchema = z.object({ name: z.string(), email: z.string().email().optional() })\\nconst textInput = 'User: Alice (alice@example.com)'\\nconst userInfo = await generate(textInput, userInfoSchema)\\nconsole.log(`Name: ${userInfo.name}, Email: ${userInfo.email || 'N/A'}`)\\n\\n// Generate a list of items based on a schema\\nconst todoSchema = z.object({\\n  tasks: z.array(z.object({ description: z.string(), done: z.boolean() })),\\n})\\nconst projectPrompt = \\\"Create 3 tasks for a 'Garden Cleanup' project. Mark first as done.\\\"\\nconst todoList = await generate(projectPrompt, todoSchema)\\ntodoList.tasks.forEach(task => console.log(`[${task.done ? 'x' : ' '}] ${task.description}`))\\n\\n// Using a different model for generation\\nconst productSchema = z.object({ productName: z.string(), features: z.array(z.string()) })\\nconst adCopy = 'Generate a product name and 2 features for a new smart coffee mug.'\\nconst productInfo = await generate(adCopy, productSchema, {\\n  model: 'anthropic:claude-3-opus-20240229',\\n})\\nawait div(md(`## ${productInfo.productName}\\\\n- ${productInfo.features.join('\\\\n- ')}`))\",\n    \"assistant\": \"// Simple conversational assistant\\nconst friendlyBot = assistant('You are a friendly and helpful assistant.')\\nfriendlyBot.addUserMessage('Tell me a fun fact about space.')\\nlet responseText = ''\\nfor await (const chunk of friendlyBot.textStream) {\\n  responseText += chunk\\n}\\nawait div(md(responseText))\\n\\n// Assistant that streams to the chat UI\\nconst chatBot = assistant('You are a concise chat bot.')\\nawait chat({\\n  onSubmit: async input => {\\n    chat.addMessage({ text: '...', position: 'left' }) // Placeholder for AI response\\n    chatBot.addUserMessage(input)\\n    let fullReply = ''\\n    for await (const chunk of chatBot.textStream) {\\n      fullReply += chunk\\n      chat.setMessage(-1, { text: md(fullReply), position: 'left' }) // Update last message\\n    }\\n  },\\n})\\n\\n// Assistant with a simple tool (conceptual, relies on autoExecuteTools or manual handling)\\nconst calculatorTool = {\\n  add: {\\n    description: 'Adds two numbers.',\\n    parameters: z.object({ a: z.number(), b: z.number() }),\\n    execute: async ({ a, b }) => ({ result: a + b }),\\n  },\\n}\\nconst mathBot = assistant('You are a math assistant. Use tools when needed.', {\\n  tools: calculatorTool,\\n  autoExecuteTools: true, // Simplifies tool calling flow\\n})\\nmathBot.addUserMessage('What is 5 plus 7?')\\nconst mathResult = await mathBot.generate() // autoExecuteTools handles intermediate steps\\nawait div(md(`MathBot says: ${mathResult.text}`))\",\n    \"hotkey\": \"// Capture a single hotkey combination\\nawait div(md('Press any key combination to define a shortcut...'))\\nconst keyInfo = await hotkey()\\nawait editor(JSON.stringify(keyInfo, null, 2))\\n// Example keyInfo: { key: \\\"s\\\", command: true, shift: false, shortcut: \\\"command s\\\" }\\n\\n// Use hotkey to trigger different actions\\nawait div(md('Press Cmd+O to Open, Cmd+S to Save'))\\nconst actionKey = await hotkey()\\nif (actionKey.shortcut === 'command o') await div('Open action triggered!')\\nif (actionKey.shortcut === 'command s') await div('Save action triggered!')\\n\\n// Set a placeholder for the hotkey prompt\\nconst customHotkey = await hotkey({ placeholder: 'Define your custom hotkey:' })\\nawait div(md(`You pressed: **${customHotkey.shortcut}**`))\",\n    \"grid\": \"// Simple grid selection with string choices\\nlet selectedColors = await grid('Select your favorite colors:', [\\n  'Red',\\n  'Green',\\n  'Blue',\\n  'Yellow',\\n  'Purple',\\n  'Orange',\\n])\\nawait div(md(`You selected: ${selectedColors.join(', ')}`))\\n\\n// Grid with object choices (name, value, html for custom rendering)\\nconst imageChoices = [\\n  {\\n    name: 'Cat',\\n    value: 'cat_img.jpg',\\n    html: `<img src=\\\"http://placekitten.com/100/100\\\" alt=\\\"Cat\\\" class=\\\"w-24 h-24 object-cover\\\"/>`,\\n  },\\n  {\\n    name: 'Dog',\\n    value: 'dog_img.jpg',\\n    html: `<img src=\\\"https://placedog.net/100/100\\\" alt=\\\"Dog\\\" class=\\\"w-24 h-24 object-cover\\\"/>`,\\n  },\\n  {\\n    name: 'Fox',\\n    value: 'fox_img.jpg',\\n    html: `<img src=\\\"https://randomfox.ca/images/randomfox.jpg\\\" alt=\\\"Fox\\\" style=\\\"width:96px;height:96px;object-fit:cover\\\"/>`,\\n  },\\n]\\nlet chosenImages = await grid({ placeholder: 'Choose images:', columns: 3 }, imageChoices)\\n// chosenImages will be an array of values, e.g., [\\\"cat_img.jpg\\\"]\\n\\n// Grid with dynamic choices and custom styling\\nconst numbers = Array.from({ length: 9 }, (_, i) => ({ name: `${i + 1}`, value: i + 1 }))\\nlet pickedNumber = await grid({\\n  placeholder: 'Pick a number (single selection behavior for grid can be faked)',\\n  choices: numbers,\\n  columns: 3,\\n  css: `.choice { border: 1px solid #ccc; text-align: center; padding: 10px; }\\n        .focused { background-color: lightblue !important; }`,\\n  // Note: Grid is typically multi-select. For single-select, you'd take the first item.\\n})\\nawait div(md(`Number (first if multiple): ${pickedNumber[0]}`))\",\n    \"eyeDropper\": \"// Basic usage: pick a color from the screen\\nawait div(\\n  md(\\n    'Click the button above or use the prompt to activate eyedropper. Then click anywhere on screen.'\\n  )\\n)\\nconst colorResult = await eyeDropper()\\n// Example colorResult: { sRGBHex: \\\"#RRGGBB\\\", rgb: \\\"rgb(r,g,b)\\\", ... }\\nif (colorResult) {\\n  await div(\\n    md(\\n      `Picked color: <span style=\\\"color:${colorResult.sRGBHex}; background-color:lightgray; padding:2px;\\\">${colorResult.sRGBHex}</span>`\\n    )\\n  )\\n} else {\\n  await div(md('Eyedropper cancelled or failed.'))\\n}\\n\\n// Using eyeDropper and immediately showing the hex value\\nconst colorData = await eyeDropper({\\n  placeholder: 'Activate eyedropper and pick a color',\\n  hint: 'Click on the screen to select a color',\\n})\\nif (colorData?.sRGBHex) {\\n  await setSelectedText(colorData.sRGBHex) // Pastes the hex code\\n  await toast(`Copied ${colorData.sRGBHex} to clipboard!`) // Also copy it\\n  copy(colorData.sRGBHex)\\n}\\n\\n// Use in a script flow\\nawait div(md('## Design Tool\\\\nPick a primary color:'))\\nconst primaryColor = await eyeDropper()\\nif (primaryColor) {\\n  await div(md(`Primary color set to: ${primaryColor.sRGBHex}`))\\n  // ... further script logic using primaryColor.sRGBHex\\n}\"\n  }\n}\n</STRUCTURED_SCRIPT_KIT_DOCS>\n\n<USER_INFO>\n{userInfo}\n</USER_INFO>\n\n<PROMPT>\n<NPM_PACKAGES>\nFor behaviors that don't exist in Script Kit, use the most relevant npm package.\n</NPM_PACKAGES>\n\n<PUBLIC_APIS>\nIt's encouraged to use popular APIs like OpenAI, Google Sheets, etc.\n</PUBLIC_APIS>\n\n<CRITICAL>\nNever import \"path\", it's overriden by the \"path\" package in Script Kit.\n\"path\" is globally available in Script Kit, don't worry about importing it.\n</CRITICAL>\n\n<LEGACY>\nThe \"npm\" function is deprecated. Please use standard ES Module imports.\n</LEGACY>\n\n<AVOID>\n// Never use Node.js API imports. They should be globals!\nimport { readdir, rename } from 'node:fs/promises'\nimport { rename } from 'node:fs/promises';\nimport { join } from 'node:path'\nimport { ensureDir } from 'fs-extra';\n\nNever create a \"main\" or \"run\" function. Always favor \"top-level\" code and patterns.\n</AVOID>\n\n#include \"prompts/BEST_PRACTICES.md\"\n\n</PROMPT>\n","metadata":{"promptLength":352668,"userPromptLength":34,"structuredDocsLength":18719,"hasStructuredDocs":true}}